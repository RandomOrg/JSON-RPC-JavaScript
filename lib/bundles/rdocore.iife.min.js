var RandomOrgCore=function(e){"use strict";var t={};t.RandomOrgBadHTTPResponseError=class extends Error{constructor(e){super(e)}},t.RandomOrgInsufficientBitsError=class extends Error{#bits=-1;constructor(e,t){super(e),this.#bits=t}getBitsLeft(){return this.#bits}},t.RandomOrgInsufficientRequestsError=class extends Error{constructor(e){super(e)}},t.RandomOrgJSONRPCError=class extends Error{constructor(e){super(e)}},t.RandomOrgKeyNotRunningError=class extends Error{constructor(e){super(e)}},t.RandomOrgRANDOMORGError=class extends Error{#code=-1;constructor(e,t=-1){super(e),this.#code=t}getCode(){return this.#code}},t.RandomOrgSendTimeoutError=class extends Error{constructor(e){super(e)}},t.RandomOrgCacheEmptyError=class extends Error{#paused=!1;constructor(e,t=!1){super(e),this.#paused=t}wasPaused(){return this.#paused}};const{RandomOrgInsufficientBitsError:s,RandomOrgCacheEmptyError:r}=t;var a=class{#requestFunction=null;#request=null;#bulkRequestNumber=0;#requestNumber=0;#requestSize=-1;#stack=[];#cacheSize=10;#paused=!1;#bitsUsed=0;#requestsUsed=0;#currentlyPopulating=!1;#error=null;constructor(e,t,s,r,a,i){this.#requestFunction=e,this.#request=t,this.#cacheSize=s,this.#bulkRequestNumber=r,this.#requestNumber=a,this.#requestSize=i,this.#populate()}#populate=async()=>{if(!this.#currentlyPopulating&&!this.#paused){this.#currentlyPopulating=!0;let e=null;for(;null==this.#error;)if(this.#bulkRequestNumber>0){if(!(this.#stack.length<=this.#cacheSize-this.#bulkRequestNumber))break;try{e=await this.#requestFunction(this.#request),this.#addResponse(e,!0)}catch(t){if(t instanceof s){let s=t.getBitsLeft();if(s>this.#requestSize){let t=Math.floor(s/this.#requestSize);this.#request.params.n=t*this.#requestNumber,e=await this.#requestFunction(this.#request),this.#addResponse(e,!0),this.#request.params.n=this.#bulkRequestNumber*this.#requestNumber}else this.#error=t}else this.#error=t}}else{if(!(this.#stack.length<this.#cacheSize))break;try{e=await this.#requestFunction(this.#request),this.#addResponse(e,!1)}catch(e){this.#error=e}}this.#currentlyPopulating=!1}};stop(){this.#paused=!0}resume(){this.#paused=!1,this.#refresh()}isPaused(){return this.#paused}get(){if(null!=this.#error)throw this.#error;if(this.#stack&&0==this.#stack.length)throw this.#paused?new r("The RandomOrgCache stack is empty and the cache is paused. Please call resume() to restart populating the cache.",!0):new r("The RandomOrgCache stack is empty, please wait for it to repopulate itself.");{let e=this.#stack.pop();return this.#refresh(),e}}async getOrWait(){try{return this.get()}catch(e){if(e instanceof r){if(this.#paused)throw e;return 0==await this.#populate()&&await new Promise((e=>setTimeout(e,50))),this.getOrWait()}}}getCachedValues(){return this.#stack.length}getBitsUsed(){return this.#bitsUsed}getRequestsUsed(){return this.#requestsUsed}#refresh=()=>{(this.#bulkRequestNumber>0&&this.#stack.length<=this.#cacheSize-this.#bulkRequestNumber||this.#bulkRequestNumber<=0&&this.#stack.length<this.#cacheSize)&&this.#populate()};#addResponse=(e,t)=>{if(this.#requestsUsed++,this.#bitsUsed+=e.result.bitsUsed,t){let t=e.result.random.data;for(let e=0;e<t.length;e+=this.#requestNumber)this.#stack.push(t.slice(e,e+this.#requestNumber))}else this.#stack.push(e.result.random.data)}};const{RandomOrgBadHTTPResponseError:i,RandomOrgInsufficientBitsError:n,RandomOrgInsufficientRequestsError:u,RandomOrgJSONRPCError:c,RandomOrgKeyNotRunningError:o,RandomOrgRANDOMORGError:l,RandomOrgSendTimeoutError:h}=t,d=a;var E=class e{static#INTEGER_METHOD="generateIntegers";static#INTEGER_SEQUENCE_METHOD="generateIntegerSequences";static#DECIMAL_FRACTION_METHOD="generateDecimalFractions";static#GAUSSIAN_METHOD="generateGaussians";static#STRING_METHOD="generateStrings";static#UUID_METHOD="generateUUIDs";static#BLOB_METHOD="generateBlobs";static#GET_USAGE_METHOD="getUsage";static#SIGNED_INTEGER_METHOD="generateSignedIntegers";static#SIGNED_INTEGER_SEQUENCE_METHOD="generateSignedIntegerSequences";static#SIGNED_DECIMAL_FRACTION_METHOD="generateSignedDecimalFractions";static#SIGNED_GAUSSIAN_METHOD="generateSignedGaussians";static#SIGNED_STRING_METHOD="generateSignedStrings";static#SIGNED_UUID_METHOD="generateSignedUUIDs";static#SIGNED_BLOB_METHOD="generateSignedBlobs";static#GET_RESULT_METHOD="getResult";static#CREATE_TICKET_METHOD="createTickets";static#LIST_TICKET_METHOD="listTickets";static#GET_TICKET_METHOD="getTicket";static#VERIFY_SIGNATURE_METHOD="verifySignature";static BLOB_FORMAT_BASE64="base64";static BLOB_FORMAT_HEX="hex";static DEFAULT_REPLACEMENT=!0;static DEFAULT_BASE=10;static DEFAULT_USER_DATA=null;static DEFAULT_TICKET_ID=null;static DEFAULT_PREGENERATED_RANDOMIZATION=null;static DEFAULT_LICENSE_DATA=null;static UUID_SIZE=122;static DEFAULT_BLOCKING_TIMEOUT=864e5;static DEFAULT_HTTP_TIMEOUT=12e4;static MAX_URL_LENGTH=2046;static#DEFAULT_DELAY=1e3;static#ALLOWANCE_STATE_REFRESH_SECONDS=36e5;#bitsLeft=-1;#requestsLeft=-1;#backoff=-1;#backoffError="";#apiKey="";#blockingTimeout=e.DEFAULT_BLOCKING_TIMEOUT;#httpTimeout=e.DEFAULT_HTTP_TIMEOUT;#advisoryDelay=0;#lastResponseReceivedTime=0;static#keyIndexedInstances={};static#ERROR_CODES=[100,101,200,201,202,203,204,300,301,302,303,304,305,306,307,400,401,402,403,404,405,420,421,422,423,424,425,500,32e3];constructor(t,s={}){if(e.#keyIndexedInstances&&e.#keyIndexedInstances[t])return e.#keyIndexedInstances[t];this.#apiKey=t,this.#blockingTimeout=s.blockingTimeout||864e5,this.#httpTimeout=s.httpTimeout||12e4,e.#keyIndexedInstances[t]=this}async generateIntegers(e,t,s,r={}){let a=this.#integerRequest(e,t,s,r);return this.#extractBasic(this.#sendRequest(a))}async generateIntegerSequences(e,t,s,r,a={}){let i=this.#integerSequenceRequest(e,t,s,r,a);return this.#extractBasic(this.#sendRequest(i))}async generateDecimalFractions(e,t,s={}){let r=this.#decimalFractionRequest(e,t,s);return this.#extractBasic(this.#sendRequest(r))}async generateGaussians(e,t,s,r,a={}){let i=this.#gaussianRequest(e,t,s,r,a);return this.#extractBasic(this.#sendRequest(i))}async generateStrings(e,t,s,r={}){let a=this.#stringRequest(e,t,s,r);return this.#extractBasic(this.#sendRequest(a))}async generateUUIDs(e,t={}){let s=this.#UUIDRequest(e,t);return this.#extractBasic(this.#sendRequest(s))}async generateBlobs(e,t,s={}){let r=this.#blobRequest(e,t,s);return this.#extractBasic(this.#sendRequest(r))}async generateSignedIntegers(e,t,s,r={}){let a=this.#integerRequest(e,t,s,r,!0);return this.#extractSigned(this.#sendRequest(a))}async generateSignedIntegerSequences(e,t,s,r,a={}){let i=this.#integerSequenceRequest(e,t,s,r,a,!0);return this.#extractSigned(this.#sendRequest(i))}async generateSignedDecimalFractions(e,t,s={}){let r=this.#decimalFractionRequest(e,t,s,!0);return this.#extractSigned(this.#sendRequest(r))}async generateSignedGaussians(e,t,s,r,a={}){let i=this.#gaussianRequest(e,t,s,r,a,!0);return this.#extractSigned(this.#sendRequest(i))}async generateSignedStrings(e,t,s,r={}){let a=this.#stringRequest(e,t,s,r,!0);return this.#extractSigned(this.#sendRequest(a))}async generateSignedUUIDs(e,t={}){let s=this.#UUIDRequest(e,t,!0);return this.#extractSigned(this.#sendRequest(s))}async generateSignedBlobs(e,t,s={}){let r=this.#blobRequest(e,t,s,!0);return this.#extractSigned(this.#sendRequest(r))}async verifySignature(t,s){let r={random:t,signature:s},a=this.#generateRequest(e.#VERIFY_SIGNATURE_METHOD,r);return this.#extractVerification(this.#sendRequest(a))}async getBitsLeft(){let t=Date.now()>this.#lastResponseReceivedTime+e.#ALLOWANCE_STATE_REFRESH_SECONDS;return(this.#bitsLeft<0||t)&&await this.#getUsage(),this.#bitsLeft}async getRequestsLeft(){let t=Date.now()>this.#lastResponseReceivedTime+e.#ALLOWANCE_STATE_REFRESH_SECONDS;return(this.#requestsLeft<0||t)&&await this.#getUsage(),this.#requestsLeft}async getResult(t){let s={serialNumber:t},r=this.#generateKeyedRequest(e.#GET_RESULT_METHOD,s);return this.#extractSigned(this.#sendRequest(r))}async createTickets(t,s){let r={n:t,showResult:s},a=this.#generateKeyedRequest(e.#CREATE_TICKET_METHOD,r);return this.#extractResult(this.#sendRequest(a))}async listTickets(t){let s={ticketType:t},r=this.#generateKeyedRequest(e.#LIST_TICKET_METHOD,s);return this.#extractResult(this.#sendRequest(r))}async getTicket(t){let s={ticketId:t},r=this.#generateRequest(e.#GET_TICKET_METHOD,s);return this.#extractResult(this.#sendRequest(r))}createUrl(t,s){let r="https://api.random.org/signatures/form?format=json";if(r+="&random="+this.#formatUrl(JSON.stringify(t)),r+="&signature="+this.#formatUrl(s),r.length>e.MAX_URL_LENGTH)throw new l("Error: URL exceeds maximum length("+e.MAX_URL_LENGTH+" characters).");return r}createHtml(e,t){let s="<form action='https://api.random.org/signatures/form' method='post'>\n";return s+="  "+this.#inputHTML("hidden","format","json")+"\n",s+="  "+this.#inputHTML("hidden","random",JSON.stringify(e))+"\n",s+="  "+this.#inputHTML("hidden","signature",t)+"\n",s+="  <input type='submit' value='Validate' />\n</form>",s}createIntegerCache(e,t,s,r={}){let a=r.cacheSize||20;a<2&&(a=2);let i=this.#integerRequest(e,t,s,r),n=Math.ceil(Math.log(s-t+1)/Math.log(2)*e),u=0;return"replacement"in r&&!0!==r.replacement||(u=a/2,i.params.n=e*u),new d(this.#sendRequest.bind(this),i,a,u,e,n)}createIntegerSequenceCache(e,t,s,r,a={}){let i=a.cacheSize||20;i<2&&(i=2);let n,u=Math.ceil(Math.log(this.#maxValue(r)-this.#minValue(s),1)/Math.log(2)*e*this.#maxValue(t)),c=0;n=a.replacement&&Array.isArray(a.replacement)?a.replacement.every((e=>!0===e)):a.replacement||!0,n&&(c=i/2,Array.isArray(t)&&(t=this.#adjust(t,c)),Array.isArray(s)&&(s=this.#adjust(s,c)),Array.isArray(r)&&(r=this.#adjust(r,c)),a.replacement&&Array.isArray(a.replacement)&&(a.replacement=this.#adjust(a.replacement,c)),a.base&&Array.isArray(a.base)&&(a.base=this.#adjust(a.base,c)));let o=this.#integerSequenceRequest(e,t,s,r,a);return n&&(o.params.n=c*e),new d(this.#sendRequest.bind(this),o,i,c,e,u)}createDecimalFractionCache(e,t,s={}){let r=s.cacheSize||20;r<2&&(r=2);let a=this.#decimalFractionRequest(e,t,s),i=0;"replacement"in s&&!0!==s.replacement||(i=r/2,a.params.n=e*i);let n=Math.ceil(Math.log(10)/Math.log(2)*t*e);return new d(this.#sendRequest.bind(this),a,r,i,e,n)}createGaussianCache(e,t,s,r,a={}){let i=a.cacheSize||20;i<2&&(i=2);let n=Math.ceil(Math.log(Math.pow(10,r))/Math.log(2)*e),u=i/2,c=this.#gaussianRequest(e*u,t,s,r);return new d(this.#sendRequest.bind(this),c,i,u,e,n)}createStringCache(e,t,s,r={}){let a=r.cacheSize||20;a<2&&(a=2);let i=this.#stringRequest(e,t,s,r),n=Math.ceil(Math.log(s.length)/Math.log(2)*t*e),u=0;return"replacement"in r&&!0!==r.replacement||(u=a/2,i.params.n=e*u),new d(this.#sendRequest.bind(this),i,a,u,e,n)}createUUIDCache(t,s={}){let r=s.cacheSize||10;r<2&&(r=2);let a=t*e.UUID_SIZE,i=r/2,n=this.#UUIDRequest(t*i);return new d(this.#sendRequest.bind(this),n,r,i,t,a)}createBlobCache(e,t,s={}){let r=s.cacheSize||10;r<2&&(r=2);let a=e*t,i=r/2,n=this.#blobRequest(e*i,t,s);return new d(this.#sendRequest.bind(this),n,r,i,e,a)}#sendRequest=async function(t){if(-1!=this.#backoff){if(Date.now()<this.#backoff)throw new u(this.#backoffError);this.#backoff=-1,this.#backoffError=null}let s=this.#advisoryDelay-(Date.now()-this.#lastResponseReceivedTime);if(-1!=this.#blockingTimeout&&s>this.#blockingTimeout)throw new h("The server advisory delay of "+s+"millis is greater than the defined maximum allowed blocking time of "+this.#blockingTimeout+"millis.");s>0&&await new Promise((e=>setTimeout(e,s)));let r=this.#httpTimeout;return new Promise((function(e){let s=new XMLHttpRequest;s.open("POST","https://api.random.org/json-rpc/4/invoke"),s.setRequestHeader("Content-Type","application/json"),s.ontimeout=function(){throw new h("The maximum allowed blocking time of "+r+"millis has been exceeded while waiting for the server to respond.")},s.onload=function(){if(!(this.status>=200&&this.status<300))throw new i("Error: "+s.status);e(s.responseText)},s.onerror=function(e){throw e instanceof Error?e:(console.info("** An error occurred during the transaction."),new Error(s.responseText))},s.timeout=r,s.send(JSON.stringify(t))})).then((s=>{if((s=JSON.parse(s)).error){let t=s.error.code,r=s.error.message,a=s.error.data;if(401==t)throw new o("Error "+t+": "+r);if(402==t){let e=(new Date).setUTCHours(0,0,0,0);throw this.#backoff=+e,this.#backoffError="Error "+t+": "+r,this.#requestsLeft=a[1],new u(this.#backoffError)}throw 403==t?(this.#bitsLeft=a[1],new n("Error"+t+": "+r,this.#bitsLeft)):e.#ERROR_CODES.includes(t)?new l("Error "+t+": "+r,t):new c("Error "+t+": "+r)}return[e.#VERIFY_SIGNATURE_METHOD,e.#GET_RESULT_METHOD,e.#CREATE_TICKET_METHOD,e.#LIST_TICKET_METHOD,e.#GET_TICKET_METHOD].includes(t.method)?this.#advisoryDelay=e.#DEFAULT_DELAY:(this.#requestsLeft=s.result.requestsLeft,this.#bitsLeft=s.result.bitsLeft,s.result.advisoryDelay?this.#advisoryDelay=s.result.advisoryDelay:this.#advisoryDelay=e.#DEFAULT_DELAY),this.#lastResponseReceivedTime=Date.now(),s}))};#getUsage=async()=>{let t=this.#generateKeyedRequest(e.#GET_USAGE_METHOD,{});return this.#extractResult(this.#sendRequest(t))};#generateRequest=(e,t)=>({jsonrpc:"2.0",method:e,params:t,id:this.#uuidv4()});#generateKeyedRequest=(e,t)=>(t.apiKey=this.#apiKey,this.#generateRequest(e,t));#extractBasic=async e=>e.then((e=>e.result.random.data));#extractSigned=async e=>e.then((e=>({data:e.result.random.data,random:e.result.random,signature:e.result.signature})));#extractVerification=async e=>e.then((e=>e.result.authenticity));#extractResult=async e=>e.then((e=>e.result));#integerRequest=(t,s,r,{replacement:a=!0,base:i=10,pregeneratedRandomization:n=null,licenseData:u=null,userData:c=null,ticketId:o=null}={},l=!1)=>{let h={n:t,min:s,max:r,replacement:a,base:i};h=this.#addOptionalParams(h,n,u,c,o,l);let d=l?e.#SIGNED_INTEGER_METHOD:e.#INTEGER_METHOD;return this.#generateKeyedRequest(d,h)};#integerSequenceRequest=(t,s,r,a,{replacement:i=!0,base:n=10,pregeneratedRandomization:u=null,licenseData:c=null,userData:o=null,ticketId:l=null}={},h=!1)=>{let d={n:t,length:s,min:r,max:a,replacement:i,base:n};d=this.#addOptionalParams(d,u,c,o,l,h);let E=h?e.#SIGNED_INTEGER_SEQUENCE_METHOD:e.#INTEGER_SEQUENCE_METHOD;return this.#generateKeyedRequest(E,d)};#decimalFractionRequest=(t,s,{replacement:r=!0,pregeneratedRandomization:a=null,licenseData:i=null,userData:n=null,ticketId:u=null}={},c=!1)=>{let o={n:t,decimalPlaces:s,replacement:r};o=this.#addOptionalParams(o,a,i,n,u,c);let l=c?e.#SIGNED_DECIMAL_FRACTION_METHOD:e.#DECIMAL_FRACTION_METHOD;return this.#generateKeyedRequest(l,o)};#gaussianRequest=(t,s,r,a,{pregeneratedRandomization:i=null,licenseData:n=null,userData:u=null,ticketId:c=null}={},o=!1)=>{let l={n:t,mean:s,standardDeviation:r,significantDigits:a};l=this.#addOptionalParams(l,i,n,u,c,o);let h=o?e.#SIGNED_GAUSSIAN_METHOD:e.#GAUSSIAN_METHOD;return this.#generateKeyedRequest(h,l)};#stringRequest=(t,s,r,{replacement:a=!0,pregeneratedRandomization:i=null,licenseData:n=null,userData:u=null,ticketId:c=null}={},o=!1)=>{let l={n:t,length:s,characters:r,replacement:a};l=this.#addOptionalParams(l,i,n,u,c,o);let h=o?e.#SIGNED_STRING_METHOD:e.#STRING_METHOD;return this.#generateKeyedRequest(h,l)};#UUIDRequest=(t,{pregeneratedRandomization:s=null,licenseData:r=null,userData:a=null,ticketId:i=null}={},n=!1)=>{let u={n:t};u=this.#addOptionalParams(u,s,r,a,i,n);let c=n?e.#SIGNED_UUID_METHOD:e.#UUID_METHOD;return this.#generateKeyedRequest(c,u)};#blobRequest=(t,s,{format:r=this.BASE64,pregeneratedRandomization:a=null,licenseData:i=null,userData:n=null,ticketId:u=null},c=!1)=>{let o={n:t,size:s,format:r};o=this.#addOptionalParams(o,a,i,n,u,c);let l=c?e.#SIGNED_BLOB_METHOD:e.#BLOB_METHOD;return this.#generateKeyedRequest(l,o)};#addOptionalParams=(e,t,s,r,a,i=!1)=>(e.pregeneratedRandomization=t,i&&(e.licenseData=s,e.userData=r,e.ticketId=a),e);#adjust=(e,t)=>Array.from({length:t},(()=>e)).flat();#maxValue=e=>Array.isArray(e)?e.reduce((function(e,t){return Math.max(e,t)})):e;#minValue=e=>Array.isArray(e)?e.reduce((function(e,t){return Math.min(e,t)})):e;#formatUrl=e=>{if(!/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))try{window&&(e=btoa(e))}catch(t){t instanceof ReferenceError&&(e=Buffer.from(e).toString("base64"))}return e=(e=(e=e.replace(/=/g,"%3D")).replace(/\+/g,"%2B")).replace(/\//g,"%2F")};#inputHTML=(e,t,s)=>"<input type='"+e+"' name='"+t+"' value='"+s+"' />";#uuidv4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};let g=t.RandomOrgRANDOMORGError,R=t.RandomOrgBadHTTPResponseError,m=t.RandomOrgInsufficientBitsError,T=t.RandomOrgInsufficientRequestsError,p=t.RandomOrgJSONRPCError,D=t.RandomOrgKeyNotRunningError,O=t.RandomOrgSendTimeoutError,S=t.RandomOrgCacheEmptyError;return e.RandomOrgBadHTTPResponseError=R,e.RandomOrgCache=a,e.RandomOrgCacheEmptyError=S,e.RandomOrgClient=E,e.RandomOrgInsufficientBitsError=m,e.RandomOrgInsufficientRequestsError=T,e.RandomOrgJSONRPCError=p,e.RandomOrgKeyNotRunningError=D,e.RandomOrgRANDOMORGError=g,e.RandomOrgSendTimeoutError=O,e.default=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmRvY29yZS5paWZlLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vUmFuZG9tT3JnRXJyb3JzLmpzIiwiLi4vUmFuZG9tT3JnQ2FjaGUuanMiLCIuLi9SYW5kb21PcmdDbGllbnQuanMiLCIuLi9lc20vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuLyoqXHJcbiAqIEVycm9yIHRocm93biBieSB0aGUgUmFuZG9tT3JnQ2xpZW50IGNsYXNzIHdoZW4gdGhlIGNvbm5lY3Rpb24gZG9lc24ndCByZXR1cm5cclxuICogYSBIVFRQIDIwMCBPSyByZXNwb25zZS5cclxuICovXHJcbmV4cG9ydHMuUmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3IgPSBjbGFzcyBSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvciBleHRlbmRzIEVycm9yXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBleGNlcHRpb24gd2l0aCB0aGUgc3BlY2lmaWVkIGRldGFpbCBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGRldGFpbCBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFcnJvciB0aHJvd24gYnkgdGhlIFJhbmRvbU9yZ0NsaWVudCBjbGFzcyB3aGVuIGl0cyBBUEkga2V5J3MgcmVxdWVzdCBoYXNcclxuICogZXhjZWVkZWQgaXRzIHJlbWFpbmluZyBzZXJ2ZXIgYml0cyBhbGxvd2FuY2UuXHJcbiAqIFxyXG4gKiBJZiB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBpc3N1aW5nIGxhcmdlIHJlcXVlc3RzIGl0IG1heSBiZSBwb3NzaWJsZSBzdWNjZWVkXHJcbiAqIHdpdGggc21hbGxlciByZXF1ZXN0cy4gVXNlIHRoZSBnZXRCaXRzTGVmdCgpIGNhbGwgaW4gdGhpcyBjbGFzcyB0byBoZWxwXHJcbiAqIGRldGVybWluZSBpZiBhbiBhbHRlcm5hdGl2ZSByZXF1ZXN0IHNpemUgaXMgYXBwcm9wcmlhdGUuXHJcbiAqL1xyXG4gZXhwb3J0cy5SYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3IgPSBjbGFzcyBSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3IgZXh0ZW5kcyBFcnJvclxyXG57XHJcbiAgICAvLyBTdG9yZXMgdGhlIG51bWJlciBvZiBiaXRzIHJlbWFpbmluZ1xyXG4gICAgI2JpdHMgPSAtMTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGV4Y2VwdGlvbiB3aXRoIHRoZSBzcGVjaWZpZWQgZGV0YWlsIG1lc3NhZ2UuXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBkZXRhaWwgbWVzc2FnZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRzIEJpdHMgcmVtYWluaW5nIGp1c3QgYmVmb3JlIHRoZSBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBiaXRzKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy4jYml0cyA9IGJpdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgYml0cyByZW1haW5pbmcuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIGJpdHMgbGVmdC5cclxuICAgICAqL1xyXG4gICAgZ2V0Qml0c0xlZnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2JpdHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFcnJvciB0aHJvd24gYnkgdGhlIFJhbmRvbU9yZ0NsaWVudCBjbGFzcyB3aGVuIGl0cyBBUEkga2V5J3Mgc2VydmVyIHJlcXVlc3RzXHJcbiAqIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICogXHJcbiAqIFRoaXMgaW5kaWNhdGVzIHRoYXQgYSBiYWNrLW9mZiB1bnRpbCBtaWRuaWdodCBVVEMgaXMgaW4gZWZmZWN0LCBiZWZvcmUgd2hpY2hcclxuICogbm8gcmVxdWVzdHMgd2lsbCBiZSBzZW50IGJ5IHRoZSBjbGllbnQgYXMgbm8gbWVhbmluZ2Z1bCBzZXJ2ZXIgcmVzcG9uc2VzIHdpbGxcclxuICogYmUgcmV0dXJuZWQuXHJcbiAqL1xyXG5leHBvcnRzLlJhbmRvbU9yZ0luc3VmZmljaWVudFJlcXVlc3RzRXJyb3IgPSBjbGFzcyBSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yIGV4dGVuZHMgRXJyb3Jcclxue1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGV4Y2VwdGlvbiB3aXRoIHRoZSBzcGVjaWZpZWQgZGV0YWlsIG1lc3NhZ2UuXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBkZXRhaWwgbWVzc2FnZS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRXJyb3IgdGhyb3duIGJ5IHRoZSBSYW5kb21PcmdDbGllbnQgY2xhc3Mgd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBKU09OLVJQQ1xyXG4gKiBFcnJvci4gU2VlIGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9lcnJvci1jb2Rlc1xyXG4gKi9cclxuZXhwb3J0cy5SYW5kb21PcmdKU09OUlBDRXJyb3IgPSBjbGFzcyBSYW5kb21PcmdKU09OUlBDRXJyb3IgZXh0ZW5kcyBFcnJvclxyXG57XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgZXhjZXB0aW9uIHdpdGggdGhlIHNwZWNpZmllZCBkZXRhaWwgbWVzc2FnZS5cclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGRldGFpbCBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFcnJvciB0aHJvd24gYnkgdGhlIFJhbmRvbU9yZ0NsaWVudCBjbGFzcyB3aGVuIGl0cyBBUEkga2V5IGhhcyBiZWVuIHN0b3BwZWQuXHJcbiAqIFJlcXVlc3RzIHdpbGwgbm90IGNvbXBsZXRlIHdoaWxlIEFQSSBrZXkgaXMgaW4gdGhlIHN0b3BwZWQgc3RhdGUuXHJcbiAqL1xyXG5leHBvcnRzLlJhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvciA9IGNsYXNzIFJhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvciBleHRlbmRzIEVycm9yXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogRXJyb3IgdGhyb3duIGJ5IHRoZSBSYW5kb21PcmdDbGllbnQgY2xhc3Mgd2hlbiBpdHMgQVBJIGtleSBoYXMgYmVlbiBzdG9wcGVkLlxyXG4gICAgICogUmVxdWVzdHMgd2lsbCBub3QgY29tcGxldGUgd2hpbGUgQVBJIGtleSBpcyBpbiB0aGUgc3RvcHBlZCBzdGF0ZS5cclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGRldGFpbCBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFcnJvciB0aHJvd24gYnkgdGhlIFJhbmRvbU9yZ0NsaWVudCBjbGFzcyB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhXHJcbiAqIFJBTkRPTS5PUkcgRXJyb3IuIFNlZSBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvZXJyb3ItY29kZXNcclxuICovXHJcbmV4cG9ydHMuUmFuZG9tT3JnUkFORE9NT1JHRXJyb3IgPSBjbGFzcyBSYW5kb21PcmdSQU5ET01PUkdFcnJvciBleHRlbmRzIEVycm9yXHJcbntcclxuICAgIC8vIFN0b3JlcyB0aGUgY29kZSBvZiB0aGUgUkFORE9NLk9SRyBlcnJvclxyXG4gICAgI2NvZGUgPSAtMTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEVycm9yIHRocm93biBieSB0aGUgUmFuZG9tT3JnQ2xpZW50IGNsYXNzIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGFcclxuICAgICAqIFJBTkRPTS5PUkcgRXJyb3IuIFNlZSBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvZXJyb3ItY29kZXNcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGRldGFpbCBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBbY29kZT0tMV0gVGhlIGVycm9yIGNvZGUuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNvZGUgPSAtMSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpOyAgICBcclxuICAgICAgICB0aGlzLiNjb2RlID0gY29kZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIFJBTkRPTS5PUkcgZXJyb3IgY29kZSwgc2VlXHJcbiAgICAgKiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvZXJyb3ItY29kZXNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBlcnJvciBjb2RlLlxyXG4gICAgICovXHJcbiAgICBnZXRDb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNjb2RlO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRXJyb3IgdGhyb3duIGJ5IHRoZSBSYW5kb21PcmdDbGllbnQgY2xhc3Mgd2hlbiBpdHMgc2V0IGJsb2NraW5nIHRpbWVvdXQgaXNcclxuICogZXhjZWVkZWQgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gKi9cclxuZXhwb3J0cy5SYW5kb21PcmdTZW5kVGltZW91dEVycm9yID0gY2xhc3MgUmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvciBleHRlbmRzIEVycm9yXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogRXJyb3IgdGhyb3duIGJ5IHRoZSBSYW5kb21PcmdDbGllbnQgY2xhc3Mgd2hlbiBpdHMgc2V0IGJsb2NraW5nIHRpbWVvdXQgaXNcclxuICAgICAqIGV4Y2VlZGVkIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGRldGFpbCBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFcnJvciB0aHJvd24gd2hlbiBkYXRhIHJldHJpZXZhbCBmcm9tIGFuIGVtdHB5IFJhbmRvbU9yZ0NhY2hlIGlzIGF0dGVtcHRlZC5cclxuICovXHJcbmV4cG9ydHMuUmFuZG9tT3JnQ2FjaGVFbXB0eUVycm9yID0gY2xhc3MgUmFuZG9tT3JnQ2FjaGVFbXB0eUVycm9yIGV4dGVuZHMgRXJyb3Jcclxue1xyXG4gICAgI3BhdXNlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXJyb3IgdGhyb3duIHdoZW4gZGF0YSByZXRyaWV2YWwgZnJvbSBhbiBlbXRweSBSYW5kb21PcmdDYWNoZSBpcyBhdHRlbXB0ZWQuXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBkZXRhaWwgbWVzc2FnZS5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcGF1c2VkIFJlZmxlY3RzIHdoZXRoZXIgdGhlIFJhbmRvbU9yZ0NhY2hlIGluc3RhbmNlIHdhc1xyXG4gICAgICogICAgIHBhdXNlZCB3aGVuIHRoaXMgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcGF1c2VkID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLiNwYXVzZWQgPSBwYXVzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGNhY2hlIHdhcyBwYXVzZWQgYXQgdGhlIHRpbWUgd2hlbiB0aGVcclxuICAgICAqIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBwYXVzZWQsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgd2FzUGF1c2VkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNwYXVzZWQ7XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcbmNvbnN0IHtcclxuICAgIFJhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcixcclxuICAgIFJhbmRvbU9yZ0NhY2hlRW1wdHlFcnJvclxyXG59ID0gcmVxdWlyZSgnLi9SYW5kb21PcmdFcnJvcnMuanMnKTtcclxuLyoqXHJcbiAqIFByZWNhY2hlIGNsYXNzIGZvciBmcmVxdWVudGx5IHVzZWQgcmVxdWVzdHMuXHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFJhbmRvbU9yZ0NhY2hlIHtcclxuICAgIC8vIGZ1bmN0aW9uIHVzZWQgdG8gc2VuZCBhIHJlcXVlc3RcclxuICAgICNyZXF1ZXN0RnVuY3Rpb24gPSBudWxsO1xyXG5cclxuICAgIC8vIHJlcXVlc3QgdG8gYmUgc2VudFxyXG4gICAgI3JlcXVlc3QgPSBudWxsO1xyXG5cclxuICAgIC8vIG4gZm9yIGJ1bGsgcmVxdWVzdHNcclxuICAgICNidWxrUmVxdWVzdE51bWJlciA9IDA7XHJcbiAgICAvLyBuIGZvciBhIHNpbmdsZSByZXF1ZXN0XHJcbiAgICAjcmVxdWVzdE51bWJlciA9IDA7XHJcbiAgICAvLyBzaXplIG9mIGEgc2luZ2xlIHJlcXVlc3QgaW4gYml0c1xyXG4gICAgI3JlcXVlc3RTaXplID0gLTE7XHJcblxyXG4gICAgLy8gc3RvcmVzIGNhY2hlZCBhcnJheXMgb2YgdmFsdWVzXHJcbiAgICAjc3RhY2sgPSBbXTtcclxuICAgIC8vIG51bWJlciBvZiBhcnJheXMgdG8gdHJ5IHRvIG1haW50YWluIGluICNzdGFja1xyXG4gICAgI2NhY2hlU2l6ZSA9IDEwO1xyXG5cclxuICAgIC8vIHN0YXR1cyBvZiB0aGUgY2FjaGVcclxuICAgICNwYXVzZWQgPSBmYWxzZTtcclxuICAgIC8vIGJpdHMgdXNlZCBieSB0aGlzIGNhY2hlXHJcbiAgICAjYml0c1VzZWQgPSAwO1xyXG4gICAgLy8gcmVxdWVzdHMgdXNlZCBieSB0aGlzIGNhY2hlXHJcbiAgICAjcmVxdWVzdHNVc2VkID0gMDtcclxuICAgIC8vIGVuc3VyZXMgI3BvcHVsYXRlKCkgZG9lcyBub3QgaXNzdWUgcGFyYWxsZWwgcmVxdWVzdHNcclxuICAgICNjdXJyZW50bHlQb3B1bGF0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgLy8gYW4gZXJyb3Igd2hpY2ggd2lsbCBiZSB0aHJvd24gb24gdGhlIG5leHQgY2FsbCB0byBnZXQoKSBvciBnZXRPcldhaXQoKVxyXG4gICAgI2Vycm9yID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgY2xhc3MgYW5kIHN0YXJ0IHN0YWNrIHBvcHVsYXRpb25cclxuICAgICAqIFxyXG4gICAgICogKiogV0FSTklORyoqIFNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBSYW5kb21PcmdDbGllbnQncyBjcmVhdGVDYWNoZSgpXHJcbiAgICAgKiBtZXRob2RzLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihPYmplY3QpIDogT2JqZWN0fSByZXF1ZXN0RnVuY3Rpb24gRnVuY3Rpb24gdXNlZCB0byBzZW5kXHJcbiAgICAgKiAgICAgc3VwcGxpZWQgcmVxdWVzdCB0byBzZXJ2ZXIuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdCBSZXF1ZXN0IHRvIHNlbmQgdG8gc2VydmVyIHZpYSByZXF1ZXN0RnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2FjaGVTaXplIE51bWJlciBvZiByZXF1ZXN0IHJlc3BvbnNlcyB0byB0cnkgbWFpbnRhaW4uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnVsa1JlcXVlc3ROdW1iZXIgSWYgcmVxdWVzdCBpcyBzZXQgdG8gYmUgaXNzdWVkIGluIGJ1bGssXHJcbiAgICAgKiAgICAgbnVtYmVyIG9mIHJlc3VsdCBzZXRzIGluIGEgYnVsayByZXF1ZXN0LCBlbHNlIDAuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdE51bWJlciBJZiByZXF1ZXN0IGlzIHNldCB0byBiZSBpc3N1ZWQgaW4gYnVsayxcclxuICAgICAqICAgICBudW1iZXIgb2YgcmVzdWx0cyBpbiBhIHNpbmdsZSByZXF1ZXN0LCBlbHNlIDAuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2luZ2xlUmVxdWVzdFNpemUgU2l6ZSBvZiBhIHNpbmdsZSByZXF1ZXN0IGluIGJpdHMgZm9yXHJcbiAgICAgKiAgICAgYWRqdXN0aW5nIGJ1bGsgcmVxdWVzdHMgaWYgYml0cyBhcmUgaW4gc2hvcnQgc3VwcGx5IG9uIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RGdW5jdGlvbiwgcmVxdWVzdCwgY2FjaGVTaXplLCBidWxrUmVxdWVzdE51bWJlciwgcmVxdWVzdE51bWJlciwgc2luZ2xlUmVxdWVzdFNpemUpIHtcclxuICAgICAgICB0aGlzLiNyZXF1ZXN0RnVuY3Rpb24gPSByZXF1ZXN0RnVuY3Rpb247XHJcblxyXG4gICAgICAgIHRoaXMuI3JlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuI2NhY2hlU2l6ZSA9IGNhY2hlU2l6ZTtcclxuXHJcbiAgICAgICAgdGhpcy4jYnVsa1JlcXVlc3ROdW1iZXIgPSBidWxrUmVxdWVzdE51bWJlcjtcclxuICAgICAgICB0aGlzLiNyZXF1ZXN0TnVtYmVyID0gcmVxdWVzdE51bWJlcjtcclxuICAgICAgICB0aGlzLiNyZXF1ZXN0U2l6ZSA9IHNpbmdsZVJlcXVlc3RTaXplO1xyXG5cclxuICAgICAgICB0aGlzLiNwb3B1bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRnVuY3Rpb24gdG8gY29udGludWUgaXNzdWluZyByZXF1ZXN0cyB1bnRpbCB0aGUgc3RhY2sgaXMgZnVsbC5cclxuICAgICAqIFxyXG4gICAgICogS2VlcCBpc3N1aW5nIHJlcXVlc3RzIHRvIHNlcnZlciB1bnRpbCBzdGFjayBpcyBmdWxsLiBXaGVuIHN0YWNrIGlzIGZ1bGxcclxuICAgICAqIGlmIHJlcXVlc3RzIGFyZSBiZWluZyBpc3N1ZWQgaW4gYnVsaywgd2FpdCB1bnRpbCBzdGFjayBoYXMgZW5vdWdoIHNwYWNlXHJcbiAgICAgKiB0byBhY2NvbW1vZGF0ZSBhbGwgb2YgYSBidWxrIHJlcXVlc3QgYmVmb3JlIGlzc3VpbmcgYSBuZXcgcmVxdWVzdCwgb3RoZXJ3aXNlXHJcbiAgICAgKiBpc3N1ZSBhIG5ldyByZXF1ZXN0IGV2ZXJ5IHRpbWUgYW4gaXRlbSBpbiB0aGUgc3RhY2sgaGFzIGJlZW4gY29uc3VtZWQuIE5vdGVcclxuICAgICAqIHRoYXQgcmVxdWVzdHMgYXJlIGJsb2NraW5nICgnYXdhaXQnIGlzIHVzZWQgd2hlbiBjYWxsaW5nIHRoZSByZXF1ZXN0RnVuY3Rpb24pLFxyXG4gICAgICogaS5lLiwgb25seSBvbmUgcmVxdWVzdCB3aWxsIGJlIGlzc3VlZCBieSB0aGUgY2FjaGUgYXQgYW55IGdpdmVuIHRpbWUuXHJcbiAgICAgKi9cclxuICAgICNwb3B1bGF0ZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuI2N1cnJlbnRseVBvcHVsYXRpbmcgJiYgIXRoaXMuI3BhdXNlZCkge1xyXG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50bHlQb3B1bGF0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI2Vycm9yICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNidWxrUmVxdWVzdE51bWJlciA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJcyB0aGVyZSBzcGFjZSBmb3IgYSBidWxrIHJlc3BvbnNlIGluIHRoZSBzdGFjaz9cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4jc3RhY2subGVuZ3RoIDw9ICh0aGlzLiNjYWNoZVNpemUgLSB0aGlzLiNidWxrUmVxdWVzdE51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy4jcmVxdWVzdEZ1bmN0aW9uKHRoaXMuI3JlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkUmVzcG9uc2UocmVzcG9uc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3QgZW5vdWdoIGJpdHMgcmVtYWluaW5nIGZvciBhIGJ1bGsgcmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYml0c0xlZnQgPSBlLmdldEJpdHNMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID4gdGhpcy4jcmVxdWVzdFNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcG9zc2libGUsIGFkanVzdCByZXF1ZXN0IGZvciB0aGUgbGFyZ2VzdCBwb3NzaWJsZSBzaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGp1c3RlZEJ1bGsgPSBNYXRoLmZsb29yKGJpdHNMZWZ0L3RoaXMuI3JlcXVlc3RTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVxdWVzdC5wYXJhbXMubiA9IGFkanVzdGVkQnVsayAqIHRoaXMuI3JlcXVlc3ROdW1iZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuI3JlcXVlc3RGdW5jdGlvbih0aGlzLiNyZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkUmVzcG9uc2UocmVzcG9uc2UsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdG8gb3JpZ2luYWwgYnVsayByZXF1ZXN0IHNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVxdWVzdC5wYXJhbXMubiA9IHRoaXMuI2J1bGtSZXF1ZXN0TnVtYmVyICogdGhpcy4jcmVxdWVzdE51bWJlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXF1ZXN0IHNpemUgY2Fubm90IGJlIGFkanVzdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2Vycm9yID0gZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW55IG90aGVyIGVycm9yIHRocm93biBkdXJpbmcgaW4gdGhlIHJlcXVlc3QgZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNlcnJvciA9IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBzcGFjZSBmb3IgYSBidWxrIHJlcXVlc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiNzdGFjay5sZW5ndGggPCB0aGlzLiNjYWNoZVNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbmRpdmlkdWFsIHJlcXVlc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiNyZXF1ZXN0RnVuY3Rpb24odGhpcy4jcmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2FkZFJlc3BvbnNlKHJlc3BvbnNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2Vycm9yID0gZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzdGFjayBpcyBmdWxsXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRseVBvcHVsYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2FjaGUgd2lsbCBubyBsb25nZXIgY29udGludWUgdG8gcG9wdWxhdGUgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHRoaXMuI3BhdXNlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2FjaGUgd2lsbCByZXN1bWUgcG9wdWxhdGluZyBpdHNlbGYgaWYgc3RvcHBlZC5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIHRoaXMuI3BhdXNlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBpdCBuZWVkcyB0byBiZSByZXBvcHVsYXRlZFxyXG4gICAgICAgIHRoaXMuI3JlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgY2FjaGUgaXMgY3VycmVudGx5IG5vdCByZS1wb3B1bGF0aW5nIGl0c2VsZi5cclxuICAgICAqIFxyXG4gICAgICogVmFsdWVzIGN1cnJlbnRseSBjYWNoZWQgbWF5IHN0aWxsIGJlIHJldHJpZXZlZCB3aXRoIGdldCgpIGJ1dCBubyBuZXdcclxuICAgICAqIHZhbHVlcyBhcmUgYmVpbmcgZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIuIFRoaXMgc3RhdGUgY2FuIGJlIGNoYW5nZWQgd2l0aFxyXG4gICAgICogc3RvcCgpIGFuZCByZXN1bWUoKS5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGNhY2hlIGlzIGN1cnJlbnRseSBub3QgcmUtcG9wdWxhdGluZyBpdHNlbGYsXHJcbiAgICAgKiAgICAgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBpc1BhdXNlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jcGF1c2VkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbmV4dCByZXNwb25zZS5cclxuICAgICAqIE5vdGUgdGhhdCBpZiB0aGUgY2FjaGUgaXMgZW1wdHksIGlmIHdhcyBjb25zdHJ1Y3RlZCB3aXRoIHVuc3VpdGFibGUgcGFyYW1ldGVyXHJcbiAgICAgKiB2YWx1ZXMgb3IgaWYgdGhlIGRhaWx5IGFsbG93YW5jZSBvZiBiaXRzL3JlcXVlc3RzIGhhcyBiZWVuIHJlYWNoZWQsIHRoZSBhcHByb3ByaWF0ZVxyXG4gICAgICogZXJyb3Igd2lsbCBiZSB0aHJvd24uXHJcbiAgICAgKiBAcmV0dXJucyB7YW55W119IFRoZSBuZXh0IGFwcHJvcHJpYXRlIHJlc3BvbnNlIGZvciB0aGUgcmVxdWVzdCB0aGlzIFJhbmRvbU9yZ0NhY2hlXHJcbiAgICAgKiAgICAgcmVwcmVzZW50cyBvciwgaWYgc3RhY2sgaXMgZW1wdHkgdGhyb3dzIGFuIGVycm9yLlxyXG4gICAgICogQHRocm93cyBSYW5kb21PcmdDYWNoZUVtcHR5RXJyb3IgaWYgdGhlIGNhY2hlIGlzIGVtcHR5LlxyXG4gICAgICovXHJcbiAgICBnZXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI2Vycm9yICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgdGhpcy4jZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLiNzdGFjayAmJiB0aGlzLiNzdGFjay5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jcGF1c2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZG9tT3JnQ2FjaGVFbXB0eUVycm9yKCdUaGUgUmFuZG9tT3JnQ2FjaGUgc3RhY2sgJ1xyXG4gICAgICAgICAgICAgICAgICAgICsgJ2lzIGVtcHR5IGFuZCB0aGUgY2FjaGUgaXMgcGF1c2VkLiBQbGVhc2UgY2FsbCByZXN1bWUoKSB0byAnXHJcbiAgICAgICAgICAgICAgICAgICAgKyAncmVzdGFydCBwb3B1bGF0aW5nIHRoZSBjYWNoZS4nLCB0cnVlKTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5kb21PcmdDYWNoZUVtcHR5RXJyb3IoJ1RoZSBSYW5kb21PcmdDYWNoZSBzdGFjayAnXHJcbiAgICAgICAgICAgICAgICAgICAgKyAnaXMgZW1wdHksIHBsZWFzZSB3YWl0IGZvciBpdCB0byByZXBvcHVsYXRlIGl0c2VsZi4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy4jc3RhY2sucG9wKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiBpdCBuZWVkcyB0byBiZSByZXBvcHVsYXRlZFxyXG4gICAgICAgICAgICB0aGlzLiNyZWZyZXNoKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbmV4dCByZXNwb25zZSBvciB3YWl0IHVudGlsIHRoZSBuZXh0IHZhbHVlIGlzIGF2YWlsYWJsZS4gVGhpcyBtZXRob2RcclxuICAgICAqIHdpbGwgYmxvY2sgdW50aWwgYSB2YWx1ZSBpcyBhdmFpbGFibGUuIE5vdGU6IHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cgYW4gZXJyb3JcclxuICAgICAqIGlmIHRoZSBjYWNoZSBpcyBlbXB0eSBhbmQgaGFzIGJlZW4gcGF1c2VkLCBpLmUuIGlzIG5vdCBiZWluZyBwb3B1bGF0ZWQuIElmXHJcbiAgICAgKiB0aGUgY2FjaGUgd2FzIGNvbnN0cnVjdGVkIHdpdGggdW5zdWl0YWJsZSBwYXJhbWV0ZXIgdmFsdWVzIG9yIHRoZSBkYWlseSBhbGxvd2FuY2VcclxuICAgICAqIG9mIGJpdHMvcmVxdWVzdHMgaGFzIGJlZW4gcmVhY2hlZCwgdGhlIGFwcHJvcHJpYXRlIGVycm9yIHdpbGwgYWxzbyBiZSB0aHJvd24uXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnlbXT59IFRoZSBuZXh0IGFwcHJvcHJpYXRlIHJlc3BvbnNlIGZvciB0aGUgcmVxdWVzdCB0aGlzXHJcbiAgICAgKiBSYW5kb21PcmdDYWNoZSByZXByZXNlbnRzLlxyXG4gICAgICogQHRocm93cyBSYW5kb21PcmdDYWNoZUVtcHR5RXJyb3IgaWYgdGhlIGNhY2hlIGlzIGVtcHR5IGFuZCBpcyBwYXVzZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldE9yV2FpdCgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgdmFsdWVzID0gdGhpcy5nZXQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmFuZG9tT3JnQ2FjaGVFbXB0eUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jcGF1c2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNhY2hlIGlzIHBhdXNlZCBhbmQgd2lsbCBub3QgcmV0dXJuIGFueSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNhY2hlZFZhbHVlcyA9IGF3YWl0IHRoaXMuI3BvcHVsYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkVmFsdWVzID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY2FjaGUgaGFzIG5vdCB5ZXQgcmVwb3B1bGF0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDUwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPcldhaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG51bWJlciBvZiByZXN1bHQgc2V0cyByZW1haW5pbmcgaW4gdGhlIGNhY2hlLlxyXG4gICAgICogXHJcbiAgICAgKiBUaGlzIGVzc2VudGlhbGx5IHJldHVybnMgaG93IG9mdGVuIGdldCgpIG1heSBiZSBjYWxsZWQgd2l0aG91dFxyXG4gICAgICogYSBjYWNoZSByZWZpbGwuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBDdXJyZW50IG51bWJlciBvZiBjYWNoZWQgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgZ2V0Q2FjaGVkVmFsdWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNzdGFjay5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgYml0cyB1c2VkIGJ5IHRoaXMgY2FjaGUuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBOdW1iZXIgb2YgYml0cyB1c2VkLlxyXG4gICAgICovXHJcbiAgICBnZXRCaXRzVXNlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jYml0c1VzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIG51bWJlciBvZiByZXF1ZXN0cyB1c2VkIGJ5IHRoaXMgY2FjaGUuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBOdW1iZXIgb2YgcmVxdWVzdHMgdXNlZC5cclxuICAgICAqL1xyXG4gICAgZ2V0UmVxdWVzdHNVc2VkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNyZXF1ZXN0c1VzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGNhY2hlIG5lZWRzIHRvIGJlIHJlcG9wdWxhdGVkLlxyXG4gICAgICovXHJcbiAgICAjcmVmcmVzaCA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy4jYnVsa1JlcXVlc3ROdW1iZXIgPiAwICYmIHRoaXMuI3N0YWNrLmxlbmd0aCA8PSAodGhpcy4jY2FjaGVTaXplIC0gdGhpcy4jYnVsa1JlcXVlc3ROdW1iZXIpKSB7XHJcbiAgICAgICAgICAgIC8vIGJ1bGsgcmVxdWVzdHNcclxuICAgICAgICAgICAgdGhpcy4jcG9wdWxhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy4jYnVsa1JlcXVlc3ROdW1iZXIgPD0gMCAmJiB0aGlzLiNzdGFjay5sZW5ndGggPCB0aGlzLiNjYWNoZVNpemUpIHtcclxuICAgICAgICAgICAgLy8gaW5kaXZpZHVhbCByZXF1ZXN0c1xyXG4gICAgICAgICAgICB0aGlzLiNwb3B1bGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgYSByZXNwb25zZSB0byB0aGUgc3RhY2suXHJcbiAgICAgKiBAcGFyYW0ge2FueVtdfSByZXNwb25zZSBUaGUgcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBidWxrIFRydWUgaWYgdGhlIGNhY2hlIGlzc3VlcyBidWxrIHJlcXVlc3RzLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgICNhZGRSZXNwb25zZSA9IChyZXNwb25zZSwgYnVsaykgPT4ge1xyXG4gICAgICAgIHRoaXMuI3JlcXVlc3RzVXNlZCsrO1xyXG4gICAgICAgIHRoaXMuI2JpdHNVc2VkICs9IHJlc3BvbnNlLnJlc3VsdC5iaXRzVXNlZDtcclxuXHJcbiAgICAgICAgaWYgKGJ1bGspIHtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5yZXN1bHQucmFuZG9tLmRhdGE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gdGhpcy4jcmVxdWVzdE51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhY2sucHVzaChkYXRhLnNsaWNlKGksIGkgKyB0aGlzLiNyZXF1ZXN0TnVtYmVyKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiNzdGFjay5wdXNoKHJlc3BvbnNlLnJlc3VsdC5yYW5kb20uZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3Qge1xyXG4gICAgUmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3IsXHJcbiAgICBSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3IsXHJcbiAgICBSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yLFxyXG4gICAgUmFuZG9tT3JnSlNPTlJQQ0Vycm9yLFxyXG4gICAgUmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yLFxyXG4gICAgUmFuZG9tT3JnUkFORE9NT1JHRXJyb3IsXHJcbiAgICBSYW5kb21PcmdTZW5kVGltZW91dEVycm9yXHJcbn0gPSByZXF1aXJlKCcuL1JhbmRvbU9yZ0Vycm9ycy5qcycpO1xyXG5jb25zdCBSYW5kb21PcmdDYWNoZSA9IHJlcXVpcmUoJy4vUmFuZG9tT3JnQ2FjaGUuanMnKTtcclxuLyogbm9kZS1pbXBvcnQgKi9cclxuY29uc3QgWE1MSHR0cFJlcXVlc3QgPSByZXF1aXJlKCd4bWxodHRwcmVxdWVzdCcpLlhNTEh0dHBSZXF1ZXN0O1xyXG4vKiBlbmQtbm9kZS1pbXBvcnQgKi9cclxuXHJcbi8qKlxyXG4gKiBSYW5kb21PcmdDbGllbnQgbWFpbiBjbGFzcyB0aHJvdWdoIHdoaWNoIEFQSSBmdW5jdGlvbnMgYXJlIGFjY2Vzc2VkLlxyXG4gKiBcclxuICogVGhpcyBjbGFzcyBwcm92aWRlcyBhY2Nlc3MgdG8gYm90aCB0aGUgc2lnbmVkIGFuZCB1bnNpZ25lZCBtZXRob2RzIG9mIHRoZVxyXG4gKiBSQU5ET00uT1JHIEFQSS5cclxuICogXHJcbiAqIFRoZSBjbGFzcyBhbHNvIHByb3ZpZGVzIGFjY2VzcyB0byB0aGUgY3JlYXRpb24gb2YgYSBjb252ZW5pZW5jZSBjbGFzcywgUmFuZG9tT3JnQ2FjaGUsXHJcbiAqIGZvciBwcmVjYWNoaW5nIEFQSSByZXNwb25zZXMgd2hlbiB0aGUgcmVxdWVzdCBpcyBrbm93biBpbiBhZHZhbmNlLlxyXG4gKiBcclxuICogVGhpcyBjbGFzcyB3aWxsIG9ubHkgYWxsb3cgdGhlIGNyZWF0aW9uIG9mIG9uZSBpbnN0YW5jZSBwZXIgQVBJIGtleS4gSWYgYW5cclxuICogaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBhbHJlYWR5IGV4aXN0cyBmb3IgYSBnaXZlbiBrZXksIHRoYXQgaW5zdGFuY2Ugd2lsbCBiZVxyXG4gKiByZXR1cm5lZCBpbnN0ZWFkIG9mIGEgbmV3IGluc3RhbmNlLlxyXG4gKiBcclxuICogVGhpcyBjbGFzcyBvYmV5cyBtb3N0IG9mIHRoZSBndWlkZWxpbmVzIHNldCBmb3J0aCBpbiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzRcclxuICogQWxsIHJlcXVlc3RzIHJlc3BlY3QgdGhlIHNlcnZlcidzIGFkdmlzb3J5RGVsYXkgcmV0dXJuZWQgaW4gYW55IHJlc3BvbnNlcywgb3IgdXNlXHJcbiAqIERFRkFVTFRfREVMQVkgaWYgbm8gYWR2aXNvcnlEZWxheSBpcyByZXR1cm5lZC4gSWYgdGhlIHN1cHBsaWVkIEFQSSBrZXkgaXMgcGF1c2VkLCBpLmUuLFxyXG4gKiBoYXMgZXhjZWVkZWQgaXRzIGRhaWx5IGJpdC9yZXF1ZXN0IGFsbG93YW5jZSwgdGhpcyBpbXBsZW1lbnRhdGlvbiB3aWxsIGJhY2sgb2ZmIHVudGlsXHJcbiAqIG1pZG5pZ2h0IFVUQy5cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUmFuZG9tT3JnQ2xpZW50IHtcclxuICAgIC8vIEJhc2ljIEFQSVxyXG4gICAgc3RhdGljICNJTlRFR0VSX01FVEhPRCA9ICdnZW5lcmF0ZUludGVnZXJzJztcclxuICAgIHN0YXRpYyAjSU5URUdFUl9TRVFVRU5DRV9NRVRIT0QgPSAnZ2VuZXJhdGVJbnRlZ2VyU2VxdWVuY2VzJztcclxuICAgIHN0YXRpYyAjREVDSU1BTF9GUkFDVElPTl9NRVRIT0QgPSAnZ2VuZXJhdGVEZWNpbWFsRnJhY3Rpb25zJztcclxuICAgIHN0YXRpYyAjR0FVU1NJQU5fTUVUSE9EID0gJ2dlbmVyYXRlR2F1c3NpYW5zJztcclxuICAgIHN0YXRpYyAjU1RSSU5HX01FVEhPRCA9ICdnZW5lcmF0ZVN0cmluZ3MnO1xyXG4gICAgc3RhdGljICNVVUlEX01FVEhPRCA9ICdnZW5lcmF0ZVVVSURzJztcclxuICAgIHN0YXRpYyAjQkxPQl9NRVRIT0QgPSAnZ2VuZXJhdGVCbG9icyc7XHJcbiAgICBzdGF0aWMgI0dFVF9VU0FHRV9NRVRIT0QgPSAnZ2V0VXNhZ2UnO1xyXG5cclxuICAgIC8vIFNpZ25lZCBBUElcclxuICAgIHN0YXRpYyAjU0lHTkVEX0lOVEVHRVJfTUVUSE9EID0gJ2dlbmVyYXRlU2lnbmVkSW50ZWdlcnMnO1xyXG4gICAgc3RhdGljICNTSUdORURfSU5URUdFUl9TRVFVRU5DRV9NRVRIT0QgPSAnZ2VuZXJhdGVTaWduZWRJbnRlZ2VyU2VxdWVuY2VzJztcclxuICAgIHN0YXRpYyAjU0lHTkVEX0RFQ0lNQUxfRlJBQ1RJT05fTUVUSE9EID0gJ2dlbmVyYXRlU2lnbmVkRGVjaW1hbEZyYWN0aW9ucyc7XHJcbiAgICBzdGF0aWMgI1NJR05FRF9HQVVTU0lBTl9NRVRIT0QgPSAnZ2VuZXJhdGVTaWduZWRHYXVzc2lhbnMnO1xyXG4gICAgc3RhdGljICNTSUdORURfU1RSSU5HX01FVEhPRCA9ICdnZW5lcmF0ZVNpZ25lZFN0cmluZ3MnO1xyXG4gICAgc3RhdGljICNTSUdORURfVVVJRF9NRVRIT0QgPSAnZ2VuZXJhdGVTaWduZWRVVUlEcyc7XHJcbiAgICBzdGF0aWMgI1NJR05FRF9CTE9CX01FVEhPRCA9ICdnZW5lcmF0ZVNpZ25lZEJsb2JzJztcclxuICAgIHN0YXRpYyAjR0VUX1JFU1VMVF9NRVRIT0QgPSAnZ2V0UmVzdWx0JztcclxuICAgIHN0YXRpYyAjQ1JFQVRFX1RJQ0tFVF9NRVRIT0QgPSAnY3JlYXRlVGlja2V0cyc7XHJcbiAgICBzdGF0aWMgI0xJU1RfVElDS0VUX01FVEhPRCA9ICdsaXN0VGlja2V0cyc7XHJcbiAgICBzdGF0aWMgI0dFVF9USUNLRVRfTUVUSE9EID0gJ2dldFRpY2tldCc7XHJcbiAgICBzdGF0aWMgI1ZFUklGWV9TSUdOQVRVUkVfTUVUSE9EID0gJ3ZlcmlmeVNpZ25hdHVyZSc7XHJcblxyXG4gICAgLy8gQmxvYiBmb3JtYXQgbGl0ZXJhbHNcclxuICAgIC8qKiBCbG9iIGZvcm1hdCBsaXRlcmFsLCBiYXNlNjQgZW5jb2RpbmcgKGRlZmF1bHQpLiAqL1xyXG4gICAgc3RhdGljIEJMT0JfRk9STUFUX0JBU0U2NCA9ICdiYXNlNjQnO1xyXG4gICAgLyoqIEJsb2IgZm9ybWF0IGxpdGVyYWwsIGhleCBlbmNvZGluZy4gKi9cclxuICAgIHN0YXRpYyBCTE9CX0ZPUk1BVF9IRVggPSAnaGV4JztcclxuXHJcbiAgICAvLyBEZWZhdWx0IHZhbHVlc1xyXG4gICAgLyoqIERlZmF1bHQgdmFsdWUgZm9yIHRoZSByZXBsYWNlbWVudCBwYXJhbWV0ZXIgKHRydWUpLiAqL1xyXG4gICAgc3RhdGljIERFRkFVTFRfUkVQTEFDRU1FTlQgPSB0cnVlO1xyXG4gICAgLyoqIERlZmF1bHQgdmFsdWUgZm9yIHRoZSBiYXNlIHBhcmFtZXRlciAoMTApLiAqL1xyXG4gICAgc3RhdGljIERFRkFVTFRfQkFTRSA9IDEwO1xyXG4gICAgLyoqIERlZmF1bHQgdmFsdWUgZm9yIHRoZSB1c2VyRGF0YSBwYXJhbWV0ZXIgKG51bGwpLiAqL1xyXG4gICAgc3RhdGljIERFRkFVTFRfVVNFUl9EQVRBID0gbnVsbDtcclxuICAgIC8qKiBEZWZhdWx0IHZhbHVlIGZvciB0aGUgdGlja2V0SWQgcGFyYW1ldGVyIChudWxsKS4gKi9cclxuICAgIHN0YXRpYyBERUZBVUxUX1RJQ0tFVF9JRCA9IG51bGw7XHJcbiAgICAvKiogRGVmYXVsdCB2YWx1ZSBmb3IgdGhlIHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24gcGFyYW1ldGVyIChudWxsKS4gKi9cclxuICAgIHN0YXRpYyBERUZBVUxUX1BSRUdFTkVSQVRFRF9SQU5ET01JWkFUSU9OID0gbnVsbDtcclxuICAgIC8qKiBEZWZhdWx0IHZhbHVlIGZvciB0aGUgbGljZW5zZURhdGEgcGFyYW1ldGVyIChudWxsKS4gKi9cclxuICAgIHN0YXRpYyBERUZBVUxUX0xJQ0VOU0VfREFUQSA9IG51bGw7XHJcblxyXG4gICAgLyoqIFNpemUgb2YgYSBzaW5nbGUgVVVJRCBpbiBiaXRzLiAqL1xyXG4gICAgc3RhdGljIFVVSURfU0laRSA9IDEyMjtcclxuICAgIC8qKiBEZWZhdWx0IHZhbHVlIGZvciB0aGUgYmxvY2tpbmdUaW1lb3V0IHBhcmFtZXRlciAoMSBkYXkpLiAqL1xyXG4gICAgc3RhdGljIERFRkFVTFRfQkxPQ0tJTkdfVElNRU9VVCA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAvKiogRGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGh0dHBUaW1lb3V0IHBhcmFtZXRlciAoMiBtaW51dGVzKS4gKi9cclxuICAgIHN0YXRpYyBERUZBVUxUX0hUVFBfVElNRU9VVCA9IDEyMCAqIDEwMDA7XHJcbiAgICAvKiogTWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBhbGxvd2VkIGluIGEgc2lnbmF0dXJlIHZlcmZpY2lhdGlvbiBVUkwuICovXHJcbiAgICBzdGF0aWMgTUFYX1VSTF9MRU5HVEggPSAyMDQ2O1xyXG5cclxuICAgIC8vIERlZmF1bHQgYmFjay1vZmYgdG8gdXNlIGlmIG5vIGFkdmlzb3J5RGVsYXkgYmFjay1vZmYgc3VwcGxpZWQgYnkgc2VydmVyICgxIHNlY29uZClcclxuICAgIHN0YXRpYyAjREVGQVVMVF9ERUxBWSA9IDEqMTAwMDtcclxuXHJcbiAgICAvLyBPbiByZXF1ZXN0IGZldGNoIGZyZXNoIGFsbG93YW5jZSBzdGF0ZSBpZiBjdXJyZW50IHN0YXRlIGRhdGEgaXMgb2xkZXIgdGhhblxyXG4gICAgLy8gdGhpcyB2YWx1ZSAoMSBob3VyKS5cclxuICAgIHN0YXRpYyAjQUxMT1dBTkNFX1NUQVRFX1JFRlJFU0hfU0VDT05EUyA9IDM2MDAgKiAxMDAwO1xyXG5cclxuICAgIC8vIE1haW50YWlucyB1c2FnZSBzdGF0aXN0aWNzIGZyb20gc2VydmVyLlxyXG4gICAgI2JpdHNMZWZ0ID0gLTE7XHJcbiAgICAjcmVxdWVzdHNMZWZ0ID0gLTE7XHJcblxyXG4gICAgLy8gQmFjay1vZmYgaW5mbyBmb3Igd2hlbiB0aGUgQVBJIGtleSBpcyBkZXRlY3RlZCBhcyBub3QgcnVubmluZywgcHJvYmFibHlcclxuICAgIC8vIGJlY2F1c2UgdGhlIGtleSBoYXMgZXhjZWVkZWQgaXRzIGRhaWx5IHVzYWdlIGxpbWl0LiBCYWNrLW9mZiBydW5zIHVudGlsXHJcbiAgICAvLyBtaWRuaWdodCBVVEMuXHJcbiAgICAjYmFja29mZiA9IC0xO1xyXG4gICAgI2JhY2tvZmZFcnJvciA9ICcnO1xyXG5cclxuICAgICNhcGlLZXkgPSAnJztcclxuICAgICNibG9ja2luZ1RpbWVvdXQgPSBSYW5kb21PcmdDbGllbnQuREVGQVVMVF9CTE9DS0lOR19USU1FT1VUO1xyXG4gICAgI2h0dHBUaW1lb3V0ID0gUmFuZG9tT3JnQ2xpZW50LkRFRkFVTFRfSFRUUF9USU1FT1VUO1xyXG5cclxuICAgIC8vIE1haW50YWluIGluZm8gdG8gb2JleSBzZXJ2ZXIgYWR2aXNvcnkgZGVsYXlcclxuICAgICNhZHZpc29yeURlbGF5ID0gMDtcclxuICAgICNsYXN0UmVzcG9uc2VSZWNlaXZlZFRpbWUgPSAwO1xyXG5cclxuICAgIC8vIE1haW50YWlucyBhIGRpY3Rpb25hcnkgb2YgQVBJIGtleXMgYW5kIHRoZWlyIGluc3RhbmNlcy5cclxuICAgIHN0YXRpYyAja2V5SW5kZXhlZEluc3RhbmNlcyA9IHt9O1xyXG5cclxuICAgIHN0YXRpYyAjRVJST1JfQ09ERVMgPSBbIDEwMCwgMTAxLCAyMDAsIDIwMSwgMjAyLCAyMDMsIDIwNCwgMzAwLFxyXG4gICAgICAgIDMwMSwgMzAyLCAzMDMsIDMwNCwgMzA1LCAzMDYsIDMwNywgNDAwLCA0MDEsIDQwMiwgNDAzLCA0MDQsXHJcbiAgICAgICAgNDA1LCA0MjAsIDQyMSwgNDIyLCA0MjMsIDQyNCwgNDI1LCA1MDAsIDMyMDAwIF07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3Rvci4gRW5zdXJlcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiBSYW5kb21PcmdDbGllbnQgZXhpc3RzIHBlciBBUElcclxuICAgICAqIGtleS4gQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBpZiB0aGUgc3VwcGxpZWQga2V5IGlzbid0IGFscmVhZHkga25vd24sXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyB0aGUgcHJldmlvdXNseSBpbnN0YW50aWF0ZWQgb25lLlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXBpS2V5IEFQSSBrZXkgb2YgaW5zdGFuY2UgdG8gY3JlYXRlL2ZpbmQsIG9idGFpbmVkIGZyb21cclxuICAgICAqICAgICBSQU5ET00uT1JHLCBzZWUgaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9hcGkta2V5c1xyXG4gICAgICogQHBhcmFtIHt7YmxvY2tpbmdUaW1lb3V0PzogbnVtYmVyLCBodHRwVGltZW91dD86IG51bWJlcn19IG9wdGlvbnMgQW4gb2JqZWN0XHJcbiAgICAgKiAgICAgd2hpY2ggbWF5IGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYmxvY2tpbmdUaW1lb3V0ID0gMjQgKiA2MCAqIDYwICogMTAwMF0gTWF4aW11bVxyXG4gICAgICogICAgIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGJlaW5nIGFsbG93ZWQgdG8gc2VuZCBhIHJlcXVlc3QuXHJcbiAgICAgKiAgICAgTm90ZSB0aGlzIGlzIGEgaGludCBub3QgYSBndWFyYW50ZWUuIFRoZSBhZHZpc29yeSBkZWxheSBmcm9tIHNlcnZlclxyXG4gICAgICogICAgIG11c3QgYWx3YXlzIGJlIG9iZXllZC4gU3VwcGx5IGEgdmFsdWUgb2YgLTEgdG8gYWxsb3cgYmxvY2tpbmcgZm9yZXZlclxyXG4gICAgICogICAgIChkZWZhdWx0IDI0ICogNjAgKiA2MCAqIDEwMDAsIGkuZS4sIDEgZGF5KS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5odHRwVGltZW91dCA9IDEyMCAqIDEwMDBdIE1heGltdW0gdGltZSBpblxyXG4gICAgICogICAgIG1pbGxpc2Vjb25kcyB0byB3YWl0IGZvciB0aGUgc2VydmVyIHJlc3BvbnNlIHRvIGEgcmVxdWVzdCAoZGVmYXVsdFxyXG4gICAgICogICAgIDEyMCoxMDAwKS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBpZiAoUmFuZG9tT3JnQ2xpZW50LiNrZXlJbmRleGVkSW5zdGFuY2VzICYmIFJhbmRvbU9yZ0NsaWVudC4ja2V5SW5kZXhlZEluc3RhbmNlc1thcGlLZXldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSYW5kb21PcmdDbGllbnQuI2tleUluZGV4ZWRJbnN0YW5jZXNbYXBpS2V5XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiNhcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgICAgIHRoaXMuI2Jsb2NraW5nVGltZW91dCA9IG9wdGlvbnMuYmxvY2tpbmdUaW1lb3V0IHx8IDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgICAgICAgIHRoaXMuI2h0dHBUaW1lb3V0ID0gb3B0aW9ucy5odHRwVGltZW91dCB8fCAxMjAgKiAxMDAwO1xyXG5cclxuICAgICAgICAgICAgUmFuZG9tT3JnQ2xpZW50LiNrZXlJbmRleGVkSW5zdGFuY2VzW2FwaUtleV0gPSB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCYXNpYyBBUElcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcXVlc3RzIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRydWUgcmFuZG9tIGludGVnZXJzIHdpdGhpbiBhIHVzZXItZGVmaW5lZFxyXG4gICAgICogcmFuZ2UgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICogXHJcbiAgICAgKiBTZWU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9iYXNpYyNnZW5lcmF0ZUludGVnZXJzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHJhbmRvbSBpbnRlZ2VycyB5b3UgbmVlZC4gTXVzdCBiZSB3aXRoaW5cclxuICAgICAqICAgICB0aGUgWzEsMWU0XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIGxvd2VyIGJvdW5kYXJ5IGZvciB0aGUgcmFuZ2UgZnJvbSB3aGljaCB0aGUgcmFuZG9tXHJcbiAgICAgKiAgICAgbnVtYmVycyB3aWxsIGJlIHBpY2tlZC4gTXVzdCBiZSB3aXRoaW4gdGhlIFstMWU5LDFlOV0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSB1cHBlciBib3VuZGFyeSBmb3IgdGhlIHJhbmdlIGZyb20gd2hpY2ggdGhlIHJhbmRvbVxyXG4gICAgICogICAgIG51bWJlcnMgd2lsbCBiZSBwaWNrZWQuIE11c3QgYmUgd2l0aGluIHRoZSBbLTFlOSwxZTldIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFuLCBiYXNlPzogbnVtYmVyLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPzpcclxuICAgICAqICAgICBPYmplY3R9fSBvcHRpb25zIEFuIG9iamVjdCB3aGljaCBtYXkgY29udGFpbnMgYW55IG9mIHRoZSBmb2xsb3dpbmdcclxuICAgICAqICAgICBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXBsYWNlbWVudD10cnVlXSBTcGVjaWZpZXMgd2hldGhlciB0aGUgcmFuZG9tXHJcbiAgICAgKiAgICAgbnVtYmVycyBzaG91bGQgYmUgcGlja2VkIHdpdGggcmVwbGFjZW1lbnQuIElmIHRydWUsIHRoZSByZXN1bHRpbmcgbnVtYmVyc1xyXG4gICAgICogICAgIG1heSBjb250YWluIGR1cGxpY2F0ZSB2YWx1ZXMsIG90aGVyd2lzZSB0aGUgbnVtYmVycyB3aWxsIGFsbCBiZSB1bmlxdWVcclxuICAgICAqICAgICAoZGVmYXVsdCB0cnVlKS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYXNlPTEwXSBUaGUgYmFzZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBkaXNwbGF5XHJcbiAgICAgKiAgICAgdGhlIG51bWJlcnMuIFZhbHVlcyBhbGxvd2VkIGFyZSAyLCA4LCAxMCBhbmQgMTYgKGRlZmF1bHQgMTApLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHJldHVybnMgeyhQcm9taXNlPG51bWJlcltdPnxQcm9taXNlPHN0cmluZ1tdPil9IEEgUHJvbWlzZSB3aGljaCwgaWZcclxuICAgICAqICAgICByZXNvbHZlZCBzdWNjZXNzZnVsbHksIHJlcHJlc2VudHMgYW4gYXJyYXkgb2YgdHJ1ZSByYW5kb20gaW50ZWdlcnMuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKiAqL1xyXG4gICAgYXN5bmMgZ2VuZXJhdGVJbnRlZ2VycyhuLCBtaW4sIG1heCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNpbnRlZ2VyUmVxdWVzdChuLCBtaW4sIG1heCwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RCYXNpYyh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0cyBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0cnVlIHJhbmRvbSBpbnRlZ2VyIHNlcXVlbmNlcyB3aXRoaW4gYVxyXG4gICAgICogdXNlci1kZWZpbmVkIHJhbmdlIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogU2VlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvYmFzaWMjZ2VuZXJhdGVJbnRlZ2VyU2VxdWVuY2VzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBIb3cgbWFueSBhcnJheXMgb2YgcmFuZG9tIGludGVnZXJzIHlvdSBuZWVkLiBNdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxZTNdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyfG51bWJlcltdKX0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgZWFjaCBhcnJheSBvZiByYW5kb21cclxuICAgICAqICAgICBpbnRlZ2VycyByZXF1ZXN0ZWQuIEZvciB1bmlmb3JtIHNlcXVlbmNlcywgbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlclxyXG4gICAgICogICAgIGluIHRoZSBbMSwgMWU0XSByYW5nZS4gRm9yIG11bHRpZm9ybSBzZXF1ZW5jZXMsIGxlbmd0aCBjYW4gYmUgYW4gYXJyYXlcclxuICAgICAqICAgICB3aXRoIG4gaW50ZWdlcnMsIGVhY2ggc3BlY2lmeWluZyB0aGUgbGVuZ3RoIG9mIHRoZSBzZXF1ZW5jZSBpZGVudGlmaWVkXHJcbiAgICAgKiAgICAgYnkgaXRzIGluZGV4LiBJbiB0aGlzIGNhc2UsIGVhY2ggdmFsdWUgaW4gbGVuZ3RoIG11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLCAxZTRdIHJhbmdlIGFuZCB0aGUgdG90YWwgc3VtIG9mIGFsbCB0aGUgbGVuZ3RocyBtdXN0IGJlIGluIHRoZVxyXG4gICAgICogICAgIFsxLCAxZTRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyfG51bWJlcltdKX0gbWluIFRoZSBsb3dlciBib3VuZGFyeSBmb3IgdGhlIHJhbmdlIGZyb20gd2hpY2hcclxuICAgICAqICAgICB0aGUgcmFuZG9tIG51bWJlcnMgd2lsbCBiZSBwaWNrZWQuIEZvciB1bmlmb3JtIHNlcXVlbmNlcywgbWluIG11c3QgYmVcclxuICAgICAqICAgICBhbiBpbnRlZ2VyIGluIHRoZSBbLTFlOSwgMWU5XSByYW5nZS4gRm9yIG11bHRpZm9ybSBzZXF1ZW5jZXMsIG1pbiBjYW5cclxuICAgICAqICAgICBiZSBhbiBhcnJheSB3aXRoIG4gaW50ZWdlcnMsIGVhY2ggc3BlY2lmeWluZyB0aGUgbG93ZXIgYm91bmRhcnkgb2YgdGhlXHJcbiAgICAgKiAgICAgc2VxdWVuY2UgaWRlbnRpZmllZCBieSBpdHMgaW5kZXguIEluIHRoaXMgY2FzZSwgZWFjaCB2YWx1ZSBpbiBtaW4gbXVzdFxyXG4gICAgICogICAgIGJlIHdpdGhpbiB0aGUgWy0xZTksIDFlOV0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBtYXggVGhlIHVwcGVyIGJvdW5kYXJ5IGZvciB0aGUgcmFuZ2UgZnJvbSB3aGljaFxyXG4gICAgICogICAgIHRoZSByYW5kb20gbnVtYmVycyB3aWxsIGJlIHBpY2tlZC4gRm9yIHVuaWZvcm0gc2VxdWVuY2VzLCBtYXggbXVzdCBiZVxyXG4gICAgICogICAgIGFuIGludGVnZXIgaW4gdGhlIFstMWU5LCAxZTldIHJhbmdlLiBGb3IgbXVsdGlmb3JtIHNlcXVlbmNlcywgbWF4IGNhblxyXG4gICAgICogICAgIGJlIGFuIGFycmF5IHdpdGggbiBpbnRlZ2VycywgZWFjaCBzcGVjaWZ5aW5nIHRoZSB1cHBlciBib3VuZGFyeSBvZiB0aGVcclxuICAgICAqICAgICBzZXF1ZW5jZSBpZGVudGlmaWVkIGJ5IGl0cyBpbmRleC4gSW4gdGhpcyBjYXNlLCBlYWNoIHZhbHVlIGluIG1heCBtdXN0XHJcbiAgICAgKiAgICAgYmUgd2l0aGluIHRoZSBbLTFlOSwgMWU5XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e3JlcGxhY2VtZW50PzogYm9vbGVhbnxib29sZWFuW10sIGJhc2U/OiBudW1iZXJ8bnVtYmVyW10sXHJcbiAgICAgKiAgICAgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdH19IG9wdGlvbnMgQW4gb2JqZWN0IHdoaWNoIG1heSBjb250YWluc1xyXG4gICAgICogICAgIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0geyhib29sZWFufGJvb2xlYW5bXSl9IFtvcHRpb25zLnJlcGxhY2VtZW50PXRydWVdIFNwZWNpZmllcyB3aGV0aGVyXHJcbiAgICAgKiAgICAgdGhlIHJhbmRvbSBudW1iZXJzIHNob3VsZCBiZSBwaWNrZWQgd2l0aCByZXBsYWNlbWVudC4gSWYgdHJ1ZSwgdGhlXHJcbiAgICAgKiAgICAgcmVzdWx0aW5nIG51bWJlcnMgbWF5IGNvbnRhaW4gZHVwbGljYXRlIHZhbHVlcywgb3RoZXJ3aXNlIHRoZSBudW1iZXJzXHJcbiAgICAgKiAgICAgd2lsbCBhbGwgYmUgdW5pcXVlLiBGb3IgbXVsdGlmb3JtIHNlcXVlbmNlcywgcmVwbGFjZW1lbnQgY2FuIGJlIGFuIGFycmF5XHJcbiAgICAgKiAgICAgd2l0aCBuIGJvb2xlYW4gdmFsdWVzLCBlYWNoIHNwZWNpZnlpbmcgd2hldGhlciB0aGUgc2VxdWVuY2UgaWRlbnRpZmllZFxyXG4gICAgICogICAgIGJ5IGl0cyBpbmRleCB3aWxsIGJlIGNyZWF0ZWQgd2l0aCAodHJ1ZSkgb3Igd2l0aG91dCAoZmFsc2UpIHJlcGxhY2VtZW50XHJcbiAgICAgKiAgICAgKGRlZmF1bHQgdHJ1ZSkuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBbb3B0aW9ucy5iYXNlPTEwXSBUaGUgYmFzZSB0aGF0IHdpbGwgYmUgdXNlZFxyXG4gICAgICogICAgIHRvIGRpc3BsYXkgdGhlIG51bWJlcnMuIFZhbHVlcyBhbGxvd2VkIGFyZSAyLCA4LCAxMCBhbmQgMTYuIEZvciBtdWx0aWZvcm1cclxuICAgICAqICAgICBzZXF1ZW5jZXMsIGJhc2UgY2FuIGJlIGFuIGFycmF5IHdpdGggbiBpbnRlZ2VyIHZhbHVlcyB0YWtlbiBmcm9tIHRoZVxyXG4gICAgICogICAgIHNhbWUgc2V0LCBlYWNoIHNwZWNpZnlpbmcgdGhlIGJhc2UgdGhhdCB3aWxsIGJlIHVzZWQgdG8gZGlzcGxheSB0aGVcclxuICAgICAqICAgICBzZXF1ZW5jZSBpZGVudGlmaWVkIGJ5IGl0cyBpbmRleCAoZGVmYXVsdCAxMCkuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj1udWxsXSBBIGRpY3Rpb25hcnkgb2JqZWN0XHJcbiAgICAgKiAgICAgd2hpY2ggYWxsb3dzIHRoZSBjbGllbnQgdG8gc3BlY2lmeSB0aGF0IHRoZSByYW5kb20gdmFsdWVzIHNob3VsZCBiZVxyXG4gICAgICogICAgIGdlbmVyYXRlZCBmcm9tIGEgcHJlZ2VuZXJhdGVkLCBoaXN0b3JpY2FsIHJhbmRvbWl6YXRpb24gaW5zdGVhZCBvZiBhXHJcbiAgICAgKiAgICAgb25lLXRpbWUgb24tdGhlLWZseSByYW5kb21pemF0aW9uLiBUaGVyZSBhcmUgdGhyZWUgcG9zc2libGUgY2FzZXM6XHJcbiAgICAgKiAqICoqbnVsbCoqOiBUaGUgc3RhbmRhcmQgd2F5IG9mIGNhbGxpbmcgZm9yIHJhbmRvbSB2YWx1ZXMsIGkuZS50cnVlXHJcbiAgICAgKiAgICAgICByYW5kb21uZXNzIGlzIGdlbmVyYXRlZCBhbmQgZGlzY2FyZGVkIGFmdGVyd2FyZHMuXHJcbiAgICAgKiAqICoqZGF0ZSoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZ2VuZXJhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBkYXRlIChwYXN0IG9yIHByZXNlbnQsIGZvcm1hdDogeyAnZGF0ZScsICdZWVlZLU1NLUREJyB9KS5cclxuICAgICAqICogKippZCoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZGVyaXZlZCBmcm9tIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBpZGVudGlmaWVyIGluIGEgZGV0ZXJtaW5pc3RpYyBtYW5uZXIuIEZvcm1hdDogeyAnaWQnLFxyXG4gICAgICogICAgICAgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgfSB3aGVyZSAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyBpcyBhIHN0cmluZ1xyXG4gICAgICogICAgICAgd2l0aCBsZW5ndGggaW4gdGhlIFsxLCA2NF0gcmFuZ2UuXHJcbiAgICAgKiBAcmV0dXJucyB7KFByb21pc2U8bnVtYmVyW11bXT58UHJvbWlzZTxzdHJpbmdbXVtdPil9IEEgUHJvbWlzZSB3aGljaCwgaWZcclxuICAgICAqICAgICByZXNvbHZlZCBzdWNjZXNzZnVsbHksIHJlcHJlc2VudHMgYW4gYXJyYXkgb2YgdHJ1ZSByYW5kb20gaW50ZWdlclxyXG4gICAgICogICAgIHNlcXVlbmNlcy5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1NlbmRUaW1lb3V0RXJyb3J9IFRocm93biB3aGVuIGJsb2NraW5nIHRpbWVvdXQgaXMgZXhjZWVkZWRcclxuICAgICAqICAgICBiZWZvcmUgdGhlIHJlcXVlc3QgY2FuIGJlIHNlbnQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdLZXlOb3RSdW5uaW5nRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5IGhhcyBiZWVuXHJcbiAgICAgKiAgICAgc3RvcHBlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudFJlcXVlc3RzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgcmVxdWVzdHMgYWxsb3dhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50Qml0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIGJpdHMgYWxsb3dhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3J9IFRocm93biB3aGVuIGEgSFRUUCAyMDAgT0sgcmVzcG9uc2VcclxuICAgICAqICAgICBpcyBub3QgcmVjZWl2ZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdSQU5ET01PUkdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgUkFORE9NLk9SR1xyXG4gICAgICogICAgIEVycm9yLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSlNPTlJQQ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBKU09OLVJQQyBFcnJvci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2VuZXJhdGVJbnRlZ2VyU2VxdWVuY2VzKG4sIGxlbmd0aCwgbWluLCBtYXgsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jaW50ZWdlclNlcXVlbmNlUmVxdWVzdChuLCBsZW5ndGgsIG1pbiwgbWF4LCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdEJhc2ljKHRoaXMuI3NlbmRSZXF1ZXN0KHJlcXVlc3QpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcXVlc3RzIGFuZCByZXR1cm5zIGEgbGlzdCAoc2l6ZSBuKSBvZiB0cnVlIHJhbmRvbSBkZWNpbWFsIGZyYWN0aW9ucyxcclxuICAgICAqIGZyb20gYSB1bmlmb3JtIGRpc3RyaWJ1dGlvbiBhY3Jvc3MgdGhlIFswLDFdIGludGVydmFsIHdpdGggYSB1c2VyLWRlZmluZWRcclxuICAgICAqIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKiBcclxuICAgICAqIFNlZTogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L2Jhc2ljI2dlbmVyYXRlRGVjaW1hbEZyYWN0aW9uc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIGRlY2ltYWwgZnJhY3Rpb25zIHlvdSBuZWVkLiBNdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxZTRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxQbGFjZXMgVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byB1c2UuIE11c3QgYmVcclxuICAgICAqICAgICB3aXRoaW4gdGhlIFsxLDIwXSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e3JlcGxhY2VtZW50PzogYm9vbGVhbiwgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdH19IG9wdGlvbnNcclxuICAgICAqICAgICBBbiBvYmplY3Qgd2hpY2ggbWF5IGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlcGxhY2VtZW50PXRydWVdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSByYW5kb21cclxuICAgICAqICAgICBudW1iZXJzIHNob3VsZCBiZSBwaWNrZWQgd2l0aCByZXBsYWNlbWVudC4gSWYgdHJ1ZSwgdGhlIHJlc3VsdGluZyBudW1iZXJzXHJcbiAgICAgKiAgICAgbWF5IGNvbnRhaW4gZHVwbGljYXRlIHZhbHVlcywgb3RoZXJ3aXNlIHRoZSBudW1iZXJzIHdpbGwgYWxsIGJlIHVuaXF1ZVxyXG4gICAgICogICAgIChkZWZhdWx0IHRydWUpLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyW10+fSBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSxcclxuICAgICAqICAgICByZXByZXNlbnRzIGFuIGFycmF5IG9mIHRydWUgcmFuZG9tIGRlY2ltYWwgZnJhY3Rpb25zLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZURlY2ltYWxGcmFjdGlvbnMobiwgZGVjaW1hbFBsYWNlcywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNkZWNpbWFsRnJhY3Rpb25SZXF1ZXN0KG4sIGRlY2ltYWxQbGFjZXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNleHRyYWN0QmFzaWModGhpcy4jc2VuZFJlcXVlc3QocmVxdWVzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdHMgYW5kIHJldHVybnMgYSBsaXN0IChzaXplIG4pIG9mIHRydWUgcmFuZG9tIG51bWJlcnMgZnJvbSBhXHJcbiAgICAgKiBHYXVzc2lhbiBkaXN0cmlidXRpb24gKGFsc28ga25vd24gYXMgYSBub3JtYWwgZGlzdHJpYnV0aW9uKS5cclxuICAgICAqIFxyXG4gICAgICogVGhlIGZvcm0gdXNlcyBhIEJveC1NdWxsZXIgVHJhbnNmb3JtIHRvIGdlbmVyYXRlIHRoZSBHYXVzc2lhbiBkaXN0cmlidXRpb25cclxuICAgICAqIGZyb20gdW5pZm9ybWx5IGRpc3RyaWJ1dGVkIG51bWJlcnMuXHJcbiAgICAgKiBTZWU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9iYXNpYyNnZW5lcmF0ZUdhdXNzaWFuc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIG51bWJlcnMgeW91IG5lZWQuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWVhbiBUaGUgZGlzdHJpYnV0aW9uJ3MgbWVhbi4gTXVzdCBiZSB3aXRoaW4gdGhlXHJcbiAgICAgKiAgICAgWy0xZTYsMWU2XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFuZGFyZERldmlhdGlvbiBUaGUgZGlzdHJpYnV0aW9uJ3Mgc3RhbmRhcmQgZGV2aWF0aW9uLlxyXG4gICAgICogICAgIE11c3QgYmUgd2l0aGluIHRoZSBbLTFlNiwxZTZdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpZ25pZmljYW50RGlnaXRzIFRoZSBudW1iZXIgb2Ygc2lnbmlmaWNhbnQgZGlnaXRzIHRvIHVzZS5cclxuICAgICAqICAgICBNdXN0IGJlIHdpdGhpbiB0aGUgWzIsMjBdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdH19IG9wdGlvbnMgQW4gb2JqZWN0IHdoaWNoIG1heVxyXG4gICAgICogICAgIGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj1udWxsXSBBIGRpY3Rpb25hcnkgb2JqZWN0XHJcbiAgICAgKiAgICAgd2hpY2ggYWxsb3dzIHRoZSBjbGllbnQgdG8gc3BlY2lmeSB0aGF0IHRoZSByYW5kb20gdmFsdWVzIHNob3VsZCBiZVxyXG4gICAgICogICAgIGdlbmVyYXRlZCBmcm9tIGEgcHJlZ2VuZXJhdGVkLCBoaXN0b3JpY2FsIHJhbmRvbWl6YXRpb24gaW5zdGVhZCBvZiBhXHJcbiAgICAgKiAgICAgb25lLXRpbWUgb24tdGhlLWZseSByYW5kb21pemF0aW9uLiBUaGVyZSBhcmUgdGhyZWUgcG9zc2libGUgY2FzZXM6XHJcbiAgICAgKiAqICoqbnVsbCoqOiBUaGUgc3RhbmRhcmQgd2F5IG9mIGNhbGxpbmcgZm9yIHJhbmRvbSB2YWx1ZXMsIGkuZS50cnVlXHJcbiAgICAgKiAgICAgICByYW5kb21uZXNzIGlzIGdlbmVyYXRlZCBhbmQgZGlzY2FyZGVkIGFmdGVyd2FyZHMuXHJcbiAgICAgKiAqICoqZGF0ZSoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZ2VuZXJhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBkYXRlIChwYXN0IG9yIHByZXNlbnQsIGZvcm1hdDogeyAnZGF0ZScsICdZWVlZLU1NLUREJyB9KS5cclxuICAgICAqICogKippZCoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZGVyaXZlZCBmcm9tIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBpZGVudGlmaWVyIGluIGEgZGV0ZXJtaW5pc3RpYyBtYW5uZXIuIEZvcm1hdDogeyAnaWQnLFxyXG4gICAgICogICAgICAgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgfSB3aGVyZSAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyBpcyBhIHN0cmluZ1xyXG4gICAgICogICAgICAgd2l0aCBsZW5ndGggaW4gdGhlIFsxLCA2NF0gcmFuZ2UuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxudW1iZXJbXT59IEEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LFxyXG4gICAgICogICAgIHJlcHJlc2VudHMgYW4gYXJyYXkgb2YgdHJ1ZSByYW5kb20gbnVtYmVycyBmcm9tIGEgR2F1c3NpYW4gZGlzdHJpYnV0aW9uLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZUdhdXNzaWFucyhuLCBtZWFuLCBzdGFuZGFyZERldmlhdGlvbiwgc2lnbmlmaWNhbnREaWdpdHMsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jZ2F1c3NpYW5SZXF1ZXN0KG4sIG1lYW4sIHN0YW5kYXJkRGV2aWF0aW9uLFxyXG4gICAgICAgICAgICBzaWduaWZpY2FudERpZ2l0cywgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RCYXNpYyh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0cyBhbmQgcmV0dXJucyBhIGxpc3QgKHNpemUgbikgb2YgdHJ1ZSByYW5kb20gdW5pY29kZSBzdHJpbmdzIGZyb21cclxuICAgICAqIHRoZSBzZXJ2ZXIuIFNlZTogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L2Jhc2ljI2dlbmVyYXRlU3RyaW5nc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIHN0cmluZ3MgeW91IG5lZWQuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgZWFjaCBzdHJpbmcuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDIwXSByYW5nZS4gQWxsIHN0cmluZ3Mgd2lsbCBiZSBvZiB0aGUgc2FtZSBsZW5ndGguXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVycyBBIHN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBzZXQgb2YgY2hhcmFjdGVyc1xyXG4gICAgICogICAgIHRoYXQgYXJlIGFsbG93ZWQgdG8gb2NjdXIgaW4gdGhlIHJhbmRvbSBzdHJpbmdzLiBUaGUgbWF4aW11bSBudW1iZXJcclxuICAgICAqICAgICBvZiBjaGFyYWN0ZXJzIGlzIDgwLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFuLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPzogT2JqZWN0fX0gb3B0aW9uc1xyXG4gICAgICogICAgIEFuIG9iamVjdCB3aGljaCBtYXkgY29udGFpbnMgYW55IG9mIHRoZSBmb2xsb3dpbmcgb3B0aW9uYWwgcGFyYW1ldGVyczpcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucmVwbGFjZW1lbnQ9dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIHJhbmRvbVxyXG4gICAgICogICAgIHN0cmluZ3Mgc2hvdWxkIGJlIHBpY2tlZCB3aXRoIHJlcGxhY2VtZW50LiBJZiB0cnVlLCB0aGUgcmVzdWx0aW5nIGxpc3RcclxuICAgICAqICAgICBvZiBzdHJpbmdzIG1heSBjb250YWluIGR1cGxpY2F0ZXMsIG90aGVyd2lzZSB0aGUgc3RyaW5ncyB3aWxsIGFsbCBiZVxyXG4gICAgICogICAgIHVuaXF1ZSAoZGVmYXVsdCB0cnVlKS5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5wcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPW51bGxdIEEgZGljdGlvbmFyeSBvYmplY3RcclxuICAgICAqICAgICB3aGljaCBhbGxvd3MgdGhlIGNsaWVudCB0byBzcGVjaWZ5IHRoYXQgdGhlIHJhbmRvbSB2YWx1ZXMgc2hvdWxkIGJlXHJcbiAgICAgKiAgICAgZ2VuZXJhdGVkIGZyb20gYSBwcmVnZW5lcmF0ZWQsIGhpc3RvcmljYWwgcmFuZG9taXphdGlvbiBpbnN0ZWFkIG9mIGFcclxuICAgICAqICAgICBvbmUtdGltZSBvbi10aGUtZmx5IHJhbmRvbWl6YXRpb24uIFRoZXJlIGFyZSB0aHJlZSBwb3NzaWJsZSBjYXNlczpcclxuICAgICAqICogKipudWxsKio6IFRoZSBzdGFuZGFyZCB3YXkgb2YgY2FsbGluZyBmb3IgcmFuZG9tIHZhbHVlcywgaS5lLnRydWVcclxuICAgICAqICAgICAgIHJhbmRvbW5lc3MgaXMgZ2VuZXJhdGVkIGFuZCBkaXNjYXJkZWQgYWZ0ZXJ3YXJkcy5cclxuICAgICAqICogKipkYXRlKio6IFJBTkRPTS5PUkcgdXNlcyBoaXN0b3JpY2FsIHRydWUgcmFuZG9tbmVzcyBnZW5lcmF0ZWQgb24gdGhlXHJcbiAgICAgKiAgICAgICBjb3JyZXNwb25kaW5nIGRhdGUgKHBhc3Qgb3IgcHJlc2VudCwgZm9ybWF0OiB7ICdkYXRlJywgJ1lZWVktTU0tREQnIH0pLlxyXG4gICAgICogKiAqKmlkKio6IFJBTkRPTS5PUkcgdXNlcyBoaXN0b3JpY2FsIHRydWUgcmFuZG9tbmVzcyBkZXJpdmVkIGZyb20gdGhlXHJcbiAgICAgKiAgICAgICBjb3JyZXNwb25kaW5nIGlkZW50aWZpZXIgaW4gYSBkZXRlcm1pbmlzdGljIG1hbm5lci4gRm9ybWF0OiB7ICdpZCcsXHJcbiAgICAgKiAgICAgICAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyB9IHdoZXJlICdQRVJTSVNURU5ULUlERU5USUZJRVInIGlzIGEgc3RyaW5nXHJcbiAgICAgKiAgICAgICB3aXRoIGxlbmd0aCBpbiB0aGUgWzEsIDY0XSByYW5nZS5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZ1tdPn0gQSBQcm9taXNlIHdoaWNoLCBpZiByZXNvbHZlZCBzdWNjZXNzZnVsbHksXHJcbiAgICAgKiAgICAgcmVwcmVzZW50cyBhbiBhcnJheSBvZiB0cnVlIHJhbmRvbSBzdHJpbmdzLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZVN0cmluZ3MobiwgbGVuZ3RoLCBjaGFyYWN0ZXJzLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI3N0cmluZ1JlcXVlc3QobiwgbGVuZ3RoLCBjaGFyYWN0ZXJzLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdEJhc2ljKHRoaXMuI3NlbmRSZXF1ZXN0KHJlcXVlc3QpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcXVlc3RzIGFuZCByZXR1cm5zIGEgbGlzdCAoc2l6ZSBuKSBvZiB2ZXJzaW9uIDQgdHJ1ZSByYW5kb20gVW5pdmVyc2FsbHlcclxuICAgICAqIFVuaXF1ZSBJRGVudGlmaWVycyAoVVVJRHMpIGluIGFjY29yZGFuY2Ugd2l0aCBzZWN0aW9uIDQuNCBvZiBSRkMgNDEyMixcclxuICAgICAqIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogU2VlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvYmFzaWMjZ2VuZXJhdGVVVUlEc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIFVVSURzIHlvdSBuZWVkLiBNdXN0IGJlIHdpdGhpbiB0aGVcclxuICAgICAqICAgICBbMSwxZTNdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdH19IG9wdGlvbnMgQW4gb2JqZWN0IHdoaWNoIG1heVxyXG4gICAgICogICAgIGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj1udWxsXSBBIGRpY3Rpb25hcnkgb2JqZWN0XHJcbiAgICAgKiAgICAgd2hpY2ggYWxsb3dzIHRoZSBjbGllbnQgdG8gc3BlY2lmeSB0aGF0IHRoZSByYW5kb20gdmFsdWVzIHNob3VsZCBiZVxyXG4gICAgICogICAgIGdlbmVyYXRlZCBmcm9tIGEgcHJlZ2VuZXJhdGVkLCBoaXN0b3JpY2FsIHJhbmRvbWl6YXRpb24gaW5zdGVhZCBvZiBhXHJcbiAgICAgKiAgICAgb25lLXRpbWUgb24tdGhlLWZseSByYW5kb21pemF0aW9uLiBUaGVyZSBhcmUgdGhyZWUgcG9zc2libGUgY2FzZXM6XHJcbiAgICAgKiAqICoqbnVsbCoqOiBUaGUgc3RhbmRhcmQgd2F5IG9mIGNhbGxpbmcgZm9yIHJhbmRvbSB2YWx1ZXMsIGkuZS50cnVlXHJcbiAgICAgKiAgICAgICByYW5kb21uZXNzIGlzIGdlbmVyYXRlZCBhbmQgZGlzY2FyZGVkIGFmdGVyd2FyZHMuXHJcbiAgICAgKiAqICoqZGF0ZSoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZ2VuZXJhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBkYXRlIChwYXN0IG9yIHByZXNlbnQsIGZvcm1hdDogeyAnZGF0ZScsICdZWVlZLU1NLUREJyB9KS5cclxuICAgICAqICogKippZCoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZGVyaXZlZCBmcm9tIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBpZGVudGlmaWVyIGluIGEgZGV0ZXJtaW5pc3RpYyBtYW5uZXIuIEZvcm1hdDogeyAnaWQnLFxyXG4gICAgICogICAgICAgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgfSB3aGVyZSAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyBpcyBhIHN0cmluZ1xyXG4gICAgICogICAgICAgd2l0aCBsZW5ndGggaW4gdGhlIFsxLCA2NF0gcmFuZ2UuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmdbXT59IEEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LFxyXG4gICAgICogICAgIHJlcHJlc2VudHMgYW4gYXJyYXkgb2YgdHJ1ZSByYW5kb20gVVVJRHMuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdlbmVyYXRlVVVJRHMobiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNVVUlEUmVxdWVzdChuLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdEJhc2ljKHRoaXMuI3NlbmRSZXF1ZXN0KHJlcXVlc3QpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcXVlc3RzIGFuZCByZXR1cm5zIGEgbGlzdCAoc2l6ZSBuKSBvZiBCaW5hcnkgTGFyZ2UgT0JqZWN0cyAoQkxPQnMpXHJcbiAgICAgKiBhcyB1bmljb2RlIHN0cmluZ3MgY29udGFpbmluZyB0cnVlIHJhbmRvbSBkYXRhIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogU2VlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvYmFzaWMjZ2VuZXJhdGVCbG9ic1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIGJsb2JzIHlvdSBuZWVkLiBNdXN0IGJlIHdpdGhpbiB0aGVcclxuICAgICAqICAgICBbMSwxMDBdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgVGhlIHNpemUgb2YgZWFjaCBibG9iLCBtZWFzdXJlZCBpbiBiaXRzLiBNdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxMDQ4NTc2XSByYW5nZSBhbmQgbXVzdCBiZSBkaXZpc2libGUgYnkgOC5cclxuICAgICAqIEBwYXJhbSB7e2Zvcm1hdD86IHN0cmluZywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdH19IG9wdGlvbnNcclxuICAgICAqICAgICBBbiBvYmplY3Qgd2hpY2ggbWF5IGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZm9ybWF0PSdiYXNlNjQnXSBTcGVjaWZpZXMgdGhlIGZvcm1hdCBpbiB3aGljaFxyXG4gICAgICogICAgIHRoZSBibG9icyB3aWxsIGJlIHJldHVybmVkLiBWYWx1ZXMgYWxsb3dlZCBhcmUgJ2Jhc2U2NCcgYW5kICdoZXgnXHJcbiAgICAgKiAgICAgKGRlZmF1bHQgJ2Jhc2U2NCcpLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyW10+fSBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSxcclxuICAgICAqICAgICByZXByZXNlbnRzIGFuIGFycmF5IG9mIHRydWUgcmFuZG9tIGJsb2JzIGFzIHN0cmluZ3MuXHJcbiAgICAgKiBAc2VlIHtAbGluayBSYW5kb21PcmdDbGllbnQjQkxPQl9GT1JNQVRfQkFTRTY0fSBmb3IgJ2Jhc2U2NCcgKGRlZmF1bHQpLlxyXG4gICAgICogQHNlZSB7QGxpbmsgUmFuZG9tT3JnQ2xpZW50I0JMT0JfRk9STUFUX0hFWH0gZm9yICdoZXgnLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZUJsb2JzKG4sIHNpemUsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jYmxvYlJlcXVlc3Qobiwgc2l6ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RCYXNpYyh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU0lHTkVEIEFQSVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdHMgYSBsaXN0IChzaXplIG4pIG9mIHRydWUgcmFuZG9tIGludGVnZXJzIHdpdGhpbiBhIHVzZXItZGVmaW5lZFxyXG4gICAgICogcmFuZ2UgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICogXHJcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LCByZXNwcmVzZW50cyBhbiBvYmplY3RcclxuICAgICAqIHdpdGggdGhlIHBhcnNlZCBpbnRlZ2VyIGxpc3QgbWFwcGVkIHRvICdkYXRhJywgdGhlIG9yaWdpbmFsIHJlc3BvbnNlIG1hcHBlZFxyXG4gICAgICogdG8gJ3JhbmRvbScsIGFuZCB0aGUgcmVzcG9uc2UncyBzaWduYXR1cmUgbWFwcGVkIHRvICdzaWduYXR1cmUnLlxyXG4gICAgICogU2VlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvc2lnbmVkI2dlbmVyYXRlU2lnbmVkSW50ZWdlcnNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIEhvdyBtYW55IHJhbmRvbSBpbnRlZ2VycyB5b3UgbmVlZC4gTXVzdCBiZSB3aXRoaW4gdGhlXHJcbiAgICAgKiAgICAgWzEsMWU0XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIGxvd2VyIGJvdW5kYXJ5IGZvciB0aGUgcmFuZ2UgZnJvbSB3aGljaCB0aGVcclxuICAgICAqICAgICByYW5kb20gbnVtYmVycyB3aWxsIGJlIHBpY2tlZC4gTXVzdCBiZSB3aXRoaW4gdGhlIFstMWU5LDFlOV0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSB1cHBlciBib3VuZGFyeSBmb3IgdGhlIHJhbmdlIGZyb20gd2hpY2ggdGhlXHJcbiAgICAgKiAgICAgcmFuZG9tIG51bWJlcnMgd2lsbCBiZSBwaWNrZWQuIE11c3QgYmUgd2l0aGluIHRoZSBbLTFlOSwxZTldIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFuLCBiYXNlPzogbnVtYmVyLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPzpcclxuICAgICAqICAgICBPYmplY3QsIGxpY2Vuc2VEYXRhPzogT2JqZWN0LCB1c2VyRGF0YT86IE9iamVjdHxudW1iZXJ8c3RyaW5nLCB0aWNrZXRJZD86XHJcbiAgICAgKiAgICAgc3RyaW5nfX0gb3B0aW9ucyBBbiBvYmplY3Qgd2hpY2ggbWF5IGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nXHJcbiAgICAgKiAgICAgb3B0aW9uYWwgcGFyYW1ldGVyczpcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucmVwbGFjZW1lbnQ9dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIHJhbmRvbVxyXG4gICAgICogICAgIG51bWJlcnMgc2hvdWxkIGJlIHBpY2tlZCB3aXRoIHJlcGxhY2VtZW50LiBJZiB0cnVlLCB0aGUgcmVzdWx0aW5nIG51bWJlcnNcclxuICAgICAqICAgICBtYXkgY29udGFpbiBkdXBsaWNhdGUgdmFsdWVzLCBvdGhlcndpc2UgdGhlIG51bWJlcnMgd2lsbCBhbGwgYmUgdW5pcXVlXHJcbiAgICAgKiAgICAgKGRlZmF1bHQgdHJ1ZSkuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYmFzZT0xMF0gVGhlIGJhc2UgdGhhdCB3aWxsIGJlIHVzZWQgdG8gZGlzcGxheVxyXG4gICAgICogICAgIHRoZSBudW1iZXJzLiBWYWx1ZXMgYWxsb3dlZCBhcmUgMiwgOCwgMTAgYW5kIDE2IChkZWZhdWx0IDEwKS5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5wcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPW51bGxdIEEgZGljdGlvbmFyeSBvYmplY3RcclxuICAgICAqICAgICB3aGljaCBhbGxvd3MgdGhlIGNsaWVudCB0byBzcGVjaWZ5IHRoYXQgdGhlIHJhbmRvbSB2YWx1ZXMgc2hvdWxkIGJlXHJcbiAgICAgKiAgICAgZ2VuZXJhdGVkIGZyb20gYSBwcmVnZW5lcmF0ZWQsIGhpc3RvcmljYWwgcmFuZG9taXphdGlvbiBpbnN0ZWFkIG9mIGFcclxuICAgICAqICAgICBvbmUtdGltZSBvbi10aGUtZmx5IHJhbmRvbWl6YXRpb24uIFRoZXJlIGFyZSB0aHJlZSBwb3NzaWJsZSBjYXNlczpcclxuICAgICAqICogKipudWxsKio6IFRoZSBzdGFuZGFyZCB3YXkgb2YgY2FsbGluZyBmb3IgcmFuZG9tIHZhbHVlcywgaS5lLnRydWVcclxuICAgICAqICAgICAgIHJhbmRvbW5lc3MgaXMgZ2VuZXJhdGVkIGFuZCBkaXNjYXJkZWQgYWZ0ZXJ3YXJkcy5cclxuICAgICAqICogKipkYXRlKio6IFJBTkRPTS5PUkcgdXNlcyBoaXN0b3JpY2FsIHRydWUgcmFuZG9tbmVzcyBnZW5lcmF0ZWQgb24gdGhlXHJcbiAgICAgKiAgICAgICBjb3JyZXNwb25kaW5nIGRhdGUgKHBhc3Qgb3IgcHJlc2VudCwgZm9ybWF0OiB7ICdkYXRlJywgJ1lZWVktTU0tREQnIH0pLlxyXG4gICAgICogKiAqKmlkKio6IFJBTkRPTS5PUkcgdXNlcyBoaXN0b3JpY2FsIHRydWUgcmFuZG9tbmVzcyBkZXJpdmVkIGZyb20gdGhlXHJcbiAgICAgKiAgICAgICBjb3JyZXNwb25kaW5nIGlkZW50aWZpZXIgaW4gYSBkZXRlcm1pbmlzdGljIG1hbm5lci4gRm9ybWF0OiB7ICdpZCcsXHJcbiAgICAgKiAgICAgICAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyB9IHdoZXJlICdQRVJTSVNURU5ULUlERU5USUZJRVInIGlzIGEgc3RyaW5nXHJcbiAgICAgKiAgICAgICB3aXRoIGxlbmd0aCBpbiB0aGUgWzEsIDY0XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5saWNlbnNlRGF0YT1udWxsXSBBIGRpY3Rpb25hcnkgb2JqZWN0IHdoaWNoIGFsbG93c1xyXG4gICAgICogICAgIHRoZSBjYWxsZXIgdG8gaW5jbHVkZSBkYXRhIG9mIHJlbGV2YW5jZSB0byB0aGUgbGljZW5zZSB0aGF0IGlzIGFzc29jaWF0ZWRcclxuICAgICAqICAgICB3aXRoIHRoZSBBUEkgS2V5LiBUaGlzIGlzIG1hbmRhdG9yeSBmb3IgQVBJIEtleXMgd2l0aCB0aGUgbGljZW5zZSB0eXBlXHJcbiAgICAgKiAgICAgJ0ZsZXhpYmxlIEdhbWJsaW5nJyBhbmQgZm9sbG93cyB0aGUgZm9ybWF0IHsgJ21heFBheW91dCc6IHsgJ2N1cnJlbmN5JzpcclxuICAgICAqICAgICAnWFRTJywgJ2Ftb3VudCc6IDAuMCB9fS4gVGhpcyBpbmZvcm1hdGlvbiBpcyB1c2VkIGluIGxpY2Vuc2luZ1xyXG4gICAgICogICAgIHJlcXVlc3RlZCByYW5kb20gdmFsdWVzIGFuZCBpbiBiaWxsaW5nLiBUaGUgY3VycmVudGx5IHN1cHBvcnRlZFxyXG4gICAgICogICAgIGN1cnJlbmNpZXMgYXJlOiAnVVNEJywgJ0VVUicsICdHQlAnLCAnQlRDJywgJ0VUSCcuIFRoZSBtb3N0IHVwLXRvLWRhdGVcclxuICAgICAqICAgICBpbmZvcm1hdGlvbiBvbiB0aGUgY3VycmVuY2llcyBjYW4gYmUgZm91bmQgaW4gdGhlIFNpZ25lZCBBUElcclxuICAgICAqICAgICBkb2N1bWVudGF0aW9uLCBoZXJlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvc2lnbmVkXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyfE9iamVjdCl9IFtvcHRpb25zLnVzZXJEYXRhPW51bGxdIE9iamVjdCB0aGF0IHdpbGwgYmVcclxuICAgICAqICAgICBpbmNsdWRlZCBpbiB1bm1vZGlmaWVkIGZvcm0uIEl0cyBtYXhpbXVtIHNpemUgaW4gZW5jb2RlZCAoc3RyaW5nKSBmb3JtIGlzXHJcbiAgICAgKiAgICAgMSwwMDAgY2hhcmFjdGVycyAoZGVmYXVsdCBudWxsKS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50aWNrZXRJZD1udWxsXSBBIHN0cmluZyB3aXRoIHRpY2tldCBpZGVudGlmaWVyIG9idGFpbmVkXHJcbiAgICAgKiAgICAgdmlhIHRoZSB7QGxpbmsgUmFuZG9tT3JnQ2xpZW50I2NyZWF0ZVRpY2tldHN9IG1ldGhvZC4gU3BlY2lmeWluZyBhIHZhbHVlXHJcbiAgICAgKiAgICAgZm9yIHRpY2tldElkIHdpbGwgY2F1c2UgUkFORE9NLk9SRyB0byByZWNvcmQgdGhhdCB0aGUgdGlja2V0IHdhcyB1c2VkXHJcbiAgICAgKiAgICAgdG8gZ2VuZXJhdGUgdGhlIHJlcXVlc3RlZCByYW5kb20gdmFsdWVzLiBFYWNoIHRpY2tldCBjYW4gb25seSBiZSB1c2VkXHJcbiAgICAgKiAgICAgb25jZSAoZGVmYXVsdCBudWxsKS5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHtkYXRhOiBudW1iZXJbXXxzdHJpbmdbXSwgcmFuZG9tOiBPYmplY3QsIHNpZ25hdHVyZTogc3RyaW5nfT59XHJcbiAgICAgKiAgICAgQSBQcm9taXNlIHdoaWNoLCBpZiByZXNvbHZlZCBzdWNjZXNzZnVsbHksIHJlcHJlc2VudHMgYW4gb2JqZWN0IHdpdGggdGhlXHJcbiAgICAgKiAgICAgZm9sbG93aW5nIHN0cnVjdHVyZTpcclxuICAgICAqICogKipkYXRhKio6IGFycmF5IG9mIHRydWUgcmFuZG9tIGludGVnZXJzXHJcbiAgICAgKiAqICoqcmFuZG9tKio6IHJhbmRvbSBmaWVsZCBhcyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAqICogKipzaWduYXR1cmUqKjogc2lnbmF0dXJlIHN0cmluZ1xyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZVNpZ25lZEludGVnZXJzKG4sIG1pbiwgbWF4LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI2ludGVnZXJSZXF1ZXN0KG4sIG1pbiwgbWF4LCBvcHRpb25zLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFNpZ25lZCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0cyBhbmQgcmV0dXJucyB1bmlmb3JtIG9yIG11bHRpZm9ybSBzZXF1ZW5jZXMgb2YgdHJ1ZSByYW5kb20gaW50ZWdlcnNcclxuICAgICAqIHdpdGhpbiB1c2VyLWRlZmluZWQgcmFuZ2VzIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogUmV0dXJucyBhIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVzcHJlc2VudHMgYW4gb2JqZWN0XHJcbiAgICAgKiB3aXRoIHRoZSBwYXJzZWQgYXJyYXkgb2YgaW50ZWdlciBzZXF1ZW5jZXMgbWFwcGVkIHRvICdkYXRhJywgdGhlIG9yaWdpbmFsXHJcbiAgICAgKiByZXNwb25zZSBtYXBwZWQgdG8gJ3JhbmRvbScsIGFuZCB0aGUgcmVzcG9uc2UncyBzaWduYXR1cmUgbWFwcGVkIHRvXHJcbiAgICAgKiAnc2lnbmF0dXJlJy5cclxuICAgICAqIFNlZTogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L3NpZ25lZCNnZW5lcmF0ZUludGVnZXJTZXF1ZW5jZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIEhvdyBtYW55IGFycmF5cyBvZiByYW5kb20gaW50ZWdlcnMgeW91IG5lZWQuIE11c3QgYmVcclxuICAgICAqICAgICB3aXRoaW4gdGhlIFsxLDFlM10gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBsZW5ndGggVGhlIGxlbmd0aCBvZiBlYWNoIGFycmF5IG9mIHJhbmRvbVxyXG4gICAgICogICAgIGludGVnZXJzIHJlcXVlc3RlZC4gRm9yIHVuaWZvcm0gc2VxdWVuY2VzLCBsZW5ndGggbXVzdCBiZSBhbiBpbnRlZ2VyXHJcbiAgICAgKiAgICAgaW4gdGhlIFsxLCAxZTRdIHJhbmdlLiBGb3IgbXVsdGlmb3JtIHNlcXVlbmNlcywgbGVuZ3RoIGNhbiBiZSBhbiBhcnJheVxyXG4gICAgICogICAgIHdpdGggbiBpbnRlZ2VycywgZWFjaCBzcGVjaWZ5aW5nIHRoZSBsZW5ndGggb2YgdGhlIHNlcXVlbmNlIGlkZW50aWZpZWRcclxuICAgICAqICAgICBieSBpdHMgaW5kZXguIEluIHRoaXMgY2FzZSwgZWFjaCB2YWx1ZSBpbiBsZW5ndGggbXVzdCBiZSB3aXRoaW4gdGhlXHJcbiAgICAgKiAgICAgWzEsIDFlNF0gcmFuZ2UgYW5kIHRoZSB0b3RhbCBzdW0gb2YgYWxsIHRoZSBsZW5ndGhzIG11c3QgYmUgaW4gdGhlXHJcbiAgICAgKiAgICAgWzEsIDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBtaW4gVGhlIGxvd2VyIGJvdW5kYXJ5IGZvciB0aGUgcmFuZ2UgZnJvbSB3aGljaFxyXG4gICAgICogICAgIHRoZSByYW5kb20gbnVtYmVycyB3aWxsIGJlIHBpY2tlZC4gRm9yIHVuaWZvcm0gc2VxdWVuY2VzLCBtaW4gbXVzdCBiZVxyXG4gICAgICogICAgIGFuIGludGVnZXIgaW4gdGhlIFstMWU5LCAxZTldIHJhbmdlLiBGb3IgbXVsdGlmb3JtIHNlcXVlbmNlcywgbWluIGNhblxyXG4gICAgICogICAgIGJlIGFuIGFycmF5IHdpdGggbiBpbnRlZ2VycywgZWFjaCBzcGVjaWZ5aW5nIHRoZSBsb3dlciBib3VuZGFyeSBvZiB0aGVcclxuICAgICAqICAgICBzZXF1ZW5jZSBpZGVudGlmaWVkIGJ5IGl0cyBpbmRleC4gSW4gdGhpcyBjYXNlLCBlYWNoIHZhbHVlIGluIG1pbiBtdXN0XHJcbiAgICAgKiAgICAgYmUgd2l0aGluIHRoZSBbLTFlOSwgMWU5XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7KG51bWJlcnxudW1iZXJbXSl9IG1heCBUaGUgdXBwZXIgYm91bmRhcnkgZm9yIHRoZSByYW5nZSBmcm9tIHdoaWNoXHJcbiAgICAgKiAgICAgdGhlIHJhbmRvbSBudW1iZXJzIHdpbGwgYmUgcGlja2VkLiBGb3IgdW5pZm9ybSBzZXF1ZW5jZXMsIG1heCBtdXN0IGJlXHJcbiAgICAgKiAgICAgYW4gaW50ZWdlciBpbiB0aGUgWy0xZTksIDFlOV0gcmFuZ2UuIEZvciBtdWx0aWZvcm0gc2VxdWVuY2VzLCBtYXggY2FuXHJcbiAgICAgKiAgICAgYmUgYW4gYXJyYXkgd2l0aCBuIGludGVnZXJzLCBlYWNoIHNwZWNpZnlpbmcgdGhlIHVwcGVyIGJvdW5kYXJ5IG9mIHRoZVxyXG4gICAgICogICAgIHNlcXVlbmNlIGlkZW50aWZpZWQgYnkgaXRzIGluZGV4LiBJbiB0aGlzIGNhc2UsIGVhY2ggdmFsdWUgaW4gbWF4IG11c3RcclxuICAgICAqICAgICBiZSB3aXRoaW4gdGhlIFstMWU5LCAxZTldIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFufGJvb2xlYW5bXSwgYmFzZT86IG51bWJlcnxudW1iZXJbXSxcclxuICAgICAqICAgICBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPzogT2JqZWN0LCBsaWNlbnNlRGF0YT86IE9iamVjdCwgdXNlckRhdGE/OlxyXG4gICAgICogICAgIE9iamVjdHxudW1iZXJ8c3RyaW5nLCB0aWNrZXRJZD86IHN0cmluZ319IG9wdGlvbnMgQW4gb2JqZWN0IHdoaWNoIG1heVxyXG4gICAgICogICAgIGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0geyhib29sZWFufGJvb2xlYW5bXSl9IFtvcHRpb25zLnJlcGxhY2VtZW50PXRydWVdIFNwZWNpZmllcyB3aGV0aGVyXHJcbiAgICAgKiAgICAgdGhlIHJhbmRvbSBudW1iZXJzIHNob3VsZCBiZSBwaWNrZWQgd2l0aCByZXBsYWNlbWVudC4gSWYgdHJ1ZSwgdGhlXHJcbiAgICAgKiAgICAgcmVzdWx0aW5nIG51bWJlcnMgbWF5IGNvbnRhaW4gZHVwbGljYXRlIHZhbHVlcywgb3RoZXJ3aXNlIHRoZSBudW1iZXJzXHJcbiAgICAgKiAgICAgd2lsbCBhbGwgYmUgdW5pcXVlLiBGb3IgbXVsdGlmb3JtIHNlcXVlbmNlcywgcmVwbGFjZW1lbnQgY2FuIGJlIGFuIGFycmF5XHJcbiAgICAgKiAgICAgd2l0aCBuIGJvb2xlYW4gdmFsdWVzLCBlYWNoIHNwZWNpZnlpbmcgd2hldGhlciB0aGUgc2VxdWVuY2UgaWRlbnRpZmllZCBieVxyXG4gICAgICogICAgIGl0cyBpbmRleCB3aWxsIGJlIGNyZWF0ZWQgd2l0aCAodHJ1ZSkgb3Igd2l0aG91dCAoZmFsc2UpIHJlcGxhY2VtZW50XHJcbiAgICAgKiAgICAgKGRlZmF1bHQgdHJ1ZSkuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBbb3B0aW9ucy5iYXNlPTEwXSBUaGUgYmFzZSB0aGF0IHdpbGwgYmUgdXNlZCB0b1xyXG4gICAgICogICAgIGRpc3BsYXkgdGhlIG51bWJlcnMuIFZhbHVlcyBhbGxvd2VkIGFyZSAyLCA4LCAxMCBhbmQgMTYuIEZvciBtdWx0aWZvcm1cclxuICAgICAqICAgICBzZXF1ZW5jZXMsIGJhc2UgY2FuIGJlIGFuIGFycmF5IHdpdGggbiBpbnRlZ2VyIHZhbHVlcyB0YWtlbiBmcm9tIHRoZSBzYW1lXHJcbiAgICAgKiAgICAgc2V0LCBlYWNoIHNwZWNpZnlpbmcgdGhlIGJhc2UgdGhhdCB3aWxsIGJlIHVzZWQgdG8gZGlzcGxheSB0aGUgc2VxdWVuY2VcclxuICAgICAqICAgICBpZGVudGlmaWVkIGJ5IGl0cyBpbmRleCAoZGVmYXVsdCAxMCkuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj1udWxsXSBBIGRpY3Rpb25hcnkgb2JqZWN0XHJcbiAgICAgKiAgICAgd2hpY2ggYWxsb3dzIHRoZSBjbGllbnQgdG8gc3BlY2lmeSB0aGF0IHRoZSByYW5kb20gdmFsdWVzIHNob3VsZCBiZVxyXG4gICAgICogICAgIGdlbmVyYXRlZCBmcm9tIGEgcHJlZ2VuZXJhdGVkLCBoaXN0b3JpY2FsIHJhbmRvbWl6YXRpb24gaW5zdGVhZCBvZiBhXHJcbiAgICAgKiAgICAgb25lLXRpbWUgb24tdGhlLWZseSByYW5kb21pemF0aW9uLiBUaGVyZSBhcmUgdGhyZWUgcG9zc2libGUgY2FzZXM6XHJcbiAgICAgKiAqICoqbnVsbCoqOiBUaGUgc3RhbmRhcmQgd2F5IG9mIGNhbGxpbmcgZm9yIHJhbmRvbSB2YWx1ZXMsIGkuZS50cnVlXHJcbiAgICAgKiAgICAgICByYW5kb21uZXNzIGlzIGdlbmVyYXRlZCBhbmQgZGlzY2FyZGVkIGFmdGVyd2FyZHMuXHJcbiAgICAgKiAqICoqZGF0ZSoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZ2VuZXJhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBkYXRlIChwYXN0IG9yIHByZXNlbnQsIGZvcm1hdDogeyAnZGF0ZScsICdZWVlZLU1NLUREJyB9KS5cclxuICAgICAqICogKippZCoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZGVyaXZlZCBmcm9tIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBpZGVudGlmaWVyIGluIGEgZGV0ZXJtaW5pc3RpYyBtYW5uZXIuIEZvcm1hdDogeyAnaWQnLFxyXG4gICAgICogICAgICAgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgfSB3aGVyZSAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyBpcyBhIHN0cmluZ1xyXG4gICAgICogICAgICAgd2l0aCBsZW5ndGggaW4gdGhlIFsxLCA2NF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMubGljZW5zZURhdGE9bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdCB3aGljaCBhbGxvd3NcclxuICAgICAqICAgICB0aGUgY2FsbGVyIHRvIGluY2x1ZGUgZGF0YSBvZiByZWxldmFuY2UgdG8gdGhlIGxpY2Vuc2UgdGhhdCBpcyBhc3NvY2lhdGVkXHJcbiAgICAgKiAgICAgd2l0aCB0aGUgQVBJIEtleS4gVGhpcyBpcyBtYW5kYXRvcnkgZm9yIEFQSSBLZXlzIHdpdGggdGhlIGxpY2Vuc2UgdHlwZVxyXG4gICAgICogICAgICdGbGV4aWJsZSBHYW1ibGluZycgYW5kIGZvbGxvd3MgdGhlIGZvcm1hdCB7ICdtYXhQYXlvdXQnOiB7ICdjdXJyZW5jeSc6XHJcbiAgICAgKiAgICAgJ1hUUycsICdhbW91bnQnOiAwLjAgfX0uIFRoaXMgaW5mb3JtYXRpb24gaXMgdXNlZCBpbiBsaWNlbnNpbmdcclxuICAgICAqICAgICByZXF1ZXN0ZWQgcmFuZG9tIHZhbHVlcyBhbmQgaW4gYmlsbGluZy4gVGhlIGN1cnJlbnRseSBzdXBwb3J0ZWRcclxuICAgICAqICAgICBjdXJyZW5jaWVzIGFyZTogJ1VTRCcsICdFVVInLCAnR0JQJywgJ0JUQycsICdFVEgnLiBUaGUgbW9zdCB1cC10by1kYXRlXHJcbiAgICAgKiAgICAgaW5mb3JtYXRpb24gb24gdGhlIGN1cnJlbmNpZXMgY2FuIGJlIGZvdW5kIGluIHRoZSBTaWduZWQgQVBJXHJcbiAgICAgKiAgICAgZG9jdW1lbnRhdGlvbiwgaGVyZTogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L3NpZ25lZFxyXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcnxPYmplY3QpfSBbb3B0aW9ucy51c2VyRGF0YT1udWxsXSBPYmplY3QgdGhhdCB3aWxsIGJlXHJcbiAgICAgKiAgICAgaW5jbHVkZWQgaW4gdW5tb2RpZmllZCBmb3JtLiBJdHMgbWF4aW11bSBzaXplIGluIGVuY29kZWQgKFN0cmluZykgZm9ybVxyXG4gICAgICogICAgIGlzIDEsMDAwIGNoYXJhY3RlcnMgKGRlZmF1bHQgbnVsbCkuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMudGlja2V0SWQ9bnVsbF0gQSBzdHJpbmcgd2l0aCB0aWNrZXQgaWRlbnRpZmllclxyXG4gICAgICogICAgIG9idGFpbmVkIHZpYSB0aGUge0BsaW5rIFJhbmRvbU9yZ0NsaWVudCNjcmVhdGVUaWNrZXRzfSBtZXRob2QuIFNwZWNpZnlpbmdcclxuICAgICAqICAgICBhIHZhbHVlIGZvciB0aWNrZXRJZCB3aWxsIGNhdXNlIFJBTkRPTS5PUkcgdG8gcmVjb3JkIHRoYXQgdGhlIHRpY2tldCB3YXNcclxuICAgICAqICAgICB1c2VkIHRvIGdlbmVyYXRlIHRoZSByZXF1ZXN0ZWQgcmFuZG9tIHZhbHVlcy4gRWFjaCB0aWNrZXQgY2FuIG9ubHkgYmUgdXNlZFxyXG4gICAgICogICAgIG9uY2UgKGRlZmF1bHQgbnVsbCkuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7ZGF0YTogbnVtYmVyW11bXXxzdHJpbmdbXVtdLCByYW5kb206IE9iamVjdCwgc2lnbmF0dXJlOiBzdHJpbmd9Pn1cclxuICAgICAqICAgICBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVwcmVzZW50cyBhbiBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgICBmb2xsb3dpbmcgc3RydWN0dXJlOlxyXG4gICAgICogKiAqKmRhdGEqKjogYXJyYXkgb2YgdHJ1ZSByYW5kb20gaW50ZWdlciBzZXF1ZW5jZXNcclxuICAgICAqICogKipyYW5kb20qKjogcmFuZG9tIGZpZWxkIGFzIHJldHVybmVkIGZyb20gdGhlIHNlcnZlclxyXG4gICAgICogKiAqKnNpZ25hdHVyZSoqOiBzaWduYXR1cmUgc3RyaW5nXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdlbmVyYXRlU2lnbmVkSW50ZWdlclNlcXVlbmNlcyhuLCBsZW5ndGgsIG1pbiwgbWF4LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI2ludGVnZXJTZXF1ZW5jZVJlcXVlc3QobiwgbGVuZ3RoLCBtaW4sIG1heCwgb3B0aW9ucywgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RTaWduZWQodGhpcy4jc2VuZFJlcXVlc3QocmVxdWVzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdCBhIGxpc3QgKHNpemUgbikgb2YgdHJ1ZSByYW5kb20gZGVjaW1hbCBmcmFjdGlvbnMsIGZyb20gYSB1bmlmb3JtXHJcbiAgICAgKiBkaXN0cmlidXRpb24gYWNyb3NzIHRoZSBbMCwxXSBpbnRlcnZhbCB3aXRoIGEgdXNlci1kZWZpbmVkIG51bWJlciBvZlxyXG4gICAgICogZGVjaW1hbCBwbGFjZXMgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICogXHJcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LCByZXNwcmVzZW50cyBhbiBvYmplY3RcclxuICAgICAqIHdpdGggdGhlIHBhcnNlZCBkZWNpbWFsIGZyYWN0aW9ucyBtYXBwZWQgdG8gJ2RhdGEnLCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcclxuICAgICAqIG1hcHBlZCB0byAncmFuZG9tJywgYW5kIHRoZSByZXNwb25zZSdzIHNpZ25hdHVyZSBtYXBwZWQgdG8gJ3NpZ25hdHVyZScuIFNlZTpcclxuICAgICAqIGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWQjZ2VuZXJhdGVTaWduZWREZWNpbWFsRnJhY3Rpb25zXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBIb3cgbWFueSByYW5kb20gZGVjaW1hbCBmcmFjdGlvbnMgeW91IG5lZWQuIE11c3QgYmVcclxuICAgICAqICAgICB3aXRoaW4gdGhlIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbFBsYWNlcyBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHVzZS4gTXVzdFxyXG4gICAgICogICAgIGJlIHdpdGhpbiB0aGUgWzEsMjBdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFuLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPzogT2JqZWN0LCBsaWNlbnNlRGF0YT86XHJcbiAgICAgKiAgICAgT2JqZWN0LCB1c2VyRGF0YT86IE9iamVjdHxudW1iZXJ8c3RyaW5nLCB0aWNrZXRJZD86IHN0cmluZ319IG9wdGlvbnMgQW5cclxuICAgICAqICAgICBvYmplY3Qgd2hpY2ggbWF5IGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlcGxhY2VtZW50PXRydWVdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSByYW5kb21cclxuICAgICAqICAgICBudW1iZXJzIHNob3VsZCBiZSBwaWNrZWQgd2l0aCByZXBsYWNlbWVudC4gSWYgdHJ1ZSwgdGhlIHJlc3VsdGluZyBudW1iZXJzXHJcbiAgICAgKiAgICAgbWF5IGNvbnRhaW4gZHVwbGljYXRlIHZhbHVlcywgb3RoZXJ3aXNlIHRoZSBudW1iZXJzIHdpbGwgYWxsIGJlIHVuaXF1ZVxyXG4gICAgICogICAgIChkZWZhdWx0IHRydWUpLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmxpY2Vuc2VEYXRhPW51bGxdIEEgZGljdGlvbmFyeSBvYmplY3Qgd2hpY2ggYWxsb3dzXHJcbiAgICAgKiAgICAgdGhlIGNhbGxlciB0byBpbmNsdWRlIGRhdGEgb2YgcmVsZXZhbmNlIHRvIHRoZSBsaWNlbnNlIHRoYXQgaXMgYXNzb2NpYXRlZFxyXG4gICAgICogICAgIHdpdGggdGhlIEFQSSBLZXkuIFRoaXMgaXMgbWFuZGF0b3J5IGZvciBBUEkgS2V5cyB3aXRoIHRoZSBsaWNlbnNlIHR5cGVcclxuICAgICAqICAgICAnRmxleGlibGUgR2FtYmxpbmcnIGFuZCBmb2xsb3dzIHRoZSBmb3JtYXQgeyAnbWF4UGF5b3V0JzogeyAnY3VycmVuY3knOlxyXG4gICAgICogICAgICdYVFMnLCAnYW1vdW50JzogMC4wIH19LiBUaGlzIGluZm9ybWF0aW9uIGlzIHVzZWQgaW4gbGljZW5zaW5nXHJcbiAgICAgKiAgICAgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMgYW5kIGluIGJpbGxpbmcuIFRoZSBjdXJyZW50bHkgc3VwcG9ydGVkXHJcbiAgICAgKiAgICAgY3VycmVuY2llcyBhcmU6ICdVU0QnLCAnRVVSJywgJ0dCUCcsICdCVEMnLCAnRVRIJy4gVGhlIG1vc3QgdXAtdG8tZGF0ZVxyXG4gICAgICogICAgIGluZm9ybWF0aW9uIG9uIHRoZSBjdXJyZW5jaWVzIGNhbiBiZSBmb3VuZCBpbiB0aGUgU2lnbmVkIEFQSVxyXG4gICAgICogICAgIGRvY3VtZW50YXRpb24sIGhlcmU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWRcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8T2JqZWN0KX0gW29wdGlvbnMudXNlckRhdGE9bnVsbF0gT2JqZWN0IHRoYXQgd2lsbCBiZVxyXG4gICAgICogICAgIGluY2x1ZGVkIGluIHVubW9kaWZpZWQgZm9ybS4gSXRzIG1heGltdW0gc2l6ZSBpbiBlbmNvZGVkIChTdHJpbmcpIGZvcm1cclxuICAgICAqICAgICBpcyAxLDAwMCBjaGFyYWN0ZXJzIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnRpY2tldElkPW51bGxdIEEgc3RyaW5nIHdpdGggdGlja2V0IGlkZW50aWZpZXJcclxuICAgICAqICAgICBvYnRhaW5lZCB2aWEgdGhlIHtAbGluayBSYW5kb21PcmdDbGllbnQjY3JlYXRlVGlja2V0c30gbWV0aG9kLiBTcGVjaWZ5aW5nXHJcbiAgICAgKiAgICAgYSB2YWx1ZSBmb3IgdGlja2V0SWQgd2lsbCBjYXVzZSBSQU5ET00uT1JHIHRvIHJlY29yZCB0aGF0IHRoZSB0aWNrZXQgd2FzXHJcbiAgICAgKiAgICAgdXNlZCB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMuIEVhY2ggdGlja2V0IGNhbiBvbmx5IGJlIHVzZWRcclxuICAgICAqICAgICBvbmNlIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e2RhdGE6IG51bWJlcltdLCByYW5kb206IE9iamVjdCwgc2lnbmF0dXJlOiBzdHJpbmd9Pn0gQVxyXG4gICAgICogICAgIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVwcmVzZW50cyBhbiBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgICBmb2xsb3dpbmcgc3RydWN0dXJlOlxyXG4gICAgICogKiAqKmRhdGEqKjogYXJyYXkgb2YgdHJ1ZSByYW5kb20gZGVjaW1hbCBmcmFjdGlvbnNcclxuICAgICAqICogKipyYW5kb20qKjogcmFuZG9tIGZpZWxkIGFzIHJldHVybmVkIGZyb20gdGhlIHNlcnZlclxyXG4gICAgICogKiAqKnNpZ25hdHVyZSoqOiBzaWduYXR1cmUgc3RyaW5nXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdlbmVyYXRlU2lnbmVkRGVjaW1hbEZyYWN0aW9ucyhuLCBkZWNpbWFsUGxhY2VzLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI2RlY2ltYWxGcmFjdGlvblJlcXVlc3QobiwgZGVjaW1hbFBsYWNlcywgb3B0aW9ucywgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RTaWduZWQodGhpcy4jc2VuZFJlcXVlc3QocmVxdWVzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdCBhIGxpc3QgKHNpemUgbikgb2YgdHJ1ZSByYW5kb20gbnVtYmVycyBmcm9tIGEgR2F1c3NpYW4gZGlzdHJpYnV0aW9uXHJcbiAgICAgKiAoYWxzbyBrbm93biBhcyBhIG5vcm1hbCBkaXN0cmlidXRpb24pLlxyXG4gICAgICogXHJcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LCByZXNwcmVzZW50cyBhbiBvYmplY3RcclxuICAgICAqIHdpdGggdGhlIHBhcnNlZCBudW1iZXJzIG1hcHBlZCB0byAnZGF0YScsIHRoZSBvcmlnaW5hbCByZXNwb25zZSBtYXBwZWQgdG9cclxuICAgICAqICdyYW5kb20nLCBhbmQgdGhlIHJlc3BvbnNlJ3Mgc2lnbmF0dXJlIG1hcHBlZCB0byAnc2lnbmF0dXJlJy4gU2VlOlxyXG4gICAgICogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L3NpZ25lZCNnZW5lcmF0ZVNpZ25lZEdhdXNzaWFuc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIG51bWJlcnMgeW91IG5lZWQuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWVhbiBUaGUgZGlzdHJpYnV0aW9uJ3MgbWVhbi4gTXVzdCBiZSB3aXRoaW4gdGhlIFstMWU2LDFlNl1cclxuICAgICAqICAgICByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFuZGFyZERldmlhdGlvbiBUaGUgZGlzdHJpYnV0aW9uJ3Mgc3RhbmRhcmQgZGV2aWF0aW9uLlxyXG4gICAgICogICAgIE11c3QgYmUgd2l0aGluIHRoZSBbLTFlNiwxZTZdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpZ25pZmljYW50RGlnaXRzIFRoZSBudW1iZXIgb2Ygc2lnbmlmaWNhbnQgZGlnaXRzIHRvIHVzZS5cclxuICAgICAqICAgICBNdXN0IGJlIHdpdGhpbiB0aGUgWzIsMjBdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHt7cHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdCwgbGljZW5zZURhdGE/OiBPYmplY3QsIHVzZXJEYXRhPzpcclxuICAgICAqICAgICBPYmplY3R8bnVtYmVyfHN0cmluZywgdGlja2V0SWQ/OiBzdHJpbmd9fSBvcHRpb25zIEFuIG9iamVjdCB3aGljaCBtYXlcclxuICAgICAqICAgICBjb250YWlucyBhbnkgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmxpY2Vuc2VEYXRhPW51bGxdIEEgZGljdGlvbmFyeSBvYmplY3Qgd2hpY2ggYWxsb3dzXHJcbiAgICAgKiAgICAgdGhlIGNhbGxlciB0byBpbmNsdWRlIGRhdGEgb2YgcmVsZXZhbmNlIHRvIHRoZSBsaWNlbnNlIHRoYXQgaXMgYXNzb2NpYXRlZFxyXG4gICAgICogICAgIHdpdGggdGhlIEFQSSBLZXkuIFRoaXMgaXMgbWFuZGF0b3J5IGZvciBBUEkgS2V5cyB3aXRoIHRoZSBsaWNlbnNlIHR5cGVcclxuICAgICAqICAgICAnRmxleGlibGUgR2FtYmxpbmcnIGFuZCBmb2xsb3dzIHRoZSBmb3JtYXQgeyAnbWF4UGF5b3V0JzogeyAnY3VycmVuY3knOlxyXG4gICAgICogICAgICdYVFMnLCAnYW1vdW50JzogMC4wIH19LiBUaGlzIGluZm9ybWF0aW9uIGlzIHVzZWQgaW4gbGljZW5zaW5nXHJcbiAgICAgKiAgICAgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMgYW5kIGluIGJpbGxpbmcuIFRoZSBjdXJyZW50bHkgc3VwcG9ydGVkXHJcbiAgICAgKiAgICAgY3VycmVuY2llcyBhcmU6ICdVU0QnLCAnRVVSJywgJ0dCUCcsICdCVEMnLCAnRVRIJy4gVGhlIG1vc3QgdXAtdG8tZGF0ZVxyXG4gICAgICogICAgIGluZm9ybWF0aW9uIG9uIHRoZSBjdXJyZW5jaWVzIGNhbiBiZSBmb3VuZCBpbiB0aGUgU2lnbmVkIEFQSVxyXG4gICAgICogICAgIGRvY3VtZW50YXRpb24sIGhlcmU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWRcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8T2JqZWN0KX0gW29wdGlvbnMudXNlckRhdGE9bnVsbF0gT2JqZWN0IHRoYXQgd2lsbCBiZVxyXG4gICAgICogICAgIGluY2x1ZGVkIGluIHVubW9kaWZpZWQgZm9ybS4gSXRzIG1heGltdW0gc2l6ZSBpbiBlbmNvZGVkIChTdHJpbmcpIGZvcm1cclxuICAgICAqICAgICBpcyAxLDAwMCBjaGFyYWN0ZXJzIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnRpY2tldElkPW51bGxdIEEgc3RyaW5nIHdpdGggdGlja2V0IGlkZW50aWZpZXJcclxuICAgICAqICAgICBvYnRhaW5lZCB2aWEgdGhlIHtAbGluayBSYW5kb21PcmdDbGllbnQjY3JlYXRlVGlja2V0c30gbWV0aG9kLiBTcGVjaWZ5aW5nXHJcbiAgICAgKiAgICAgYSB2YWx1ZSBmb3IgdGlja2V0SWQgd2lsbCBjYXVzZSBSQU5ET00uT1JHIHRvIHJlY29yZCB0aGF0IHRoZSB0aWNrZXQgd2FzXHJcbiAgICAgKiAgICAgdXNlZCB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMuIEVhY2ggdGlja2V0IGNhbiBvbmx5IGJlIHVzZWRcclxuICAgICAqICAgICBvbmNlIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e2RhdGE6IG51bWJlcltdLCByYW5kb206IE9iamVjdCwgc2lnbmF0dXJlOiBzdHJpbmd9Pn0gQVxyXG4gICAgICogICAgIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVwcmVzZW50cyBhbiBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgICBmb2xsb3dpbmcgc3RydWN0dXJlOlxyXG4gICAgICogKiAqKmRhdGEqKjogYXJyYXkgb2YgdHJ1ZSByYW5kb20gbnVtYmVycyBmcm9tIGEgR2F1c3NpYW4gZGlzdHJpYnV0aW9uXHJcbiAgICAgKiAqICoqcmFuZG9tKio6IHJhbmRvbSBmaWVsZCBhcyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAqICogKipzaWduYXR1cmUqKjogc2lnbmF0dXJlIHN0cmluZ1xyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZVNpZ25lZEdhdXNzaWFucyhuLCBtZWFuLCBzdGFuZGFyZERldmlhdGlvbiwgc2lnbmlmaWNhbnREaWdpdHMsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jZ2F1c3NpYW5SZXF1ZXN0KG4sIG1lYW4sIHN0YW5kYXJkRGV2aWF0aW9uLCBzaWduaWZpY2FudERpZ2l0cyxcclxuICAgICAgICAgICAgb3B0aW9ucywgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RTaWduZWQodGhpcy4jc2VuZFJlcXVlc3QocmVxdWVzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdCBhIGxpc3QgKHNpemUgbikgb2YgdHJ1ZSByYW5kb20gc3RyaW5ncyBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKiBcclxuICAgICAqIFJldHVybnMgYSBQcm9taXNlIHdoaWNoLCBpZiByZXNvbHZlZCBzdWNjZXNzZnVsbHksIHJlc3ByZXNlbnRzIGFuIG9iamVjdFxyXG4gICAgICogd2l0aCB0aGUgcGFyc2VkIHN0cmluZ3MgbWFwcGVkIHRvICdkYXRhJywgdGhlIG9yaWdpbmFsIHJlc3BvbnNlIG1hcHBlZCB0b1xyXG4gICAgICogJ3JhbmRvbScsIGFuZCB0aGUgcmVzcG9uc2UncyBzaWduYXR1cmUgbWFwcGVkIHRvICdzaWduYXR1cmUnLiBTZWU6XHJcbiAgICAgKiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvc2lnbmVkI2dlbmVyYXRlU2lnbmVkU3RyaW5nc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIHN0cmluZ3MgeW91IG5lZWQuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgZWFjaCBzdHJpbmcuIE11c3QgYmUgd2l0aGluIHRoZSBbMSwyMF1cclxuICAgICAqICAgICByYW5nZS4gQWxsIHN0cmluZ3Mgd2lsbCBiZSBvZiB0aGUgc2FtZSBsZW5ndGguXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVycyBBIHN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBzZXQgb2YgY2hhcmFjdGVyc1xyXG4gICAgICogICAgIHRoYXQgYXJlIGFsbG93ZWQgdG8gb2NjdXIgaW4gdGhlIHJhbmRvbSBzdHJpbmdzLiBUaGUgbWF4aW11bSBudW1iZXJcclxuICAgICAqICAgICBvZiBjaGFyYWN0ZXJzIGlzIDgwLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFuLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uPzogT2JqZWN0LCBsaWNlbnNlRGF0YT86XHJcbiAgICAgKiAgICAgT2JqZWN0LCB1c2VyRGF0YT86IE9iamVjdHxudW1iZXJ8c3RyaW5nLCB0aWNrZXRJZD86IHN0cmluZ319IG9wdGlvbnMgQW5cclxuICAgICAqICAgICBvYmplY3Qgd2hpY2ggbWF5IGNvbnRhaW5zIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlcGxhY2VtZW50PW51bGxdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSByYW5kb21cclxuICAgICAqICAgICBzdHJpbmdzIHNob3VsZCBiZSBwaWNrZWQgd2l0aCByZXBsYWNlbWVudC4gSWYgdHJ1ZSwgdGhlIHJlc3VsdGluZyBsaXN0XHJcbiAgICAgKiAgICAgb2Ygc3RyaW5ncyBtYXkgY29udGFpbiBkdXBsaWNhdGVzLCBvdGhlcndpc2UgdGhlIHN0cmluZ3Mgd2lsbCBhbGwgYmVcclxuICAgICAqICAgICB1bmlxdWUgKGRlZmF1bHQgdHJ1ZSkuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj1udWxsXSBBIGRpY3Rpb25hcnkgb2JqZWN0XHJcbiAgICAgKiAgICAgd2hpY2ggYWxsb3dzIHRoZSBjbGllbnQgdG8gc3BlY2lmeSB0aGF0IHRoZSByYW5kb20gdmFsdWVzIHNob3VsZCBiZVxyXG4gICAgICogICAgIGdlbmVyYXRlZCBmcm9tIGEgcHJlZ2VuZXJhdGVkLCBoaXN0b3JpY2FsIHJhbmRvbWl6YXRpb24gaW5zdGVhZCBvZiBhXHJcbiAgICAgKiAgICAgb25lLXRpbWUgb24tdGhlLWZseSByYW5kb21pemF0aW9uLiBUaGVyZSBhcmUgdGhyZWUgcG9zc2libGUgY2FzZXM6XHJcbiAgICAgKiAqICoqbnVsbCoqOiBUaGUgc3RhbmRhcmQgd2F5IG9mIGNhbGxpbmcgZm9yIHJhbmRvbSB2YWx1ZXMsIGkuZS50cnVlXHJcbiAgICAgKiAgICAgICByYW5kb21uZXNzIGlzIGdlbmVyYXRlZCBhbmQgZGlzY2FyZGVkIGFmdGVyd2FyZHMuXHJcbiAgICAgKiAqICoqZGF0ZSoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZ2VuZXJhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBkYXRlIChwYXN0IG9yIHByZXNlbnQsIGZvcm1hdDogeyAnZGF0ZScsICdZWVlZLU1NLUREJyB9KS5cclxuICAgICAqICogKippZCoqOiBSQU5ET00uT1JHIHVzZXMgaGlzdG9yaWNhbCB0cnVlIHJhbmRvbW5lc3MgZGVyaXZlZCBmcm9tIHRoZVxyXG4gICAgICogICAgICAgY29ycmVzcG9uZGluZyBpZGVudGlmaWVyIGluIGEgZGV0ZXJtaW5pc3RpYyBtYW5uZXIuIEZvcm1hdDogeyAnaWQnLFxyXG4gICAgICogICAgICAgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgfSB3aGVyZSAnUEVSU0lTVEVOVC1JREVOVElGSUVSJyBpcyBhIHN0cmluZ1xyXG4gICAgICogICAgICAgd2l0aCBsZW5ndGggaW4gdGhlIFsxLCA2NF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMubGljZW5zZURhdGE9bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdCB3aGljaCBhbGxvd3NcclxuICAgICAqICAgICB0aGUgY2FsbGVyIHRvIGluY2x1ZGUgZGF0YSBvZiByZWxldmFuY2UgdG8gdGhlIGxpY2Vuc2UgdGhhdCBpcyBhc3NvY2lhdGVkXHJcbiAgICAgKiAgICAgd2l0aCB0aGUgQVBJIEtleS4gVGhpcyBpcyBtYW5kYXRvcnkgZm9yIEFQSSBLZXlzIHdpdGggdGhlIGxpY2Vuc2UgdHlwZVxyXG4gICAgICogICAgICdGbGV4aWJsZSBHYW1ibGluZycgYW5kIGZvbGxvd3MgdGhlIGZvcm1hdCB7ICdtYXhQYXlvdXQnOiB7ICdjdXJyZW5jeSc6XHJcbiAgICAgKiAgICAgJ1hUUycsICdhbW91bnQnOiAwLjAgfX0uIFRoaXMgaW5mb3JtYXRpb24gaXMgdXNlZCBpbiBsaWNlbnNpbmdcclxuICAgICAqICAgICByZXF1ZXN0ZWQgcmFuZG9tIHZhbHVlcyBhbmQgaW4gYmlsbGluZy4gVGhlIGN1cnJlbnRseSBzdXBwb3J0ZWRcclxuICAgICAqICAgICBjdXJyZW5jaWVzIGFyZTogJ1VTRCcsICdFVVInLCAnR0JQJywgJ0JUQycsICdFVEgnLiBUaGUgbW9zdCB1cC10by1kYXRlXHJcbiAgICAgKiAgICAgaW5mb3JtYXRpb24gb24gdGhlIGN1cnJlbmNpZXMgY2FuIGJlIGZvdW5kIGluIHRoZSBTaWduZWQgQVBJXHJcbiAgICAgKiAgICAgZG9jdW1lbnRhdGlvbiwgaGVyZTogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L3NpZ25lZFxyXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcnxPYmplY3QpfSBbb3B0aW9ucy51c2VyRGF0YT1udWxsXSBPYmplY3QgdGhhdCB3aWxsIGJlXHJcbiAgICAgKiAgICAgaW5jbHVkZWQgaW4gdW5tb2RpZmllZCBmb3JtLiBJdHMgbWF4aW11bSBzaXplIGluIGVuY29kZWQgKFN0cmluZykgZm9ybVxyXG4gICAgICogICAgIGlzIDEsMDAwIGNoYXJhY3RlcnMgKGRlZmF1bHQgbnVsbCkuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMudGlja2V0SWQ9bnVsbF0gQSBzdHJpbmcgd2l0aCB0aWNrZXQgaWRlbnRpZmllclxyXG4gICAgICogICAgIG9idGFpbmVkIHZpYSB0aGUge0BsaW5rIFJhbmRvbU9yZ0NsaWVudCNjcmVhdGVUaWNrZXRzfSBtZXRob2QuIFNwZWNpZnlpbmdcclxuICAgICAqICAgICBhIHZhbHVlIGZvciB0aWNrZXRJZCB3aWxsIGNhdXNlIFJBTkRPTS5PUkcgdG8gcmVjb3JkIHRoYXQgdGhlIHRpY2tldCB3YXNcclxuICAgICAqICAgICB1c2VkIHRvIGdlbmVyYXRlIHRoZSByZXF1ZXN0ZWQgcmFuZG9tIHZhbHVlcy4gRWFjaCB0aWNrZXQgY2FuIG9ubHkgYmUgdXNlZFxyXG4gICAgICogICAgIG9uY2UgKGRlZmF1bHQgbnVsbCkuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7ZGF0YTogc3RyaW5nW10sIHJhbmRvbTogT2JqZWN0LCBzaWduYXR1cmU6IHN0cmluZ30+fSBBXHJcbiAgICAgKiAgICAgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LCByZXByZXNlbnRzIGFuIG9iamVjdCB3aXRoIHRoZVxyXG4gICAgICogICAgIGZvbGxvd2luZyBzdHJ1Y3R1cmU6XHJcbiAgICAgKiAqICoqZGF0YSoqOiBhcnJheSBvZiB0cnVlIHJhbmRvbSBzdHJpbmdzXHJcbiAgICAgKiAqICoqcmFuZG9tKio6IHJhbmRvbSBmaWVsZCBhcyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAqICogKipzaWduYXR1cmUqKjogc2lnbmF0dXJlIHN0cmluZ1xyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZVNpZ25lZFN0cmluZ3MobiwgbGVuZ3RoLCBjaGFyYWN0ZXJzLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI3N0cmluZ1JlcXVlc3QobiwgbGVuZ3RoLCBjaGFyYWN0ZXJzLCBvcHRpb25zLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFNpZ25lZCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0IGEgbGlzdCAoc2l6ZSBuKSBvZiB2ZXJzaW9uIDQgdHJ1ZSByYW5kb20gVW5pdmVyc2FsbHkgVW5pcXVlXHJcbiAgICAgKiBJRGVudGlmaWVycyAoVVVJRHMpIGluIGFjY29yZGFuY2Ugd2l0aCBzZWN0aW9uIDQuNCBvZiBSRkMgNDEyMiwgZnJvbVxyXG4gICAgICogdGhlIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogUmV0dXJucyBhIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVzcHJlc2VudHMgYW4gb2JqZWN0XHJcbiAgICAgKiB3aXRoIHRoZSBwYXJzZWQgVVVJRHMgbWFwcGVkIHRvICdkYXRhJywgdGhlIG9yaWdpbmFsIHJlc3BvbnNlIG1hcHBlZCB0b1xyXG4gICAgICogJ3JhbmRvbScsIGFuZCB0aGUgcmVzcG9uc2UncyBzaWduYXR1cmUgbWFwcGVkIHRvICdzaWduYXR1cmUnLiBTZWU6XHJcbiAgICAgKiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvc2lnbmVkI2dlbmVyYXRlU2lnbmVkVVVJRHNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIEhvdyBtYW55IHJhbmRvbSBVVUlEcyB5b3UgbmVlZC4gTXVzdCBiZSB3aXRoaW4gdGhlXHJcbiAgICAgKiAgICAgWzEsMWUzXSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e3ByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24/OiBPYmplY3QsIGxpY2Vuc2VEYXRhPzogT2JqZWN0LCB1c2VyRGF0YT86XHJcbiAgICAgKiAgICAgT2JqZWN0fHN0cmluZ3xudW1iZXIsIHRpY2tldElkPzogc3RyaW5nfX0gb3B0aW9ucyBBbiBvYmplY3Qgd2hpY2ggbWF5XHJcbiAgICAgKiAgICAgY29udGFpbiBhbnkgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmxpY2Vuc2VEYXRhPW51bGxdIEEgZGljdGlvbmFyeSBvYmplY3Qgd2hpY2ggYWxsb3dzXHJcbiAgICAgKiAgICAgdGhlIGNhbGxlciB0byBpbmNsdWRlIGRhdGEgb2YgcmVsZXZhbmNlIHRvIHRoZSBsaWNlbnNlIHRoYXQgaXMgYXNzb2NpYXRlZFxyXG4gICAgICogICAgIHdpdGggdGhlIEFQSSBLZXkuIFRoaXMgaXMgbWFuZGF0b3J5IGZvciBBUEkgS2V5cyB3aXRoIHRoZSBsaWNlbnNlIHR5cGVcclxuICAgICAqICAgICAnRmxleGlibGUgR2FtYmxpbmcnIGFuZCBmb2xsb3dzIHRoZSBmb3JtYXQgeyAnbWF4UGF5b3V0JzogeyAnY3VycmVuY3knOlxyXG4gICAgICogICAgICdYVFMnLCAnYW1vdW50JzogMC4wIH19LiBUaGlzIGluZm9ybWF0aW9uIGlzIHVzZWQgaW4gbGljZW5zaW5nXHJcbiAgICAgKiAgICAgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMgYW5kIGluIGJpbGxpbmcuIFRoZSBjdXJyZW50bHkgc3VwcG9ydGVkXHJcbiAgICAgKiAgICAgY3VycmVuY2llcyBhcmU6ICdVU0QnLCAnRVVSJywgJ0dCUCcsICdCVEMnLCAnRVRIJy4gVGhlIG1vc3QgdXAtdG8tZGF0ZVxyXG4gICAgICogICAgIGluZm9ybWF0aW9uIG9uIHRoZSBjdXJyZW5jaWVzIGNhbiBiZSBmb3VuZCBpbiB0aGUgU2lnbmVkIEFQSVxyXG4gICAgICogICAgIGRvY3VtZW50YXRpb24sIGhlcmU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWRcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8T2JqZWN0KX0gW29wdGlvbnMudXNlckRhdGE9bnVsbF0gT2JqZWN0IHRoYXQgd2lsbCBiZVxyXG4gICAgICogICAgIGluY2x1ZGVkIGluIHVubW9kaWZpZWQgZm9ybS4gSXRzIG1heGltdW0gc2l6ZSBpbiBlbmNvZGVkIChTdHJpbmcpIGZvcm1cclxuICAgICAqICAgICBpcyAxLDAwMCBjaGFyYWN0ZXJzIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnRpY2tldElkPW51bGxdIEEgc3RyaW5nIHdpdGggdGlja2V0IGlkZW50aWZpZXJcclxuICAgICAqICAgICBvYnRhaW5lZCB2aWEgdGhlIHtAbGluayBSYW5kb21PcmdDbGllbnQjY3JlYXRlVGlja2V0c30gbWV0aG9kLiBTcGVjaWZ5aW5nXHJcbiAgICAgKiAgICAgYSB2YWx1ZSBmb3IgdGlja2V0SWQgd2lsbCBjYXVzZSBSQU5ET00uT1JHIHRvIHJlY29yZCB0aGF0IHRoZSB0aWNrZXQgd2FzXHJcbiAgICAgKiAgICAgdXNlZCB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMuIEVhY2ggdGlja2V0IGNhbiBvbmx5IGJlIHVzZWRcclxuICAgICAqICAgICBvbmNlIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e2RhdGE6IHN0cmluZ1tdLCByYW5kb206IE9iamVjdCwgc2lnbmF0dXJlOiBzdHJpbmd9Pn0gQVxyXG4gICAgICogICAgIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVwcmVzZW50cyBhbiBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgICBmb2xsb3dpbmcgc3RydWN0dXJlOlxyXG4gICAgICogKiAqKmRhdGEqKjogYXJyYXkgb2YgdHJ1ZSByYW5kb20gVVVJRHNcclxuICAgICAqICogKipyYW5kb20qKjogcmFuZG9tIGZpZWxkIGFzIHJldHVybmVkIGZyb20gdGhlIHNlcnZlclxyXG4gICAgICogKiAqKnNpZ25hdHVyZSoqOiBzaWduYXR1cmUgc3RyaW5nXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdlbmVyYXRlU2lnbmVkVVVJRHMobiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNVVUlEUmVxdWVzdChuLCBvcHRpb25zLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFNpZ25lZCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0IGEgbGlzdCAoc2l6ZSBuKSBvZiBCaW5hcnkgTGFyZ2UgT0JqZWN0cyAoQkxPQnMpIGNvbnRhaW5pbmcgdHJ1ZVxyXG4gICAgICogcmFuZG9tIGRhdGEgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICogXHJcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LCByZXNwcmVzZW50cyBhbiBvYmplY3RcclxuICAgICAqIHdpdGggdGhlIHBhcnNlZCBCTE9CcyBtYXBwZWQgdG8gJ2RhdGEnLCB0aGUgb3JpZ2luYWwgcmVzcG9uc2UgbWFwcGVkIHRvXHJcbiAgICAgKiAncmFuZG9tJywgYW5kIHRoZSByZXNwb25zZSdzIHNpZ25hdHVyZSBtYXBwZWQgdG8gJ3NpZ25hdHVyZScuIFNlZTpcclxuICAgICAqIGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWQjZ2VuZXJhdGVTaWduZWRCbG9ic1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIGJsb2JzIHlvdSBuZWVkLiBNdXN0IGJlIHdpdGhpbiB0aGVcclxuICAgICAqICAgICBbMSwxMDBdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgVGhlIHNpemUgb2YgZWFjaCBibG9iLCBtZWFzdXJlZCBpbiBiaXRzLiBNdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxMDQ4NTc2XSByYW5nZSBhbmQgbXVzdCBiZSBkaXZpc2libGUgYnkgOC5cclxuICAgICAqIEBwYXJhbSB7e2Zvcm1hdD86IHN0cmluZywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbj86IE9iamVjdCwgbGljZW5zZURhdGE/OlxyXG4gICAgICogICAgIE9iamVjdCwgdXNlckRhdGE/OiBPYmplY3R8bnVtYmVyfHN0cmluZywgdGlja2V0SWQ/OiBzdHJpbmd9fSBvcHRpb25zIEFuXHJcbiAgICAgKiAgICAgb2JqZWN0IHdoaWNoIG1heSBjb250YWluIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZm9ybWF0PSdiYXNlNjQnXSBTcGVjaWZpZXMgdGhlIGZvcm1hdCBpbiB3aGljaCB0aGVcclxuICAgICAqICAgICBibG9icyB3aWxsIGJlIHJldHVybmVkLiBWYWx1ZXMgYWxsb3dlZCBhcmUgJ2Jhc2U2NCcgYW5kICdoZXgnIChkZWZhdWx0XHJcbiAgICAgKiAgICAgJ2Jhc2U2NCcpLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb249bnVsbF0gQSBkaWN0aW9uYXJ5IG9iamVjdFxyXG4gICAgICogICAgIHdoaWNoIGFsbG93cyB0aGUgY2xpZW50IHRvIHNwZWNpZnkgdGhhdCB0aGUgcmFuZG9tIHZhbHVlcyBzaG91bGQgYmVcclxuICAgICAqICAgICBnZW5lcmF0ZWQgZnJvbSBhIHByZWdlbmVyYXRlZCwgaGlzdG9yaWNhbCByYW5kb21pemF0aW9uIGluc3RlYWQgb2YgYVxyXG4gICAgICogICAgIG9uZS10aW1lIG9uLXRoZS1mbHkgcmFuZG9taXphdGlvbi4gVGhlcmUgYXJlIHRocmVlIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAgICogKiAqKm51bGwqKjogVGhlIHN0YW5kYXJkIHdheSBvZiBjYWxsaW5nIGZvciByYW5kb20gdmFsdWVzLCBpLmUudHJ1ZVxyXG4gICAgICogICAgICAgcmFuZG9tbmVzcyBpcyBnZW5lcmF0ZWQgYW5kIGRpc2NhcmRlZCBhZnRlcndhcmRzLlxyXG4gICAgICogKiAqKmRhdGUqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGdlbmVyYXRlZCBvbiB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgZGF0ZSAocGFzdCBvciBwcmVzZW50LCBmb3JtYXQ6IHsgJ2RhdGUnLCAnWVlZWS1NTS1ERCcgfSkuXHJcbiAgICAgKiAqICoqaWQqKjogUkFORE9NLk9SRyB1c2VzIGhpc3RvcmljYWwgdHJ1ZSByYW5kb21uZXNzIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgICAqICAgICAgIGNvcnJlc3BvbmRpbmcgaWRlbnRpZmllciBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyLiBGb3JtYXQ6IHsgJ2lkJyxcclxuICAgICAqICAgICAgICdQRVJTSVNURU5ULUlERU5USUZJRVInIH0gd2hlcmUgJ1BFUlNJU1RFTlQtSURFTlRJRklFUicgaXMgYSBzdHJpbmdcclxuICAgICAqICAgICAgIHdpdGggbGVuZ3RoIGluIHRoZSBbMSwgNjRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmxpY2Vuc2VEYXRhPW51bGxdIEEgZGljdGlvbmFyeSBvYmplY3Qgd2hpY2ggYWxsb3dzXHJcbiAgICAgKiAgICAgdGhlIGNhbGxlciB0byBpbmNsdWRlIGRhdGEgb2YgcmVsZXZhbmNlIHRvIHRoZSBsaWNlbnNlIHRoYXQgaXMgYXNzb2NpYXRlZFxyXG4gICAgICogICAgIHdpdGggdGhlIEFQSSBLZXkuIFRoaXMgaXMgbWFuZGF0b3J5IGZvciBBUEkgS2V5cyB3aXRoIHRoZSBsaWNlbnNlIHR5cGVcclxuICAgICAqICAgICAnRmxleGlibGUgR2FtYmxpbmcnIGFuZCBmb2xsb3dzIHRoZSBmb3JtYXQgeyAnbWF4UGF5b3V0JzogeyAnY3VycmVuY3knOlxyXG4gICAgICogICAgICdYVFMnLCAnYW1vdW50JzogMC4wIH19LiBUaGlzIGluZm9ybWF0aW9uIGlzIHVzZWQgaW4gbGljZW5zaW5nXHJcbiAgICAgKiAgICAgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMgYW5kIGluIGJpbGxpbmcuIFRoZSBjdXJyZW50bHkgc3VwcG9ydGVkXHJcbiAgICAgKiAgICAgY3VycmVuY2llcyBhcmU6ICdVU0QnLCAnRVVSJywgJ0dCUCcsICdCVEMnLCAnRVRIJy4gVGhlIG1vc3QgdXAtdG8tZGF0ZVxyXG4gICAgICogICAgIGluZm9ybWF0aW9uIG9uIHRoZSBjdXJyZW5jaWVzIGNhbiBiZSBmb3VuZCBpbiB0aGUgU2lnbmVkIEFQSVxyXG4gICAgICogICAgIGRvY3VtZW50YXRpb24sIGhlcmU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWRcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8T2JqZWN0KX0gW29wdGlvbnMudXNlckRhdGE9bnVsbF0gT2JqZWN0IHRoYXQgd2lsbCBiZVxyXG4gICAgICogICAgIGluY2x1ZGVkIGluIHVubW9kaWZpZWQgZm9ybS4gSXRzIG1heGltdW0gc2l6ZSBpbiBlbmNvZGVkIChTdHJpbmcpIGZvcm0gaXNcclxuICAgICAqICAgICAxLDAwMCBjaGFyYWN0ZXJzIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnRpY2tldElkPW51bGxdIEEgc3RyaW5nIHdpdGggdGlja2V0IGlkZW50aWZpZXJcclxuICAgICAqICAgICBvYnRhaW5lZCB2aWEgdGhlIHtAbGluayBSYW5kb21PcmdDbGllbnQjY3JlYXRlVGlja2V0c30gbWV0aG9kLiBTcGVjaWZ5aW5nXHJcbiAgICAgKiAgICAgYSB2YWx1ZSBmb3IgdGlja2V0SWQgd2lsbCBjYXVzZSBSQU5ET00uT1JHIHRvIHJlY29yZCB0aGF0IHRoZSB0aWNrZXQgd2FzXHJcbiAgICAgKiAgICAgdXNlZCB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdGVkIHJhbmRvbSB2YWx1ZXMuIEVhY2ggdGlja2V0IGNhbiBvbmx5IGJlIHVzZWRcclxuICAgICAqICAgICBvbmNlIChkZWZhdWx0IG51bGwpLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e2RhdGE6IHN0cmluZ1tdLCByYW5kb206IE9iamVjdCwgc2lnbmF0dXJlOiBzdHJpbmd9Pn0gQVxyXG4gICAgICogICAgIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVwcmVzZW50cyBhbiBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgICBmb2xsb3dpbmcgc3RydWN0dXJlOlxyXG4gICAgICogKiAqKmRhdGEqKjogYXJyYXkgb2YgdHJ1ZSByYW5kb20gYmxvYnMgYXMgc3RyaW5nc1xyXG4gICAgICogKiAqKnJhbmRvbSoqOiByYW5kb20gZmllbGQgYXMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgKiAqICoqc2lnbmF0dXJlKio6IHNpZ25hdHVyZSBzdHJpbmdcclxuICAgICAqIEBzZWUge0BsaW5rIFJhbmRvbU9yZ0NsaWVudCNCTE9CX0ZPUk1BVF9CQVNFNjR9IGZvciAnYmFzZTY0JyAoZGVmYXVsdCkuXHJcbiAgICAgKiBAc2VlIHtAbGluayBSYW5kb21PcmdDbGllbnQjQkxPQl9GT1JNQVRfSEVYfSBmb3IgJ2hleCcuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdlbmVyYXRlU2lnbmVkQmxvYnMobiwgc2l6ZSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNibG9iUmVxdWVzdChuLCBzaXplLCBvcHRpb25zLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFNpZ25lZCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT1RIRVIgTUVUSE9EU1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmVyaWZpZXMgdGhlIHNpZ25hdHVyZSBvZiBhIHJlc3BvbnNlIHByZXZpb3VzbHkgcmVjZWl2ZWQgZnJvbSBvbmUgb2YgdGhlXHJcbiAgICAgKiBtZXRob2RzIGluIHRoZSBTaWduZWQgQVBJIHdpdGggdGhlIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGV4YW1pbmUgdGhlIGF1dGhlbnRpY2l0eSBvZiBudW1iZXJzLiBSZXR1cm5zIFRydWUgb25cclxuICAgICAqIHZlcmlmaWNhdGlvbiBzdWNjZXNzLiBTZWU6XHJcbiAgICAgKiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvc2lnbmVkI3ZlcmlmeVNpZ25hdHVyZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJhbmRvbSBUaGUgcmFuZG9tIGZpZWxkIGZyb20gYSByZXNwb25zZSByZXR1cm5lZCBieSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgdGhyb3VnaCBvbmUgb2YgdGhlIFNpZ25lZCBBUEkgbWV0aG9kcy5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzaWduYXR1cmUgVGhlIHNpZ25hdHVyZSBmaWVsZCBmcm9tIHRoZSBzYW1lIHJlc3BvbnNlIHRoYXRcclxuICAgICAqICAgICB0aGUgcmFuZG9tIGZpZWxkIG9yaWdpbmF0ZXMgZnJvbS5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSxcclxuICAgICAqICAgICByZXByZXNlbnRzIHdoZXRoZXIgdGhlIHJlc3VsdCBjb3VsZCBiZSB2ZXJpZmllZCAodHJ1ZSkgb3Igbm90IChmYWxzZSkuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeVNpZ25hdHVyZShyYW5kb20sIHNpZ25hdHVyZSkge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHJhbmRvbTogcmFuZG9tLFxyXG4gICAgICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNnZW5lcmF0ZVJlcXVlc3QoUmFuZG9tT3JnQ2xpZW50LiNWRVJJRllfU0lHTkFUVVJFX01FVEhPRCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFZlcmlmaWNhdGlvbih0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSAoZXN0aW1hdGVkKSBudW1iZXIgb2YgcmVtYWluaW5nIHRydWUgcmFuZG9tIGJpdHMgYXZhaWxhYmxlIHRvXHJcbiAgICAgKiB0aGUgY2xpZW50LiBJZiBjYWNoZWQgdXNhZ2UgaW5mbyBpcyBvbGRlciB0aGFuIGFuIGhvdXIsIGZyZXNoIGluZm8gaXNcclxuICAgICAqIG9idGFpbmVkIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPG51bWJlcj59IEEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LFxyXG4gICAgICogICAgIHJlcHJlc2VudHMgdGhlIG51bWJlciBvZiBiaXRzIHJlbWFpbmluZy5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1NlbmRUaW1lb3V0RXJyb3J9IFRocm93biB3aGVuIGJsb2NraW5nIHRpbWVvdXQgaXMgZXhjZWVkZWRcclxuICAgICAqICAgICBiZWZvcmUgdGhlIHJlcXVlc3QgY2FuIGJlIHNlbnQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdLZXlOb3RSdW5uaW5nRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5IGhhcyBiZWVuXHJcbiAgICAgKiAgICAgc3RvcHBlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudFJlcXVlc3RzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgcmVxdWVzdHMgYWxsb3dhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50Qml0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIGJpdHMgYWxsb3dhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3J9IFRocm93biB3aGVuIGEgSFRUUCAyMDAgT0sgcmVzcG9uc2VcclxuICAgICAqICAgICBpcyBub3QgcmVjZWl2ZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdSQU5ET01PUkdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgUkFORE9NLk9SR1xyXG4gICAgICogICAgIEVycm9yLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSlNPTlJQQ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBKU09OLVJQQyBFcnJvci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0Qml0c0xlZnQoKSB7XHJcbiAgICAgICAgbGV0IHVwZGF0ZSA9IERhdGUubm93KCkgPiAodGhpcy4jbGFzdFJlc3BvbnNlUmVjZWl2ZWRUaW1lICsgUmFuZG9tT3JnQ2xpZW50LiNBTExPV0FOQ0VfU1RBVEVfUkVGUkVTSF9TRUNPTkRTKTtcclxuICAgICAgICBpZiAodGhpcy4jYml0c0xlZnQgPCAwIHx8IHVwZGF0ZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNnZXRVc2FnZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy4jYml0c0xlZnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSAoZXN0aW1hdGVkKSBudW1iZXIgb2YgcmVtYWluaW5nIEFQSSByZXF1ZXN0cyBhdmFpbGFibGUgdG8gdGhlXHJcbiAgICAgKiBjbGllbnQuIElmIGNhY2hlZCB1c2FnZSBpbmZvIGlzIG9sZGVyIHRoYW4gYW4gaG91ciwgZnJlc2ggaW5mbyBpc1xyXG4gICAgICogb2J0YWluZWQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gQSBQcm9taXNlIHdoaWNoLCBpZiByZXNvbHZlZCBzdWNjZXNzZnVsbHksXHJcbiAgICAgKiAgICAgcmVwcmVzZW50cyB0aGUgbnVtYmVyIG9mIHJlcXVlc3RzIHJlbWFpbmluZy5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1NlbmRUaW1lb3V0RXJyb3J9IFRocm93biB3aGVuIGJsb2NraW5nIHRpbWVvdXQgaXMgZXhjZWVkZWRcclxuICAgICAqICAgICBiZWZvcmUgdGhlIHJlcXVlc3QgY2FuIGJlIHNlbnQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdLZXlOb3RSdW5uaW5nRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5IGhhcyBiZWVuXHJcbiAgICAgKiAgICAgc3RvcHBlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudFJlcXVlc3RzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgcmVxdWVzdHMgYWxsb3dhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50Qml0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIGJpdHMgYWxsb3dhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3J9IFRocm93biB3aGVuIGEgSFRUUCAyMDAgT0sgcmVzcG9uc2VcclxuICAgICAqICAgICBpcyBub3QgcmVjZWl2ZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdSQU5ET01PUkdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgUkFORE9NLk9SR1xyXG4gICAgICogICAgIEVycm9yLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSlNPTlJQQ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBKU09OLVJQQyBFcnJvci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0UmVxdWVzdHNMZWZ0KCkge1xyXG4gICAgICAgIGxldCB1cGRhdGUgPSBEYXRlLm5vdygpID4gKHRoaXMuI2xhc3RSZXNwb25zZVJlY2VpdmVkVGltZSArIFJhbmRvbU9yZ0NsaWVudC4jQUxMT1dBTkNFX1NUQVRFX1JFRlJFU0hfU0VDT05EUyk7XHJcbiAgICAgICAgaWYgKHRoaXMuI3JlcXVlc3RzTGVmdCA8IDAgfHwgdXBkYXRlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2dldFVzYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNyZXF1ZXN0c0xlZnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgc2lnbmVkIHJhbmRvbSB2YWx1ZXMgZ2VuZXJhdGVkIHdpdGhpbiB0aGUgbGFzdCAyNGgsIHVzaW5nIGFcclxuICAgICAqIHNlcmlhbCBudW1iZXIuXHJcbiAgICAgKiBcclxuICAgICAqIElmIHRoZSBoaXN0b3JpY2FsIHJlc3BvbnNlIHdhcyBmb3VuZCwgdGhlIHJlc3BvbnNlIHdpbGwgY29udGFpbiB0aGUgc2FtZVxyXG4gICAgICogdmFsdWVzIHRoYXQgd2VyZSByZXR1cm5lZCBieSB0aGUgbWV0aG9kIHRoYXQgd2FzIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHZhbHVlc1xyXG4gICAgICogaW5pdGlhbGx5LiBTZWU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWQjZ2V0UmVzdWx0XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2VyaWFsTnVtYmVyIEFuIGludGVnZXIgY29udGFpbmluZyB0aGUgc2VyaWFsIG51bWJlclxyXG4gICAgICogICAgIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVzcG9uc2UgeW91IHdpc2ggdG8gcmV0cmlldmUuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSxcclxuICAgICAqICAgICByZXByZXNlbnRzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlLCBpZGVudGljYWwgdG8gdGhhdFxyXG4gICAgICogICAgIHJldHVybmVkIGJ5IHRoZSBvcmlnaW5hbCByZXF1ZXN0OlxyXG4gICAgICogKiAqKmRhdGEqKjogYXJyYXkgb2YgdHJ1ZSByYW5kb20gdmFsdWVzXHJcbiAgICAgKiAqICoqcmFuZG9tKio6IHJhbmRvbSBmaWVsZCBhcyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAqICogKipzaWduYXR1cmUqKjogc2lnbmF0dXJlIHN0cmluZ1xyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRSZXN1bHQoc2VyaWFsTnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiBzZXJpYWxOdW1iZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jZ2VuZXJhdGVLZXllZFJlcXVlc3QoUmFuZG9tT3JnQ2xpZW50LiNHRVRfUkVTVUxUX01FVEhPRCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFNpZ25lZCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBOZXdUaWNrZXQgQSB0aWNrZXQgYXMgaXQgaXMgcmV0dXJuZWQgYnkgdGhlIGNyZWF0ZVRpY2tldHMoKSBtZXRob2QuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gdGlja2V0SWQgQSBzdHJpbmcgdmFsdWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSB0aWNrZXQuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3JlYXRpb25UaW1lIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHRpbWVzdGFtcCBpbiBJU08gODYwMVxyXG4gICAgICogICAgIGZvcm1hdCBhdCB3aGljaCB0aGUgdGlja2V0IHdhcyBjcmVhdGVkLlxyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHByZXZpb3VzVGlja2V0SWQgVGhlIHByZXZpb3VzIHRpY2tldCBpbiB0aGUgY2hhaW4gdG8gd2hpY2ggdGhpc1xyXG4gICAgICogICAgIHRpY2tldCBiZWxvbmdzLiBTaW5jZSBhIG5ldyBjaGFpbiBvbmx5IGNvbnRhaW5zIG9uZSB0aWNrZXQsIHByZXZpb3VzVGlja2V0SWQgd2lsbFxyXG4gICAgICogICAgIGJlIG51bGwuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gbmV4dFRpY2tldElkIEEgc3RyaW5nIHZhbHVlIHRoYXQgaWRlbnRpZmllcyB0aGUgbmV4dCB0aWNrZXQgaW5cclxuICAgICAqICAgICB0aGUgY2hhaW4uIFNpbmNlIGEgbmV3IGNoYWluIG9ubHkgY29udGFpbnMgb25lIHRpY2tldCwgbmV4dFRpY2tldElkIHdpbGwgYmUgbnVsbC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGVkZWYge09iamVjdH0gVGlja2V0IEEgdGlja2V0IGFzIGl0IGlzIHJldHVybmVkIGJ5IHRoZSBsaXN0VGlja2V0cygpIGFuZFxyXG4gICAgICogICAgIGdldFRpY2tldCgpIG1ldGhvZHMuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gdGlja2V0SWQgQSBzdHJpbmcgdmFsdWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSB0aWNrZXQuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gaGFzaGVkQXBpS2V5IFRoZSBoYXNoZWQgQVBJIGtleSBmb3Igd2hpY2ggdGhlIHRpY2tldCBpcyB2YWxpZC5cclxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc2hvd1Jlc3VsdCBJZiBmYWxzZSwgZ2V0VGlja2V0KCkgd2lsbCByZXR1cm4gb25seSB0aGUgYmFzaWNcclxuICAgICAqICAgICB0aWNrZXQgaW5mb3JtYXRpb24uIElmIHRydWUsIHRoZSBmdWxsIHJhbmRvbSBhbmQgc2lnbmF0dXJlIG9iamVjdHMgZnJvbSB0aGVcclxuICAgICAqICAgICByZXNwb25zZSB0aGF0IHdhcyB1c2VkIHRvIHNhdGlzZnkgdGhlIHRpY2tldCBpcyByZXR1cm5lZC4gRm9yIG1vcmUgaW5mb3JtYXRpb24sXHJcbiAgICAgKiAgICAgcGxlYXNlIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgZ2V0VGlja2V0LlxyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGNyZWF0aW9uVGltZSBUaGUgdGltZXN0YW1wIGluIElTTyA4NjAxIGZvcm1hdCBhdCB3aGljaCB0aGUgdGlja2V0XHJcbiAgICAgKiAgICAgd2FzIGNyZWF0ZWQuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gdXNlZFRpbWUgVGhlIHRpbWVzdGFtcCBpbiBJU08gODYwMSBmb3JtYXQgYXQgd2hpY2ggdGhlIHRpY2tldCB3YXNcclxuICAgICAqICAgICB1c2VkLiBJZiB0aGUgdGlja2V0IGhhcyBub3QgYmVlbiB1c2VkIHlldCwgdGhpcyB2YWx1ZSBpcyBudWxsLlxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHNlcmlhbE51bWJlciBBIG51bWVyaWMgdmFsdWUgaW5kaWNhdGluZyB3aGljaCBzZXJpYWwgbnVtYmVyXHJcbiAgICAgKiAgICAgKHdpdGhpbiB0aGUgQVBJIGtleSB1c2VkIHRvIHNlcnZlIHRoZSB0aWNrZXQpIHdhcyB1c2VkIGZvciB0aGUgdGlja2V0LiBJZiB0aGVcclxuICAgICAqICAgICBjYWxsZXIgaGFzIHRoZSB1bmhhc2hlZCBBUEkga2V5LCB0aGV5IGNhbiB1c2UgdGhlIHNlcmlhbE51bWJlciByZXR1cm5lZCB0byBvYnRhaW5cclxuICAgICAqICAgICB0aGUgZnVsbCByZXN1bHQgdmlhIHRoZSBnZXRSZXN1bHQgbWV0aG9kLiBJZiB0aGUgdGlja2V0IGhhcyBub3QgYmVlbiB1c2VkIHlldCxcclxuICAgICAqICAgICB0aGlzIHZhbHVlIGlzIG51bGwuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gZXhwaXJhdGlvblRpbWUgVGhlIHRpbWVzdGFtcCBpbiBJU08gODYwMSBmb3JtYXQgYXQgd2hpY2ggdGhlIHRpY2tldFxyXG4gICAgICogICAgIGV4cGlyZXMuIElmIHRoZSB0aWNrZXQgaGFzIG5vdCBiZWVuIHVzZWQgeWV0LCB0aGlzIHZhbHVlIGlzIG51bGwuXHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gcHJldmlvdXNUaWNrZXRJZCBUaGUgcHJldmlvdXMgdGlja2V0IGluIHRoZSBjaGFpbiB0byB3aGljaCB0aGlzXHJcbiAgICAgKiAgICAgdGlja2V0IGJlbG9uZ3MuIElmIHRoZSB0aWNrZXQgaXMgdGhlIGZpcnN0IGluIGl0cyBjaGFpbiwgdGhlbiBwcmV2aW91c1RpY2tldElkIGlzXHJcbiAgICAgKiAgICAgbnVsbC5cclxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuZXh0VGlja2V0SWQgQSBzdHJpbmcgdmFsdWUgdGhhdCBpZGVudGlmaWVzIHRoZSBuZXh0XHJcbiAgICAgKiAgICAgdGlja2V0IGluIHRoZSBjaGFpbi5cclxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbcmVzdWx0XSBUaGUgc2FtZSBvYmplY3QgdGhhdCB3YXMgcmV0dXJuZWQgYnkgdGhlIG1ldGhvZCB0aGF0IHdhc1xyXG4gICAgICogICAgIG9yaWdpbmFsbHkgdXNlZCB0byBnZW5lcmF0ZSB0aGUgdmFsdWVzLlxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIG4gdGlja2V0cyB0byBiZSB1c2VkIGluIHNpZ25lZCB2YWx1ZS1nZW5lcmF0aW5nIG1ldGhvZHMuXHJcbiAgICAgKiAgXHJcbiAgICAgKiBTZWU6IGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9zaWduZWQjY3JlYXRlVGlja2V0c1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aWNrZXRzIHJlcXVlc3RlZC4gVGhpcyBtdXN0IGJlIGEgbnVtYmVyXHJcbiAgICAgKiAgICAgaW4gdGhlIFsxLCA1MF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dSZXN1bHQgQSBib29sZWFuIHZhbHVlIHRoYXQgZGV0ZXJtaW5lcyBob3cgbXVjaFxyXG4gICAgICogICAgIGluZm9ybWF0aW9uIGNhbGxzIHRvIHtAbGluayBnZXRUaWNrZXR9IHdpbGwgcmV0dXJuLlxyXG4gICAgICogKiAqKmZhbHNlKio6IGdldFRpY2tldCB3aWxsIHJldHVybiBvbmx5IHRoZSBiYXNpYyB0aWNrZXQgaW5mb3JtYXRpb24uXHJcbiAgICAgKiAqICoqdHJ1ZSoqOiB0aGUgZnVsbCByYW5kb20gYW5kIHNpZ25hdHVyZSBvYmplY3RzIGZyb20gdGhlIHJlc3BvbnNlIHRoYXRcclxuICAgICAqICAgICB3YXMgdXNlZCB0byBzYXRpc2Z5IHRoZSB0aWNrZXQgaXMgcmV0dXJuZWQuIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8TmV3VGlja2V0W10+fSBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSxcclxuICAgICAqICAgICByZXByZXNlbnRzIGFuIGFycmF5IG9mIHRpY2tldCBvYmplY3RzIHdpdGggdGhlIGZvbGxvd2luZyBzdHJ1Y3R1cmU6XHJcbiAgICAgKiAqICoqdGlja2V0SWQqKjogQSBzdHJpbmcgdmFsdWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSB0aWNrZXQuXHJcbiAgICAgKiAqICoqY3JlYXRpb25UaW1lKio6IFRoZSB0aW1lIHdoZW4gdGhlIHRpY2tldCB3YXMgY3JlYXRlZCAoSVNPIDg2MDEgZm9ybWF0KS5cclxuICAgICAqICogKipuZXh0VGlja2V0SWQqKjogQSBzdHJpbmcgcG9pbnRpbmcgdG8gdGhlIG5leHQgdGlja2V0IGluIHRoZSBjaGFpbi5cclxuICAgICAqICAgICBUaGlzIHdpbGwgYmUgbnVsbCwgYXMgdGhlIHRpY2tldHMgcmV0dXJuZWQgZnJvbSB0aGlzIG1ldGhvZCBhcmUgdGhlXHJcbiAgICAgKiAgICAgZmlyc3QgaW4gdGhlaXIgcmVzcGVjdGl2ZSBjaGFpbnMuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGNyZWF0ZVRpY2tldHMobiwgc2hvd1Jlc3VsdCkge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIG46IG4sXHJcbiAgICAgICAgICAgIHNob3dSZXN1bHQ6IHNob3dSZXN1bHRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jZ2VuZXJhdGVLZXllZFJlcXVlc3QoUmFuZG9tT3JnQ2xpZW50LiNDUkVBVEVfVElDS0VUX01FVEhPRCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFJlc3VsdCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRpY2tldHMgbGlua2VkIHdpdGggeW91ciBBUEkga2V5LlxyXG4gICAgICogXHJcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdGlja2V0cyB0aGF0IGNhbiBiZSByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBpcyAyMDAwLlxyXG4gICAgICogU2VlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL2pzb24tcnBjLzQvc2lnbmVkI2xpc3RUaWNrZXRzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGlja2V0VHlwZSBBIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIG9mIHRpY2tldHMgeW91IHdhbnRcclxuICAgICAqICAgICB0byBvYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQuIFBvc3NpYmxlIHZhbHVlcyBhcmUgJ3NpbmdsZXRvbicsICdoZWFkJ1xyXG4gICAgICogICAgIGFuZCAndGFpbCcuXHJcbiAgICAgKiAqICoqJ3NpbmdsZXRvbicqKiByZXR1cm5zIHRpY2tldHMgdGhhdCBoYXZlIG5vIHByZXZpb3VzIG9yIG5leHQgdGlja2V0cy5cclxuICAgICAqICogKionaGVhZCcqKiByZXR1cm5zIHRpY2tldHMgaGF0IGRvIG5vdCBoYXZlIGEgcHJldmlvdXMgdGlja2V0IGJ1dCB0aGF0IGRvXHJcbiAgICAgKiAgICAgaGF2ZSBhIG5leHQgdGlja2V0LlxyXG4gICAgICogKiAqKid0YWlsJyoqIHJldHVybnMgdGlja2V0cyB0aGF0IGhhdmUgYSBwcmV2aW91cyB0aWNrZXQgYnV0IGRvIG5vdCBoYXZlIGFcclxuICAgICAqICAgICAgIG5leHQgdGlja2V0LlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VGlja2V0W10+fSBBIFByb21pc2Ugd2hpY2gsIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSxcclxuICAgICAqICAgICByZXByZXNlbnRzIGFuIGFycmF5IG9mIHRpY2tldCBvYmplY3RzLCBhcyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKiAgICAgKipOT1RFOioqIFRoZSBvYmplY3RzIHJldHVybmVkIGZyb20gdGhpcyBtZXRob2QgZG8gbm90IGNvbnRhaW4gXCJyZXN1bHRcIlxyXG4gICAgICogICAgIGZpZWxkcywgZXZlbiBpZiB0aWNrZXRzIHdlcmUgY3JlYXRlZCB3aXRoIFwic2hvd1Jlc3VsdFwiIHNldCB0byB0cnVlLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBsaXN0VGlja2V0cyh0aWNrZXRUeXBlKSB7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgdGlja2V0VHlwZTogdGlja2V0VHlwZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNnZW5lcmF0ZUtleWVkUmVxdWVzdChSYW5kb21PcmdDbGllbnQuI0xJU1RfVElDS0VUX01FVEhPRCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFJlc3VsdCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IGEgc2luZ2xlIHRpY2tldCB1c2luZyB0aGUgdGlja2V0SWQgYXNzb2NpYXRlZFxyXG4gICAgICogd2l0aCBpdC5cclxuICAgICAqICBcclxuICAgICAqIElmIHRoZSB0aWNrZXQgaGFzIHNob3dSZXN1bHQgc2V0IHRvIHRydWUgYW5kIGhhcyBiZWVuIHVzZWQsIHRoaXMgbWV0aG9kXHJcbiAgICAgKiB3aWxsIHJldHVybiB0aGUgdmFsdWVzIGdlbmVyYXRlZC5cclxuICAgICAqIFNlZTogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L3NpZ25lZCNnZXRUaWNrZXRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aWNrZXRJZCBBIHN0cmluZyBjb250YWluaW5nIGEgdGlja2V0IGlkZW50aWZpZXIgcmV0dXJuZWRcclxuICAgICAqICAgICBieSBhIHByaW9yIGNhbGwgdG8gdGhlIHtAbGluayBjcmVhdGVUaWNrZXRzfSBtZXRob2QuIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VGlja2V0Pn0gQSBQcm9taXNlIHdoaWNoLCBpZiByZXNvbHZlZCBzdWNjZXNzZnVsbHksXHJcbiAgICAgKiAgICAgcmVwcmVzZW50cyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uOlxyXG4gICAgICogKiAqKnRpY2tldElkKio6IEEgc3RyaW5nIHZhbHVlIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgdGlja2V0LlxyXG4gICAgICogKiAqKmhhc2hlZEFwaUtleSoqOiBUaGUgaGFzaGVkIEFQSSBrZXkgZm9yIHdoaWNoIHRoZSB0aWNrZXQgaXMgdmFsaWQuXHJcbiAgICAgKiAqICoqc2hvd1Jlc3VsdCoqOiBJZiBmYWxzZSwgZ2V0VGlja2V0KCkgd2lsbCByZXR1cm4gb25seSB0aGUgYmFzaWNcclxuICAgICAqICAgICB0aWNrZXQgaW5mb3JtYXRpb24uIElmIHRydWUsIHRoZSBmdWxsIHJhbmRvbSBhbmQgc2lnbmF0dXJlIG9iamVjdHNcclxuICAgICAqICAgICBmcm9tIHRoZSByZXNwb25zZSB0aGF0IHdhcyB1c2VkIHRvIHNhdGlzZnkgdGhlIHRpY2tldCBpcyByZXR1cm5lZC5cclxuICAgICAqICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgZ2V0VGlja2V0LlxyXG4gICAgICogKiAqKmNyZWF0aW9uVGltZSoqOiBUaGUgdGltZXN0YW1wIGluIElTTyA4NjAxIGZvcm1hdCBhdCB3aGljaCB0aGUgdGlja2V0XHJcbiAgICAgKiAgICAgd2FzIGNyZWF0ZWQuXHJcbiAgICAgKiAqICoqdXNlZFRpbWUqKiBUaGUgdGltZXN0YW1wIGluIElTTyA4NjAxIGZvcm1hdCBhdCB3aGljaCB0aGUgdGlja2V0IHdhc1xyXG4gICAgICogICAgIHVzZWQuIElmIHRoZSB0aWNrZXQgaGFzIG5vdCBiZWVuIHVzZWQgeWV0LCB0aGlzIHZhbHVlIGlzIG51bGwuXHJcbiAgICAgKiAqICoqc2VyaWFsTnVtYmVyKio6IEEgbnVtZXJpYyB2YWx1ZSBpbmRpY2F0aW5nIHdoaWNoIHNlcmlhbCBudW1iZXIgKHdpdGhpblxyXG4gICAgICogICAgIHRoZSBBUEkga2V5IHVzZWQgdG8gc2VydmUgdGhlIHRpY2tldCkgd2FzIHVzZWQgZm9yIHRoZSB0aWNrZXQuIElmIHRoZVxyXG4gICAgICogICAgIGNhbGxlciBoYXMgdGhlIHVuaGFzaGVkIEFQSSBrZXksIHRoZXkgY2FuIHVzZSB0aGUgc2VyaWFsTnVtYmVyIHJldHVybmVkXHJcbiAgICAgKiAgICAgdG8gb2J0YWluIHRoZSBmdWxsIHJlc3VsdCB2aWEgdGhlIGdldFJlc3VsdCBtZXRob2QuIElmIHRoZSB0aWNrZXQgaGFzXHJcbiAgICAgKiAgICAgbm90IGJlZW4gdXNlZCB5ZXQsIHRoaXMgdmFsdWUgaXMgbnVsbC5cclxuICAgICAqICogKipleHBpcmF0aW9uVGltZSoqOiBUaGUgdGltZXN0YW1wIGluIElTTyA4NjAxIGZvcm1hdCBhdCB3aGljaCB0aGUgdGlja2V0XHJcbiAgICAgKiAgICAgZXhwaXJlcy4gSWYgdGhlIHRpY2tldCBoYXMgbm90IGJlZW4gdXNlZCB5ZXQsIHRoaXMgdmFsdWUgaXMgbnVsbC5cclxuICAgICAqICogKipwcmV2aW91c1RpY2tldElkKio6IFRoZSBwcmV2aW91cyB0aWNrZXQgaW4gdGhlIGNoYWluIHRvIHdoaWNoIHRoaXMgdGlja2V0XHJcbiAgICAgKiAgICAgYmVsb25ncy4gSWYgdGhlIHRpY2tldCBpcyB0aGUgZmlyc3QgaW4gaXRzIGNoYWluLCB0aGVuIHByZXZpb3VzVGlja2V0SWQgaXNcclxuICAgICAqICAgICBudWxsLlxyXG4gICAgICogKiAqKm5leHRUaWNrZXRJZCoqIEEgc3RyaW5nIHZhbHVlIHRoYXQgaWRlbnRpZmllcyB0aGUgbmV4dFxyXG4gICAgICogICAgIHRpY2tldCBpbiB0aGUgY2hhaW4uXHJcbiAgICAgKiBcclxuICAgICAqICAgICBJZiBzaG93UmVzdWx0IHdhcyBzZXQgdG8gdHJ1ZSB3aGVuIHRoZSB0aWNrZXQgd2FzIGNyZWF0ZWQsXHJcbiAgICAgKiAgICAgdGhlIGZvbGxvd2luZyBmaWVsZCB3aWxsIGFsc28gYmUgYWRkZWQ6XHJcbiAgICAgKiAqICoqcmVzdWx0KiogVGhlIHNhbWUgb2JqZWN0IHRoYXQgd2FzIHJldHVybmVkIGJ5IHRoZSBtZXRob2QgdGhhdCB3YXMgb3JpZ2luYWxseVxyXG4gICAgICogICAgIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHZhbHVlcy4gVGhpcyBpbmNsdWRlcyB0aGUgcmFuZG9tIGZpZWxkIHdoaWNoIGNvbnRhaW5zIHRoZVxyXG4gICAgICogICAgIGRhdGEgcHJvcGVydHksIGFuZCBhIHNpZ25hdHVyZSBmaWVsZCwgcmVxdWlyZWQgdG8gdmVyaWZ5IHRoZSByZXN1bHQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdTZW5kVGltZW91dEVycm9yfSBUaHJvd24gd2hlbiBibG9ja2luZyB0aW1lb3V0IGlzIGV4Y2VlZGVkXHJcbiAgICAgKiAgICAgYmVmb3JlIHRoZSByZXF1ZXN0IGNhbiBiZSBzZW50LlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSBoYXMgYmVlblxyXG4gICAgICogICAgIHN0b3BwZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgQVBJIGtleSdzIHNlcnZlclxyXG4gICAgICogICAgIHJlcXVlc3RzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICBiaXRzIGFsbG93YW5jZSBoYXMgYmVlbiBleGNlZWRlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yfSBUaHJvd24gd2hlbiBhIEhUVFAgMjAwIE9LIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgaXMgbm90IHJlY2VpdmVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnUkFORE9NT1JHRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIFJBTkRPTS5PUkdcclxuICAgICAqICAgICBFcnJvci5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0pTT05SUENFcnJvcn0gVGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGEgSlNPTi1SUEMgRXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldFRpY2tldCh0aWNrZXRJZCkge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHRpY2tldElkOiB0aWNrZXRJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNnZW5lcmF0ZVJlcXVlc3QoUmFuZG9tT3JnQ2xpZW50LiNHRVRfVElDS0VUX01FVEhPRCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZXh0cmFjdFJlc3VsdCh0aGlzLiNzZW5kUmVxdWVzdChyZXF1ZXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhlIFVSTCBmb3IgdGhlIHNpZ25hdHVyZSB2ZXJpZmljYXRpb24gcGFnZSBvZiBhIHJlc3BvbnNlIHByZXZpb3VzbHlcclxuICAgICAqIHJlY2VpdmVkIGZyb20gb25lIG9mIHRoZSBtZXRob2RzIGluIHRoZSBTaWduZWQgQVBJIHdpdGggdGhlIHNlcnZlci4gVGhlXHJcbiAgICAgKiB3ZWItcGFnZSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBVUkwgd2lsbCBjb250YWluIHRoZSBkZXRhaWxzIG9mIHRoZSByZXNwb25zZVxyXG4gICAgICogdXNlZCBpbiB0aGlzIG1ldGhvZCwgcHJvdmlkZWQgdGhhdCB0aGUgc2lnbmF0dXJlIGNhbiBiZSB2ZXJpZmllZC4gVGhpc1xyXG4gICAgICogVVJMIGlzIGFsc28gc2hvd24gdW5kZXIgXCJTaG93IFRlY2huaWNhbCBEZXRhaWxzXCIgd2hlbiB0aGUgb25saW5lIFNpZ25hdHVyZVxyXG4gICAgICogVmVyaWZpY2F0aW9uIEZvcm0gaXMgdXNlZCB0byB2YWxpZGF0ZSBhIHNpZ25hdHVyZS4gU2VlOlxyXG4gICAgICogaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9zaWduYXR1cmVzL2Zvcm1cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByYW5kb20gVGhlIHJhbmRvbSBmaWVsZCBmcm9tIGEgcmVzcG9uc2UgcmV0dXJuZWQgYnlcclxuICAgICAqICAgICBSQU5ET00uT1JHIHRocm91Z2ggb25lIG9mIHRoZSBTaWduZWQgQVBJIG1ldGhvZHMuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2lnbmF0dXJlIFRoZSBzaWduYXR1cmUgZmllbGQgZnJvbSB0aGUgc2FtZSByZXNwb25zZVxyXG4gICAgICogICAgIHRoYXQgdGhlIHJhbmRvbSBmaWVsZCBvcmlnaW5hdGVzIGZyb20uXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyBjb250YWluaW5nIHRoZSBzaWduYXR1cmUgdmVyaWZpY2F0aW9uIFVSTC5cclxuICAgICAqIEB0aHJvd3MgUmFuZG9tT3JnUkFORE9NT1JHRXJyb3Igd2hlbiB0aGUgVVJMIGlzIHRvbyBsb25nIChtYXguIDIsMDQ2XHJcbiAgICAgKiAgICAgY2hhcmFjdGVycykuXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZVVybChyYW5kb20sIHNpZ25hdHVyZSkge1xyXG4gICAgICAgIGxldCBmb3JtYXR0ZWRSYW5kb20gPSB0aGlzLiNmb3JtYXRVcmwoSlNPTi5zdHJpbmdpZnkocmFuZG9tKSk7XHJcbiAgICAgICAgbGV0IGZvcm1hdHRlZFNpZ25hdHVyZSA9IHRoaXMuI2Zvcm1hdFVybChzaWduYXR1cmUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9zaWduYXR1cmVzL2Zvcm0/Zm9ybWF0PWpzb24nOyAgICBcclxuICAgICAgICB1cmwgKz0gJyZyYW5kb209JyArIGZvcm1hdHRlZFJhbmRvbTtcclxuICAgICAgICB1cmwgKz0gJyZzaWduYXR1cmU9JyArIGZvcm1hdHRlZFNpZ25hdHVyZTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodXJsLmxlbmd0aCA+IFJhbmRvbU9yZ0NsaWVudC5NQVhfVVJMX0xFTkdUSCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZG9tT3JnUkFORE9NT1JHRXJyb3IoJ0Vycm9yOiBVUkwgZXhjZWVkcyBtYXhpbXVtIGxlbmd0aCdcclxuICAgICAgICAgICAgICAgICsgJygnICsgUmFuZG9tT3JnQ2xpZW50Lk1BWF9VUkxfTEVOR1RIICsgJyBjaGFyYWN0ZXJzKS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGUgSFRNTCBmb3JtIGZvciB0aGUgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBwYWdlIG9mIGEgcmVzcG9uc2VcclxuICAgICAqIHByZXZpb3VzbHkgcmVjZWl2ZWQgZnJvbSBvbmUgb2YgdGhlIG1ldGhvZHMgaW4gdGhlIFNpZ25lZCBBUEkgd2l0aCB0aGVcclxuICAgICAqIHNlcnZlci4gVGhlIHdlYi1wYWdlIGFjY2Vzc2libGUgZnJvbSB0aGUgXCJWYWxpZGF0ZVwiIGJ1dHRvbiBjcmVhdGVkIHdpbGxcclxuICAgICAqIGNvbnRhaW4gdGhlIGRldGFpbHMgb2YgdGhlIHJlc3BvbnNlIHVzZWQgaW4gdGhpcyBtZXRob2QsIHByb3ZpZGVkIHRoYXRcclxuICAgICAqIHRoZSBzaWduYXR1cmUgY2FuIGJlIHZlcmlmaWVkLiBUaGUgc2FtZSBIVE1MIGZvcm0gaXMgYWxzbyBzaG93biB1bmRlclxyXG4gICAgICogXCJTaG93IFRlY2huaWNhbCBEZXRhaWxzXCIgd2hlbiB0aGUgb25saW5lIFNpZ25hdHVyZSBWZXJpZmljYXRpb24gRm9ybSBpc1xyXG4gICAgICogdXNlZCB0byB2YWxpZGF0ZSBhIHNpZ25hdHVyZS4gU2VlOiBodHRwczovL2FwaS5yYW5kb20ub3JnL3NpZ25hdHVyZXMvZm9ybVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJhbmRvbSBUaGUgcmFuZG9tIGZpZWxkIGZyb20gYSByZXNwb25zZSByZXR1cm5lZCBieVxyXG4gICAgICogICAgIFJBTkRPTS5PUkcgdGhyb3VnaCBvbmUgb2YgdGhlIFNpZ25lZCBBUEkgbWV0aG9kcy5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzaWduYXR1cmUgVGhlIHNpZ25hdHVyZSBmaWVsZCBmcm9tIHRoZSBzYW1lIHJlc3BvbnNlXHJcbiAgICAgKiAgICAgdGhhdCB0aGUgcmFuZG9tIGZpZWxkIG9yaWdpbmF0ZXMgZnJvbS5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvZGUgZm9yIHRoZSBIVE1MIGZvcm0uXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUh0bWwocmFuZG9tLCBzaWduYXR1cmUpIHtcclxuICAgICAgICBsZXQgcyA9ICc8Zm9ybSBhY3Rpb249XFwnaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9zaWduYXR1cmVzL2Zvcm1cXCcgbWV0aG9kPVxcJ3Bvc3RcXCc+XFxuJztcclxuICAgICAgICBzICs9ICcgICcgKyB0aGlzLiNpbnB1dEhUTUwoJ2hpZGRlbicsICdmb3JtYXQnLCAnanNvbicpICsgJ1xcbic7XHJcbiAgICAgICAgcyArPSAnICAnICsgdGhpcy4jaW5wdXRIVE1MKCdoaWRkZW4nLCAncmFuZG9tJywgSlNPTi5zdHJpbmdpZnkocmFuZG9tKSkgKyAnXFxuJztcclxuICAgICAgICBzICs9ICcgICcgKyB0aGlzLiNpbnB1dEhUTUwoJ2hpZGRlbicsICdzaWduYXR1cmUnLCBzaWduYXR1cmUpICsgJ1xcbic7XHJcbiAgICAgICAgcyArPSAnICA8aW5wdXQgdHlwZT1cXCdzdWJtaXRcXCcgdmFsdWU9XFwnVmFsaWRhdGVcXCcgLz5cXG48L2Zvcm0+JztcclxuICAgICAgICByZXR1cm4gcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBDUkVBVElORyBDQUNIRVNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYSBSYW5kb21PcmdDYWNoZSB0byBvYnRhaW4gcmFuZG9tIGludGVnZXJzLlxyXG4gICAgICogXHJcbiAgICAgKiBUaGUgUmFuZG9tT3JnQ2FjaGUgY2FuIGJlIHBvbGxlZCBmb3IgbmV3IHJlc3VsdHMgY29uZm9ybWluZyB0byB0aGUgb3V0cHV0XHJcbiAgICAgKiBmb3JtYXQgb2YgdGhlIGlucHV0IHJlcXVlc3QuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBIb3cgbWFueSByYW5kb20gaW50ZWdlcnMgeW91IG5lZWQuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBsb3dlciBib3VuZGFyeSBmb3IgdGhlIHJhbmdlIGZyb20gd2hpY2ggdGhlIHJhbmRvbVxyXG4gICAgICogICAgIG51bWJlcnMgd2lsbCBiZSBwaWNrZWQuIE11c3QgYmUgd2l0aGluIHRoZSBbLTFlOSwxZTldIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heCBUaGUgdXBwZXIgYm91bmRhcnkgZm9yIHRoZSByYW5nZSBmcm9tIHdoaWNoIHRoZSByYW5kb21cclxuICAgICAqICAgICBudW1iZXJzIHdpbGwgYmUgcGlja2VkLiBNdXN0IGJlIHdpdGhpbiB0aGUgWy0xZTksMWU5XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e3JlcGxhY2VtZW50PzogYm9vbGVhbiwgYmFzZT86IG51bWJlciwgY2FjaGVTaXplPzogbnVtYmVyfX0gb3B0aW9uc1xyXG4gICAgICogICAgIEFuIG9iamVjdCB3aGljaCBtYXkgY29udGFpbiBhbnkgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXBsYWNlbWVudD10cnVlXSBTcGVjaWZpZXMgd2hldGhlciB0aGUgcmFuZG9tXHJcbiAgICAgKiAgICAgbnVtYmVycyBzaG91bGQgYmUgcGlja2VkIHdpdGggcmVwbGFjZW1lbnQuIElmIHRydWUsIHRoZSByZXN1bHRpbmcgbnVtYmVyc1xyXG4gICAgICogICAgIG1heSBjb250YWluIGR1cGxpY2F0ZSB2YWx1ZXMsIG90aGVyd2lzZSB0aGUgbnVtYmVycyB3aWxsIGFsbCBiZSB1bmlxdWVcclxuICAgICAqICAgICAoZGVmYXVsdCB0cnVlKS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYXNlPTEwXSBUaGUgYmFzZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBkaXNwbGF5IHRoZVxyXG4gICAgICogICAgIG51bWJlcnMuIFZhbHVlcyBhbGxvd2VkIGFyZSAyLCA4LCAxMCBhbmQgMTYgKGRlZmF1bHQgMTApLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmNhY2hlU2l6ZT0yMF0gVGhlIG51bWJlciBvZiByZXN1bHQtc2V0cyBmb3IgdGhlXHJcbiAgICAgKiAgICAgY2FjaGUgdG8gdHJ5IHRvIG1haW50YWluIGF0IGFueSBnaXZlbiB0aW1lIChkZWZhdWx0IDIwLCBtaW5pbXVtIDIpLlxyXG4gICAgICogQHJldHVybnMge1JhbmRvbU9yZ0NhY2hlfSBBbiBpbnN0YW5jZSBvZiB0aGUgUmFuZG9tT3JnQ2FjaGUgY2xhc3Mgd2hpY2hcclxuICAgICAqICAgICBjYW4gYmUgcG9sbGVkIGZvciBhcnJheXMgb2YgdHJ1ZSByYW5kb20gaW50ZWdlcnMuXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUludGVnZXJDYWNoZShuLCBtaW4sIG1heCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IGNhY2hlU2l6ZSA9IG9wdGlvbnMuY2FjaGVTaXplIHx8IDIwO1xyXG4gICAgICAgIGlmIChjYWNoZVNpemUgPCAyKSB7XHJcbiAgICAgICAgICAgIGNhY2hlU2l6ZSA9IDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI2ludGVnZXJSZXF1ZXN0KG4sIG1pbiwgbWF4LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gbWF4IHNpbmdsZSByZXF1ZXN0IHNpemUsIGluIGJpdHMsIGZvciBhZGp1c3RpbmcgYnVsayByZXF1ZXN0cyBsYXRlclxyXG4gICAgICAgIGxldCBtYXhSZXF1ZXN0U2l6ZSA9IE1hdGguY2VpbChNYXRoLmxvZyhtYXggLSBtaW4gKyAxKSAvIE1hdGgubG9nKDIpICogbik7XHJcbiAgICAgICAgbGV0IGJ1bGtOID0gMDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBwb3NzaWJsZSwgbWFrZSByZXF1ZXN0cyBtb3JlIGVmZmljaWVudCBieSBidWxrLW9yZGVyaW5nIGZyb20gdGhlXHJcbiAgICAgICAgLy8gc2VydmVyLiBJbml0aWFsbHkgc2V0IGF0IGNhY2hlU2l6ZS8yLCBidXQgY2FjaGUgd2lsbCBhdXRvLXNocmluayBidWxrXHJcbiAgICAgICAgLy8gcmVxdWVzdCBzaXplIGlmIHJlcXVlc3RzIGNhbid0IGJlIGZ1bGZpbGxlZC5cclxuICAgICAgICBpZiAoISgncmVwbGFjZW1lbnQnIGluIG9wdGlvbnMpIHx8IG9wdGlvbnMucmVwbGFjZW1lbnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgYnVsa04gPSBjYWNoZVNpemUgLyAyO1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBhcmFtcy5uID0gbiAqIGJ1bGtOO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5kb21PcmdDYWNoZSh0aGlzLiNzZW5kUmVxdWVzdC5iaW5kKHRoaXMpLCByZXF1ZXN0LCBjYWNoZVNpemUsXHJcbiAgICAgICAgICAgIGJ1bGtOLCBuLCBtYXhSZXF1ZXN0U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGEgUmFuZG9tT3JnQ2FjaGUgdG8gb2J0YWluIHJhbmRvbSBpbnRlZ2VyIHNlcXVlbmNlcy5cclxuICAgICAqIFxyXG4gICAgICogVGhlIFJhbmRvbU9yZ0NhY2hlIGNhbiBiZSBwb2xsZWQgZm9yIG5ldyByZXN1bHRzIGNvbmZvcm1pbmcgdG8gdGhlIG91dHB1dFxyXG4gICAgICogZm9ybWF0IG9mIHRoZSBpbnB1dCByZXF1ZXN0LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIGludGVnZXIgc2VxdWVuY2VzIHlvdSBuZWVkLiBNdXN0IGJlIHdpdGhpblxyXG4gICAgICogICAgIHRoZSBbMSwxZTRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyfG51bWJlcltdKX0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgZWFjaCBhcnJheSBvZiByYW5kb21cclxuICAgICAqICAgICBpbnRlZ2VycyByZXF1ZXN0ZWQuIEZvciB1bmlmb3JtIHNlcXVlbmNlcywgbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlclxyXG4gICAgICogICAgIGluIHRoZSBbMSwgMWU0XSByYW5nZS4gRm9yIG11bHRpZm9ybSBzZXF1ZW5jZXMsIGxlbmd0aCBjYW4gYmUgYW4gYXJyYXlcclxuICAgICAqICAgICB3aXRoIG4gaW50ZWdlcnMsIGVhY2ggc3BlY2lmeWluZyB0aGUgbGVuZ3RoIG9mIHRoZSBzZXF1ZW5jZSBpZGVudGlmaWVkXHJcbiAgICAgKiAgICAgYnkgaXRzIGluZGV4LiBJbiB0aGlzIGNhc2UsIGVhY2ggdmFsdWUgaW4gbGVuZ3RoIG11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLCAxZTRdIHJhbmdlIGFuZCB0aGUgdG90YWwgc3VtIG9mIGFsbCB0aGUgbGVuZ3RocyBtdXN0IGJlIGluIHRoZVxyXG4gICAgICogICAgIFsxLCAxZTRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyfG51bWJlcltdKX0gbWluIFRoZSBsb3dlciBib3VuZGFyeSBmb3IgdGhlIHJhbmdlIGZyb20gd2hpY2hcclxuICAgICAqICAgICB0aGUgcmFuZG9tIG51bWJlcnMgd2lsbCBiZSBwaWNrZWQuIEZvciB1bmlmb3JtIHNlcXVlbmNlcywgbWluIG11c3QgYmVcclxuICAgICAqICAgICBhbiBpbnRlZ2VyIGluIHRoZSBbLTFlOSwgMWU5XSByYW5nZS4gRm9yIG11bHRpZm9ybSBzZXF1ZW5jZXMsIG1pbiBjYW5cclxuICAgICAqICAgICBiZSBhbiBhcnJheSB3aXRoIG4gaW50ZWdlcnMsIGVhY2ggc3BlY2lmeWluZyB0aGUgbG93ZXIgYm91bmRhcnkgb2YgdGhlXHJcbiAgICAgKiAgICAgc2VxdWVuY2UgaWRlbnRpZmllZCBieSBpdHMgaW5kZXguIEluIHRoaXMgY2FzZSwgZWFjaCB2YWx1ZSBpbiBtaW4gbXVzdFxyXG4gICAgICogICAgIGJlIHdpdGhpbiB0aGUgWy0xZTksIDFlOV0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBtYXggVGhlIHVwcGVyIGJvdW5kYXJ5IGZvciB0aGUgcmFuZ2UgZnJvbSB3aGljaFxyXG4gICAgICogICAgIHRoZSByYW5kb20gbnVtYmVycyB3aWxsIGJlIHBpY2tlZC4gRm9yIHVuaWZvcm0gc2VxdWVuY2VzLCBtYXggbXVzdCBiZVxyXG4gICAgICogICAgIGFuIGludGVnZXIgaW4gdGhlIFstMWU5LCAxZTldIHJhbmdlLiBGb3IgbXVsdGlmb3JtIHNlcXVlbmNlcywgbWF4IGNhblxyXG4gICAgICogICAgIGJlIGFuIGFycmF5IHdpdGggbiBpbnRlZ2VycywgZWFjaCBzcGVjaWZ5aW5nIHRoZSB1cHBlciBib3VuZGFyeSBvZiB0aGVcclxuICAgICAqICAgICBzZXF1ZW5jZSBpZGVudGlmaWVkIGJ5IGl0cyBpbmRleC4gSW4gdGhpcyBjYXNlLCBlYWNoIHZhbHVlIGluIG1heCBtdXN0XHJcbiAgICAgKiAgICAgYmUgd2l0aGluIHRoZSBbLTFlOSwgMWU5XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e3JlcGxhY2VtZW50PzogYm9vbGVhbnxib29sZWFuW10sIGJhc2U/OiBudW1iZXJ8bnVtYmVyW10sXHJcbiAgICAgKiAgICAgY2FjaGVTaXplPzogbnVtYmVyfX0gb3B0aW9ucyBBbiBvYmplY3Qgd2hpY2ggbWF5IGNvbnRhaW4gYW55IG9mIHRoZVxyXG4gICAgICogICAgIGZvbGxvd2luZyBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufGJvb2xlYW5bXX0gcmVwbGFjZW1lbnQgU3BlY2lmaWVzIHdoZXRoZXIgdGhlIHJhbmRvbSBudW1iZXJzXHJcbiAgICAgKiAgICAgc2hvdWxkIGJlIHBpY2tlZCB3aXRoIHJlcGxhY2VtZW50LiBJZiB0cnVlLCB0aGUgcmVzdWx0aW5nIG51bWJlcnMgbWF5XHJcbiAgICAgKiAgICAgY29udGFpbiBkdXBsaWNhdGUgdmFsdWVzLCBvdGhlcndpc2UgdGhlIG51bWJlcnMgd2lsbCBhbGwgYmUgdW5pcXVlLiBGb3JcclxuICAgICAqICAgICBtdWx0aWZvcm0gc2VxdWVuY2VzLCByZXBsYWNlbWVudCBjYW4gYmUgYW4gYXJyYXkgd2l0aCBuIGJvb2xlYW4gdmFsdWVzLFxyXG4gICAgICogICAgIGVhY2ggc3BlY2lmeWluZyB3aGV0aGVyIHRoZSBzZXF1ZW5jZSBpZGVudGlmaWVkIGJ5IGl0cyBpbmRleCB3aWxsIGJlXHJcbiAgICAgKiAgICAgY3JlYXRlZCB3aXRoICh0cnVlKSBvciB3aXRob3V0IChmYWxzZSkgcmVwbGFjZW1lbnQgKGRlZmF1bHQgdHJ1ZSkuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcnxudW1iZXJbXX0gYmFzZSBUaGUgYmFzZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBkaXNwbGF5IHRoZSBudW1iZXJzLlxyXG4gICAgICogICAgIFZhbHVlcyBhbGxvd2VkIGFyZSAyLCA4LCAxMCBhbmQgMTYuIEZvciBtdWx0aWZvcm0gc2VxdWVuY2VzLCBiYXNlIGNhblxyXG4gICAgICogICAgIGJlIGFuIGFycmF5IHdpdGggbiBpbnRlZ2VyIHZhbHVlcyB0YWtlbiBmcm9tIHRoZSBzYW1lIHNldCwgZWFjaFxyXG4gICAgICogICAgIHNwZWNpZnlpbmcgdGhlIGJhc2UgdGhhdCB3aWxsIGJlIHVzZWQgdG8gZGlzcGxheSB0aGUgc2VxdWVuY2UgaWRlbnRpZmllZFxyXG4gICAgICogICAgIGJ5IGl0cyBpbmRleCAoZGVmYXVsdCAxMCkuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2FjaGVTaXplIFRoZSBudW1iZXIgb2YgcmVzdWx0LXNldHMgZm9yIHRoZSBjYWNoZSB0byB0cnlcclxuICAgICAqICAgICB0byBtYWludGFpbiBhdCBhbnkgZ2l2ZW4gdGltZSAoZGVmYXVsdCAyMCwgbWluaW11bSAyKS5cclxuICAgICAqIEByZXR1cm5zIHtSYW5kb21PcmdDYWNoZX0gQW4gaW5zdGFuY2Ugb2YgdGhlIFJhbmRvbU9yZ0NhY2hlIGNsYXNzIHdoaWNoXHJcbiAgICAgKiAgICAgY2FuIGJlIHBvbGxlZCBmb3IgYXJyYXlzIG9mIHRydWUgcmFuZG9tIGludGVnZXIgc2VxdWVuY2VzLlxyXG4gICAgICovXHJcbiAgICBjcmVhdGVJbnRlZ2VyU2VxdWVuY2VDYWNoZShuLCBsZW5ndGgsIG1pbiwgbWF4LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgY2FjaGVTaXplID0gb3B0aW9ucy5jYWNoZVNpemUgfHwgMjA7XHJcbiAgICAgICAgaWYgKGNhY2hlU2l6ZSA8IDIpIHtcclxuICAgICAgICAgICAgY2FjaGVTaXplID0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG1heFJlcXVlc3RTaXplID0gTWF0aC5jZWlsKE1hdGgubG9nKHRoaXMuI21heFZhbHVlKG1heCkgLSB0aGlzLiNtaW5WYWx1ZShtaW4pLCArIDEpXHJcbiAgICAgICAgICAgIC8gTWF0aC5sb2coMikgKiBuICogdGhpcy4jbWF4VmFsdWUobGVuZ3RoKSk7XHJcblxyXG4gICAgICAgIC8vIElmIHBvc3NpYmxlLCBtYWtlIHJlcXVlc3RzIG1vcmUgZWZmaWNpZW50IGJ5IGJ1bGstb3JkZXJpbmcgZnJvbSB0aGVcclxuICAgICAgICAvLyBzZXJ2ZXIuIEluaXRpYWxseSBzZXQgYXQgY2FjaGVTaXplLzIsIGJ1dCBjYWNoZSB3aWxsIGF1dG8tc2hyaW5rIGJ1bGtcclxuICAgICAgICAvLyByZXF1ZXN0IHNpemUgaWYgcmVxdWVzdHMgY2FuJ3QgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgIGxldCBidWxrTiA9IDA7XHJcblxyXG4gICAgICAgIC8vIGlmIHJlcGxhY2VtZW50IGlzIGFuIGFycmF5LCBjaGVjayBpZiBhbGwgdmFsdWVzIGFyZSBzZXQgdG8gdHJ1ZVxyXG4gICAgICAgIGxldCByZXBsO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnJlcGxhY2VtZW50ICYmIEFycmF5LmlzQXJyYXkob3B0aW9ucy5yZXBsYWNlbWVudCkpIHtcclxuICAgICAgICAgICAgcmVwbCA9IG9wdGlvbnMucmVwbGFjZW1lbnQuZXZlcnkoeCA9PiB4ID09PSB0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXBsID0gb3B0aW9ucy5yZXBsYWNlbWVudCB8fCB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgYnVsayByZXF1ZXN0cyBjYW4gYmUgdXNlZCwgbWFrZSBhZGp1c3RtZW50cyB0byBhcnJheS10eXBlIHBhcmFtZXRlcnNcclxuICAgICAgICBpZiAocmVwbCkge1xyXG4gICAgICAgICAgICBidWxrTiA9IGNhY2hlU2l6ZSAvIDI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSB0aGlzLiNhZGp1c3QobGVuZ3RoLCBidWxrTik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1pbikpIHtcclxuICAgICAgICAgICAgICAgIG1pbiA9IHRoaXMuI2FkanVzdChtaW4sIGJ1bGtOKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWF4KSkge1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gdGhpcy4jYWRqdXN0KG1heCwgYnVsa04pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZXBsYWNlbWVudCAmJiBBcnJheS5pc0FycmF5KG9wdGlvbnMucmVwbGFjZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJlcGxhY2VtZW50ID0gdGhpcy4jYWRqdXN0KG9wdGlvbnMucmVwbGFjZW1lbnQsIGJ1bGtOKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYmFzZSAmJiBBcnJheS5pc0FycmF5KG9wdGlvbnMuYmFzZSkpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuYmFzZSA9IHRoaXMuI2FkanVzdChvcHRpb25zLmJhc2UsIGJ1bGtOKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNpbnRlZ2VyU2VxdWVuY2VSZXF1ZXN0KG4sIGxlbmd0aCwgbWluLCBtYXgsXHJcbiAgICAgICAgICAgIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBpZiAocmVwbCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBhcmFtcy5uID0gYnVsa04gKiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5kb21PcmdDYWNoZSh0aGlzLiNzZW5kUmVxdWVzdC5iaW5kKHRoaXMpLCByZXF1ZXN0LCBjYWNoZVNpemUsIGJ1bGtOLCBuLCBtYXhSZXF1ZXN0U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGEgUmFuZG9tT3JnQ2FjaGUgdG8gb2J0YWluIHJhbmRvbSBkZWNpbWFsIGZyYWN0aW9ucy5cclxuICAgICAqIFxyXG4gICAgICogVGhlIFJhbmRvbU9yZ0NhY2hlIGNhbiBiZSBwb2xsZWQgZm9yIG5ldyByZXN1bHRzIGNvbmZvcm1pbmcgdG8gdGhlIG91dHB1dFxyXG4gICAgICogZm9ybWF0IG9mIHRoZSBpbnB1dCByZXF1ZXN0LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIGRlY2ltYWwgZnJhY3Rpb25zIHlvdSBuZWVkLiBNdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxZTRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxQbGFjZXMgVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byB1c2UuIE11c3RcclxuICAgICAqICAgICBiZSB3aXRoaW4gdGhlIFsxLDIwXSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e3JlcGxhY2VtZW50PzogYm9vbGVhbiwgY2FjaGVTaXplPzogbnVtYmVyfX0gb3B0aW9ucyBBbiBvYmplY3Qgd2hpY2hcclxuICAgICAqICAgICBtYXkgY29udGFpbiBhbnkgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXBsYWNlbWVudD10cnVlXSBTcGVjaWZpZXMgd2hldGhlciB0aGUgcmFuZG9tXHJcbiAgICAgKiAgICAgbnVtYmVycyBzaG91bGQgYmUgcGlja2VkIHdpdGggcmVwbGFjZW1lbnQuIElmIHRydWUsIHRoZSByZXN1bHRpbmcgbnVtYmVyc1xyXG4gICAgICogICAgIG1heSBjb250YWluIGR1cGxpY2F0ZSB2YWx1ZXMsIG90aGVyd2lzZSB0aGUgbnVtYmVycyB3aWxsIGFsbCBiZSB1bmlxdWVcclxuICAgICAqICAgICAoZGVmYXVsdCB0cnVlKS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5jYWNoZVNpemU9MjBdIFRoZSBudW1iZXIgb2YgcmVzdWx0LXNldHMgZm9yIHRoZSBjYWNoZVxyXG4gICAgICogICAgIHRvIHRyeSB0byBtYWludGFpbiBhdCBhbnkgZ2l2ZW4gdGltZSAoZGVmYXVsdCAyMCwgbWluaW11bSAyKS5cclxuICAgICAqIEByZXR1cm5zIHtSYW5kb21PcmdDYWNoZX0gQW4gaW5zdGFuY2Ugb2YgdGhlIFJhbmRvbU9yZ0NhY2hlIGNsYXNzIHdoaWNoXHJcbiAgICAgKiAgICAgY2FuIGJlIHBvbGxlZCBmb3IgYXJyYXlzIG9mIHRydWUgcmFuZG9tIGRlY2ltYWwgZnJhY3Rpb25zLlxyXG4gICAgICovXHJcbiAgICBjcmVhdGVEZWNpbWFsRnJhY3Rpb25DYWNoZShuLCBkZWNpbWFsUGxhY2VzLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsZXQgY2FjaGVTaXplID0gb3B0aW9ucy5jYWNoZVNpemUgfHwgMjA7XHJcbiAgICAgICAgaWYgKGNhY2hlU2l6ZSA8IDIpIHtcclxuICAgICAgICAgICAgY2FjaGVTaXplID0gMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jZGVjaW1hbEZyYWN0aW9uUmVxdWVzdChuLCBkZWNpbWFsUGxhY2VzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgbGV0IGJ1bGtOID0gMDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBwb3NzaWJsZSwgbWFrZSByZXF1ZXN0cyBtb3JlIGVmZmljaWVudCBieSBidWxrLW9yZGVyaW5nIGZyb20gdGhlXHJcbiAgICAgICAgLy8gc2VydmVyLiBJbml0aWFsbHkgc2V0IGF0IGNhY2hlU2l6ZS8yLCBidXQgY2FjaGUgd2lsbCBhdXRvLXNocmluayBidWxrXHJcbiAgICAgICAgLy8gcmVxdWVzdCBzaXplIGlmIHJlcXVlc3RzIGNhbid0IGJlIGZ1bGZpbGxlZC5cclxuICAgICAgICBpZiAoISgncmVwbGFjZW1lbnQnIGluIG9wdGlvbnMpIHx8IG9wdGlvbnMucmVwbGFjZW1lbnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgYnVsa04gPSBjYWNoZVNpemUgLyAyO1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBhcmFtcy5uID0gbiAqIGJ1bGtOO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbWF4IHNpbmdsZSByZXF1ZXN0IHNpemUsIGluIGJpdHMsIGZvciBhZGp1c3RpbmcgYnVsayByZXF1ZXN0cyBsYXRlclxyXG4gICAgICAgIGxldCBtYXhSZXF1ZXN0U2l6ZSA9IE1hdGguY2VpbChNYXRoLmxvZygxMCkgLyBNYXRoLmxvZygyKSAqIGRlY2ltYWxQbGFjZXMgKiBuKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5kb21PcmdDYWNoZSh0aGlzLiNzZW5kUmVxdWVzdC5iaW5kKHRoaXMpLCByZXF1ZXN0LCBjYWNoZVNpemUsIGJ1bGtOLFxyXG4gICAgICAgICAgICBuLCBtYXhSZXF1ZXN0U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGEgUmFuZG9tT3JnQ2FjaGUgdG8gb2J0YWluIHJhbmRvbSBudW1iZXJzIGZyb20gYSBHYXVzc2lhbiBkaXN0cmlidXRpb24uXHJcbiAgICAgKiBcclxuICAgICAqIFRoZSBSYW5kb21PcmdDYWNoZSBjYW4gYmUgcG9sbGVkIGZvciBuZXcgcmVzdWx0cyBjb25mb3JtaW5nIHRvIHRoZSBvdXRwdXRcclxuICAgICAqIGZvcm1hdCBvZiB0aGUgaW5wdXQgcmVxdWVzdC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIEhvdyBtYW55IHJhbmRvbSBudW1iZXJzIHlvdSBuZWVkLiBNdXN0IGJlIHdpdGhpbiB0aGVcclxuICAgICAqICAgICBbMSwxZTRdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1lYW4gVGhlIGRpc3RyaWJ1dGlvbidzIG1lYW4uIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFstMWU2LDFlNl0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhbmRhcmREZXZpYXRpb24gVGhlIGRpc3RyaWJ1dGlvbidzIHN0YW5kYXJkIGRldmlhdGlvbi5cclxuICAgICAqICAgICBNdXN0IGJlIHdpdGhpbiB0aGUgWy0xZTYsMWU2XSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaWduaWZpY2FudERpZ2l0cyBUaGUgbnVtYmVyIG9mIHNpZ25pZmljYW50IGRpZ2l0cyB0byB1c2UuXHJcbiAgICAgKiAgICAgTXVzdCBiZSB3aXRoaW4gdGhlIFsyLDIwXSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e2NhY2hlU2l6ZT86IG51bWJlcn19IG9wdGlvbnMgQW4gb2JqZWN0IHdoaWNoIG1heSBjb250YWluIHRoZSBmb2xsb3dpbmdcclxuICAgICAqICAgICBvcHRpb25hbCBwYXJhbWV0ZXI6XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY2FjaGVTaXplPTIwXSBUaGUgbnVtYmVyIG9mIHJlc3VsdC1zZXRzIGZvciB0aGUgY2FjaGVcclxuICAgICAqICAgICB0byB0cnkgdG8gbWFpbnRhaW4gYXQgYW55IGdpdmVuIHRpbWUgKGRlZmF1bHQgMjAsIG1pbmltdW0gMikuXHJcbiAgICAgKiBAcmV0dXJucyB7UmFuZG9tT3JnQ2FjaGV9IEFuIGluc3RhbmNlIG9mIHRoZSBSYW5kb21PcmdDYWNoZSBjbGFzcyB3aGljaFxyXG4gICAgICogICAgIGNhbiBiZSBwb2xsZWQgZm9yIGFycmF5cyBvZiB0cnVlIHJhbmRvbSBudW1iZXJzIGZyb20gYSBHYXVzc2lhblxyXG4gICAgICogICAgIGRpc3RyaWJ1dGlvbi5cclxuICAgICAqL1xyXG4gICAgY3JlYXRlR2F1c3NpYW5DYWNoZShuLCBtZWFuLCBzdGFuZGFyZERldmlhdGlvbiwgc2lnbmlmaWNhbnREaWdpdHMsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCBjYWNoZVNpemUgPSBvcHRpb25zLmNhY2hlU2l6ZSB8fCAyMDtcclxuICAgICAgICBpZiAoY2FjaGVTaXplIDwgMikge1xyXG4gICAgICAgICAgICBjYWNoZVNpemUgPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbWF4IHNpbmdsZSByZXF1ZXN0IHNpemUsIGluIGJpdHMsIGZvciBhZGp1c3RpbmcgYnVsayByZXF1ZXN0cyBsYXRlclxyXG4gICAgICAgIGxldCBtYXhSZXF1ZXN0U2l6ZSA9IE1hdGguY2VpbChNYXRoLmxvZyhNYXRoLnBvdygxMCwgc2lnbmlmaWNhbnREaWdpdHMpKSAvIE1hdGgubG9nKDIpICogbik7XHJcblxyXG4gICAgICAgIC8vIG1ha2UgcmVxdWVzdHMgbW9yZSBlZmZpY2llbnQgYnkgYnVsay1vcmRlcmluZyBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgLy8gSW5pdGlhbGx5IHNldCBhdCBjYWNoZVNpemUvMiwgYnV0IGNhY2hlIHdpbGwgYXV0by1zaHJpbmsgYnVsayByZXF1ZXN0XHJcbiAgICAgICAgLy8gc2l6ZSBpZiByZXF1ZXN0cyBjYW4ndCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgbGV0IGJ1bGtOID0gY2FjaGVTaXplIC8gMjtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuI2dhdXNzaWFuUmVxdWVzdChuICogYnVsa04sIG1lYW4sIHN0YW5kYXJkRGV2aWF0aW9uLFxyXG4gICAgICAgICAgICBzaWduaWZpY2FudERpZ2l0cyk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmFuZG9tT3JnQ2FjaGUodGhpcy4jc2VuZFJlcXVlc3QuYmluZCh0aGlzKSwgcmVxdWVzdCwgY2FjaGVTaXplLCBidWxrTixcclxuICAgICAgICAgICAgbiwgbWF4UmVxdWVzdFNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhIFJhbmRvbU9yZ0NhY2hlIHRvIG9idGFpbiByYW5kb20gc3RyaW5ncy5cclxuICAgICAqIFxyXG4gICAgICogVGhlIFJhbmRvbU9yZ0NhY2hlIGNhbiBiZSBwb2xsZWQgZm9yIG5ldyByZXN1bHRzIGNvbmZvcm1pbmcgdG8gdGhlIG91dHB1dFxyXG4gICAgICogZm9ybWF0IG9mIHRoZSBpbnB1dCByZXF1ZXN0LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gSG93IG1hbnkgcmFuZG9tIHN0cmluZ3MgeW91IG5lZWQuIE11c3QgYmUgd2l0aGluIHRoZVxyXG4gICAgICogICAgIFsxLDFlNF0gcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgZWFjaCBzdHJpbmcuIE11c3QgYmUgd2l0aGluIHRoZSBbMSwyMF1cclxuICAgICAqICAgICByYW5nZS4gQWxsIHN0cmluZ3Mgd2lsbCBiZSBvZiB0aGUgc2FtZSBsZW5ndGguXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVycyBBIHN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBzZXQgb2YgY2hhcmFjdGVyc1xyXG4gICAgICogICAgIHRoYXQgYXJlIGFsbG93ZWQgdG8gb2NjdXIgaW4gdGhlIHJhbmRvbSBzdHJpbmdzLiBUaGUgbWF4aW11bSBudW1iZXJcclxuICAgICAqICAgICBvZiBjaGFyYWN0ZXJzIGlzIDgwLlxyXG4gICAgICogQHBhcmFtIHt7cmVwbGFjZW1lbnQ/OiBib29sZWFuLCBjYWNoZVNpemU/OiBudW1iZXJ9fSBvcHRpb25zIEFuIG9iamVjdCB3aGljaFxyXG4gICAgICogICAgIG1heSBjb250YWluIGFueSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbmFsIHBhcmFtZXRlcnM6XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlcGxhY2VtZW50PXRydWVdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSByYW5kb21cclxuICAgICAqICAgICBzdHJpbmdzIHNob3VsZCBiZSBwaWNrZWQgd2l0aCByZXBsYWNlbWVudC4gSWYgdHJ1ZSwgdGhlIHJlc3VsdGluZyBsaXN0XHJcbiAgICAgKiAgICAgb2Ygc3RyaW5ncyBtYXkgY29udGFpbiBkdXBsaWNhdGVzLCBvdGhlcndpc2UgdGhlIHN0cmluZ3Mgd2lsbCBhbGwgYmVcclxuICAgICAqICAgICB1bmlxdWUgKGRlZmF1bHQgdHJ1ZSkuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY2FjaGVTaXplPTIwXSBUaGUgbnVtYmVyIG9mIHJlc3VsdC1zZXRzIGZvciB0aGVcclxuICAgICAqICAgICBjYWNoZSB0byB0cnkgdG8gbWFpbnRhaW4gYXQgYW55IGdpdmVuIHRpbWUgKGRlZmF1bHQgMjAsIG1pbmltdW0gMikuXHJcbiAgICAgKiBAcmV0dXJucyB7UmFuZG9tT3JnQ2FjaGV9IEFuIGluc3RhbmNlIG9mIHRoZSBSYW5kb21PcmdDYWNoZSBjbGFzcyB3aGljaFxyXG4gICAgICogICAgIGNhbiBiZSBwb2xsZWQgZm9yIGFycmF5cyBvZiB0cnVlIHJhbmRvbSBzdHJpbmdzLlxyXG4gICAgICovXHJcbiAgICBjcmVhdGVTdHJpbmdDYWNoZShuLCBsZW5ndGgsIGNoYXJhY3RlcnMsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCBjYWNoZVNpemUgPSBvcHRpb25zLmNhY2hlU2l6ZSB8fCAyMDtcclxuICAgICAgICBpZiAoY2FjaGVTaXplIDwgMikge1xyXG4gICAgICAgICAgICBjYWNoZVNpemUgPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNzdHJpbmdSZXF1ZXN0KG4sIGxlbmd0aCwgY2hhcmFjdGVycywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIG1heCBzaW5nbGUgcmVxdWVzdCBzaXplLCBpbiBiaXRzLCBmb3IgYWRqdXN0aW5nIGJ1bGsgcmVxdWVzdHMgbGF0ZXJcclxuICAgICAgICBsZXQgbWF4UmVxdWVzdFNpemUgPSBNYXRoLmNlaWwoTWF0aC5sb2coY2hhcmFjdGVycy5sZW5ndGgpIC8gTWF0aC5sb2coMikgKiBsZW5ndGggKiBuKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBwb3NzaWJsZSwgbWFrZSByZXF1ZXN0cyBtb3JlIGVmZmljaWVudCBieSBidWxrLW9yZGVyaW5nIGZyb20gdGhlXHJcbiAgICAgICAgLy8gc2VydmVyLiBJbml0aWFsbHkgc2V0IGF0IGNhY2hlX3NpemUvMiwgYnV0IGNhY2hlIHdpbGwgYXV0by1zaHJpbmsgYnVsa1xyXG4gICAgICAgIC8vIHJlcXVlc3Qgc2l6ZSBpZiByZXF1ZXN0cyBjYW4ndCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgbGV0IGJ1bGtOID0gMDtcclxuICAgICAgICBpZiAoISgncmVwbGFjZW1lbnQnIGluIG9wdGlvbnMpIHx8IG9wdGlvbnMucmVwbGFjZW1lbnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgYnVsa04gPSBjYWNoZVNpemUgLyAyO1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBhcmFtcy5uID0gbiAqIGJ1bGtOO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbmV3IFJhbmRvbU9yZ0NhY2hlKHRoaXMuI3NlbmRSZXF1ZXN0LmJpbmQodGhpcyksIHJlcXVlc3QsIGNhY2hlU2l6ZSwgYnVsa04sXHJcbiAgICAgICAgICAgIG4sIG1heFJlcXVlc3RTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYSBSYW5kb21PcmdDYWNoZSB0byBvYnRhaW4gVVVJRHMuXHJcbiAgICAgKiBcclxuICAgICAqIFRoZSBSYW5kb21PcmdDYWNoZSBjYW4gYmUgcG9sbGVkIGZvciBuZXcgcmVzdWx0cyBjb25mb3JtaW5nIHRvIHRoZSBvdXRwdXRcclxuICAgICAqIGZvcm1hdCBvZiB0aGUgaW5wdXQgcmVxdWVzdC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIEhvdyBtYW55IHJhbmRvbSBVVUlEcyB5b3UgbmVlZC4gTXVzdCBiZSB3aXRoaW4gdGhlXHJcbiAgICAgKiAgICAgWzEsMWUzXSByYW5nZS5cclxuICAgICAqIEBwYXJhbSB7e2NhY2hlU2l6ZT86IG51bWJlcn19IG9wdGlvbnMgQW4gb2JqZWN0IHdoaWNoIG1heSBjb250YWluIHRoZSBmb2xsb3dpbmdcclxuICAgICAqICAgICBvcHRpb25hbCBwYXJhbWV0ZXI6XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY2FjaGVTaXplPTEwXSBUaGUgbnVtYmVyIG9mIHJlc3VsdC1zZXRzIGZvciB0aGUgY2FjaGVcclxuICAgICAqICAgICB0byB0cnkgdG8gbWFpbnRhaW4gYXQgYW55IGdpdmVuIHRpbWUgKGRlZmF1bHQgMTAsIG1pbmltdW0gMikuXHJcbiAgICAgKiBAcmV0dXJucyB7UmFuZG9tT3JnQ2FjaGV9IEFuIGluc3RhbmNlIG9mIHRoZSBSYW5kb21PcmdDYWNoZSBjbGFzcyB3aGljaFxyXG4gICAgICogICAgIGNhbiBiZSBwb2xsZWQgZm9yIGFycmF5cyBvZiB0cnVlIHJhbmRvbSBVVUlEcy5cclxuICAgICAqL1xyXG4gICAgY3JlYXRlVVVJRENhY2hlKG4sIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCBjYWNoZVNpemUgPSBvcHRpb25zLmNhY2hlU2l6ZSB8fCAxMDtcclxuICAgICAgICBpZiAoY2FjaGVTaXplIDwgMikge1xyXG4gICAgICAgICAgICBjYWNoZVNpemUgPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbWF4IHNpbmdsZSByZXF1ZXN0IHNpemUsIGluIGJpdHMsIGZvciBhZGp1c3RpbmcgYnVsayByZXF1ZXN0cyBsYXRlclxyXG4gICAgICAgIGxldCBtYXhSZXF1ZXN0U2l6ZSA9IG4gKiBSYW5kb21PcmdDbGllbnQuVVVJRF9TSVpFO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHJlcXVlc3RzIG1vcmUgZWZmaWNpZW50IGJ5IGJ1bGstb3JkZXJpbmcgZnJvbSB0aGUgc2VydmVyLiBJbml0aWFsbHlcclxuICAgICAgICAvLyBzZXQgYXQgY2FjaGVTaXplLzIsIGJ1dCBjYWNoZSB3aWxsIGF1dG8tc2hyaW5rIGJ1bGsgcmVxdWVzdCBzaXplIGlmXHJcbiAgICAgICAgLy8gcmVxdWVzdHMgY2FuJ3QgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgIGxldCBidWxrTiA9IGNhY2hlU2l6ZSAvIDI7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNVVUlEUmVxdWVzdChuICogYnVsa04pO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFJhbmRvbU9yZ0NhY2hlKHRoaXMuI3NlbmRSZXF1ZXN0LmJpbmQodGhpcyksIHJlcXVlc3QsIGNhY2hlU2l6ZSwgYnVsa04sXHJcbiAgICAgICAgICAgIG4sIG1heFJlcXVlc3RTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYSBSYW5kb21PcmdDYWNoZSB0byBvYnRhaW4gcmFuZG9tIGJsb2JzLlxyXG4gICAgICogXHJcbiAgICAgKiBUaGUgUmFuZG9tT3JnQ2FjaGUgY2FuIGJlIHBvbGxlZCBmb3IgbmV3IHJlc3VsdHMgY29uZm9ybWluZyB0byB0aGUgb3V0cHV0XHJcbiAgICAgKiBmb3JtYXQgb2YgdGhlIGlucHV0IHJlcXVlc3QuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBIb3cgbWFueSByYW5kb20gYmxvYnMgeW91IG5lZWQuIG4qKGNhY2hlU2l6ZS8yKSBtdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxMDBdIHJhbmdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgVGhlIHNpemUgb2YgZWFjaCBibG9iLCBtZWFzdXJlZCBpbiBiaXRzLiBNdXN0IGJlXHJcbiAgICAgKiAgICAgd2l0aGluIHRoZSBbMSwxMDQ4NTc2XSByYW5nZSBhbmQgbXVzdCBiZSBkaXZpc2libGUgYnkgOC5cclxuICAgICAqIEBwYXJhbSB7e2Zvcm1hdD86IHN0cmluZywgY2FjaGVTaXplPzogbnVtYmVyfX0gb3B0aW9ucyBBbiBvYmplY3Qgd2hpY2ggbWF5XHJcbiAgICAgKiAgICAgY29udGFpbiBhbnkgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25hbCBwYXJhbWV0ZXJzOlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmZvcm1hdD1iYXNlNjRdIFNwZWNpZmllcyB0aGUgZm9ybWF0IGluIHdoaWNoIHRoZVxyXG4gICAgICogICAgIGJsb2JzIHdpbGwgYmUgcmV0dXJuZWQuIFZhbHVlcyBhbGxvd2VkIGFyZSAnYmFzZTY0JyBhbmQgJ2hleCcgKGRlZmF1bHRcclxuICAgICAqICAgICAnYmFzZTY0JykuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY2FjaGVTaXplPTEwXSBUaGUgbnVtYmVyIG9mIHJlc3VsdC1zZXRzIGZvciB0aGUgY2FjaGVcclxuICAgICAqICAgICB0byB0cnkgdG8gbWFpbnRhaW4gYXQgYW55IGdpdmVuIHRpbWUgKGRlZmF1bHQgMTAsIG1pbmltdW0gMikuXHJcbiAgICAgKiBAcmV0dXJucyB7UmFuZG9tT3JnQ2FjaGV9IEFuIGluc3RhbmNlIG9mIHRoZSBSYW5kb21PcmdDYWNoZSBjbGFzcyB3aGljaFxyXG4gICAgICogICAgIGNhbiBiZSBwb2xsZWQgZm9yIGFycmF5cyBvZiB0cnVlIHJhbmRvbSBibG9icyBhcyBzdHJpbmdzLlxyXG4gICAgICogQHNlZSB7QGxpbmsgUmFuZG9tT3JnQ2xpZW50I0JMT0JfRk9STUFUX0JBU0U2NH0gZm9yICdiYXNlNjQnIChkZWZhdWx0KS5cclxuICAgICAqIEBzZWUge0BsaW5rIFJhbmRvbU9yZ0NsaWVudCNCTE9CX0ZPUk1BVF9IRVh9IGZvciAnaGV4Jy5cclxuICAgICAqL1xyXG4gICAgY3JlYXRlQmxvYkNhY2hlKG4sIHNpemUsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCBjYWNoZVNpemUgPSBvcHRpb25zLmNhY2hlU2l6ZSB8fCAxMDtcclxuICAgICAgICBpZiAoY2FjaGVTaXplIDwgMikge1xyXG4gICAgICAgICAgICBjYWNoZVNpemUgPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbWF4IHNpbmdsZSByZXF1ZXN0IHNpemUsIGluIGJpdHMsIGZvciBhZGp1c3RpbmcgYnVsayByZXF1ZXN0cyBsYXRlclxyXG4gICAgICAgIGxldCBtYXhSZXF1ZXN0U2l6ZSA9IG4gKiBzaXplO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHJlcXVlc3RzIG1vcmUgZWZmaWNpZW50IGJ5IGJ1bGstb3JkZXJpbmcgZnJvbSB0aGUgc2VydmVyLiBJbml0aWFsbHlcclxuICAgICAgICAvLyBzZXQgYXQgY2FjaGVTaXplLzIsIGJ1dCBjYWNoZSB3aWxsIGF1dG8tc2hyaW5rIGJ1bGsgcmVxdWVzdCBzaXplIGlmXHJcbiAgICAgICAgLy8gcmVxdWVzdHMgY2FuJ3QgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgIGxldCBidWxrTiA9IGNhY2hlU2l6ZSAvIDI7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLiNibG9iUmVxdWVzdChuICogYnVsa04sIHNpemUsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFJhbmRvbU9yZ0NhY2hlKHRoaXMuI3NlbmRSZXF1ZXN0LmJpbmQodGhpcyksIHJlcXVlc3QsIGNhY2hlU2l6ZSwgYnVsa04sXHJcbiAgICAgICAgICAgIG4sIG1heFJlcXVlc3RTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvcmUgc2VuZCByZXF1ZXN0IGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgUmVxdWVzdCBvYmplY3QgdG8gc2VuZC5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEEgUHJvbWlzZSB3aGljaCwgaWYgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LFxyXG4gICAgICogICAgIHJlcHJlc2VudHMgdGhlIHJlc3BvbnNlIHByb3ZpZGVkIGJ5IHRoZSBzZXJ2ZXIuIEVsc2UsIGl0IG1heSBiZSByZWplY3RlZFxyXG4gICAgICogICAgIHdpdGggb25lIG9mIHRoZSBmb2xsb3dpbmcgZXJyb3JzOlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnU2VuZFRpbWVvdXRFcnJvcn0gVGhyb3duIHdoZW4gYmxvY2tpbmcgdGltZW91dCBpcyBleGNlZWRlZFxyXG4gICAgICogICAgIGJlZm9yZSB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkgaGFzIGJlZW5cclxuICAgICAqICAgICBzdG9wcGVkLlxyXG4gICAgICogQHRocm93cyB7UmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcn0gVGhyb3duIHdoZW4gdGhlIEFQSSBrZXkncyBzZXJ2ZXJcclxuICAgICAqICAgICByZXF1ZXN0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3J9IFRocm93biB3aGVuIHRoZSBBUEkga2V5J3Mgc2VydmVyXHJcbiAgICAgKiAgICAgYml0cyBhbGxvd2FuY2UgaGFzIGJlZW4gZXhjZWVkZWQuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcn0gVGhyb3duIHdoZW4gYSBIVFRQIDIwMCBPSyByZXNwb25zZVxyXG4gICAgICogICAgIGlzIG5vdCByZWNlaXZlZC5cclxuICAgICAqIEB0aHJvd3Mge1JhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yfSBUaHJvd24gd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBSQU5ET00uT1JHXHJcbiAgICAgKiAgICAgRXJyb3IuXHJcbiAgICAgKiBAdGhyb3dzIHtSYW5kb21PcmdKU09OUlBDRXJyb3J9IFRocm93biB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIEpTT04tUlBDIEVycm9yLlxyXG4gICAgICovXHJcbiAgICAjc2VuZFJlcXVlc3QgPSBhc3luYyBmdW5jdGlvbiAocmVxdWVzdCkge1xyXG4gICAgICAgIC8vIElmIGEgYmFjay1vZmYgaXMgc2V0LCBubyBtb3JlIHJlcXVlc3RzIGNhbiBiZSBpc3N1ZWQgdW50aWwgdGhlIHJlcXVpcmVkIFxyXG4gICAgICAgIC8vIGJhY2stb2ZmIHRpbWUgaXMgdXAuXHJcbiAgICAgICAgaWYgKHRoaXMuI2JhY2tvZmYgIT0gLTEpIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGltZSBub3QgeWV0IHVwLCB0aHJvdyBlcnJvci5cclxuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgPCB0aGlzLiNiYWNrb2ZmKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcih0aGlzLiNiYWNrb2ZmRXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBUaW1lIGlzIHVwLCBjbGVhciBiYWNrLW9mZi5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2JhY2tvZmYgPSAtMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2JhY2tvZmZFcnJvciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB3YWl0ID0gdGhpcy4jYWR2aXNvcnlEZWxheSAtIChEYXRlLm5vdygpIC0gdGhpcy4jbGFzdFJlc3BvbnNlUmVjZWl2ZWRUaW1lKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuI2Jsb2NraW5nVGltZW91dCAhPSAtMSAmJiB3YWl0ID4gdGhpcy4jYmxvY2tpbmdUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5kb21PcmdTZW5kVGltZW91dEVycm9yKCdUaGUgc2VydmVyIGFkdmlzb3J5IGRlbGF5IG9mICcgXHJcbiAgICAgICAgICAgICAgICArIHdhaXQgKyAnbWlsbGlzIGlzIGdyZWF0ZXIgdGhhbiB0aGUgZGVmaW5lZCBtYXhpbXVtIGFsbG93ZWQgJ1xyXG4gICAgICAgICAgICAgICAgKyAnYmxvY2tpbmcgdGltZSBvZiAnICsgdGhpcy4jYmxvY2tpbmdUaW1lb3V0ICsgJ21pbGxpcy4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3YWl0ID4gMCkgeyBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgd2FpdCkpOyB9XHJcblxyXG4gICAgICAgIGxldCBodHRwVGltZW91dCA9IHRoaXMuI2h0dHBUaW1lb3V0O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9pbnZva2UnKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5kb21PcmdTZW5kVGltZW91dEVycm9yKCdUaGUgbWF4aW11bSAnXHJcbiAgICAgICAgICAgICAgICAgICAgKyAnYWxsb3dlZCBibG9ja2luZyB0aW1lIG9mICcgKyBodHRwVGltZW91dCArICdtaWxsaXMgaGFzICdcclxuICAgICAgICAgICAgICAgICAgICArICdiZWVuIGV4Y2VlZGVkIHdoaWxlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2ZXIgdG8gcmVzcG9uZC4nKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcignRXJyb3I6ICdcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyB4aHIuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHVuZG9jdW1lbnRlZCBlcnJvci5cclxuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJyoqIEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgdHJhbnNhY3Rpb24uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIudGltZW91dCA9IGh0dHBUaW1lb3V0O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHBhcnNlIHJlc3BvbnNlIHRvIGdldCBhbiBvYmplY3RcclxuICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGZvciBlcnJvcnNcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29kZSA9IHJlc3BvbnNlLmVycm9yLmNvZGU7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHJlc3BvbnNlLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmVycm9yLmRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgPT0gNDAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcignRXJyb3IgJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArIGNvZGUgKyAnOiAnICsgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT0gNDAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1pZG5pZ2h0VVRDID0gbmV3IERhdGUoKS5zZXRVVENIb3VycygwLDAsMCwwKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNiYWNrb2ZmID0gK21pZG5pZ2h0VVRDO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2JhY2tvZmZFcnJvciA9ICdFcnJvciAnICsgY29kZSArICc6ICcgKyBtZXNzYWdlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZXF1ZXN0c0xlZnQgPSBkYXRhWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcih0aGlzLiNiYWNrb2ZmRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlID09IDQwMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2JpdHNMZWZ0ID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZG9tT3JnSW5zdWZmaWNpZW50Qml0c0Vycm9yKCdFcnJvcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyBjb2RlICsgJzogJyArIG1lc3NhZ2UsIHRoaXMuI2JpdHNMZWZ0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoUmFuZG9tT3JnQ2xpZW50LiNFUlJPUl9DT0RFUy5pbmNsdWRlcyhjb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJhbmRvbU9yZ1JBTkRPTU9SR0Vycm9yIGZyb20gUkFORE9NLk9SRyBFcnJvcnM6IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vYXBpLnJhbmRvbS5vcmcvanNvbi1ycGMvNC9lcnJvci1jb2Rlc1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5kb21PcmdSQU5ET01PUkdFcnJvcignRXJyb3IgJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArIGNvZGUgKyAnOiAnICsgbWVzc2FnZSwgY29kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJhbmRvbU9yZ0pTT05SUENFcnJvciBmcm9tIEpTT04tUlBDIEVycm9yczogXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9hcGkucmFuZG9tLm9yZy9qc29uLXJwYy80L2Vycm9yLWNvZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmRvbU9yZ0pTT05SUENFcnJvcignRXJyb3IgJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArIGNvZGUgKyAnOiAnICsgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE1ldGhvZHMgd2hpY2ggZG8gbm90IHVwZGF0ZSBmaWVsZHMgc3VjaCBhcyByZXF1ZXN0c0xlZnQsIGJpdHNMZWZ0IG9yXHJcbiAgICAgICAgICAgIC8vIGFkdmlzb3J5RGVsYXkuXHJcbiAgICAgICAgICAgIGxldCBpbmRlcGVuZGVudF9tZXRob2RzID0gW1xyXG4gICAgICAgICAgICAgICAgUmFuZG9tT3JnQ2xpZW50LiNWRVJJRllfU0lHTkFUVVJFX01FVEhPRCxcclxuICAgICAgICAgICAgICAgIFJhbmRvbU9yZ0NsaWVudC4jR0VUX1JFU1VMVF9NRVRIT0QsXHJcbiAgICAgICAgICAgICAgICBSYW5kb21PcmdDbGllbnQuI0NSRUFURV9USUNLRVRfTUVUSE9ELFxyXG4gICAgICAgICAgICAgICAgUmFuZG9tT3JnQ2xpZW50LiNMSVNUX1RJQ0tFVF9NRVRIT0QsXHJcbiAgICAgICAgICAgICAgICBSYW5kb21PcmdDbGllbnQuI0dFVF9USUNLRVRfTUVUSE9EXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgaWYgKCFpbmRlcGVuZGVudF9tZXRob2RzLmluY2x1ZGVzKHJlcXVlc3QubWV0aG9kKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jcmVxdWVzdHNMZWZ0ID0gcmVzcG9uc2UucmVzdWx0LnJlcXVlc3RzTGVmdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2JpdHNMZWZ0ID0gcmVzcG9uc2UucmVzdWx0LmJpdHNMZWZ0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdC5hZHZpc29yeURlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWR2aXNvcnlEZWxheSA9IHJlc3BvbnNlLnJlc3VsdC5hZHZpc29yeURlbGF5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgZGVmYXVsdCBpZiBub25lIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2Fkdmlzb3J5RGVsYXkgPSBSYW5kb21PcmdDbGllbnQuI0RFRkFVTFRfREVMQVk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVc2UgZGVmYXVsdCBhZHZpc29yeURlbGF5LlxyXG4gICAgICAgICAgICAgICAgdGhpcy4jYWR2aXNvcnlEZWxheSA9IFJhbmRvbU9yZ0NsaWVudC4jREVGQVVMVF9ERUxBWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNsYXN0UmVzcG9uc2VSZWNlaXZlZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElzc3VlcyBhIGdldFVzYWdlIHJlcXVlc3QgYW5kIHJldHVybnMgdGhlIGluZm9ybWF0aW9uIG9uIHRoZSB1c2FnZVxyXG4gICAgICogb2YgdGhlIEFQSSBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY2xpZW50LCBhcyBpdCBpcyByZXR1cm5lZCBieSB0aGVcclxuICAgICAqIHNlcnZlci4gQ2FuIGFsc28gYmUgdXNlZCB0byB1cGRhdGUgYml0cyBhbmQgcmVxdWVzdHMgbGVmdC5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIFByb21pc2UsIHdoaWNoIGlmIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgcmVwcmVzZW50c1xyXG4gICAgICogICAgIHRoZSByZXN1bHQgZmllbGQgYXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlci5cclxuICAgICAqL1xyXG4gICAgI2dldFVzYWdlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy4jZ2VuZXJhdGVLZXllZFJlcXVlc3QoUmFuZG9tT3JnQ2xpZW50LiNHRVRfVVNBR0VfTUVUSE9ELCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4dHJhY3RSZXN1bHQodGhpcy4jc2VuZFJlcXVlc3QocmVxdWVzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBnZW5lcmljIHJlcXVlc3QgcGFyYW1ldGVycyB0byBjdXN0b20gcmVxdWVzdC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgTWV0aG9kIHRvIHNlbmQgcmVxdWVzdCB0by5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgQ3VzdG9tIHBhcmFtZXRlcnMgdG8gZ2VuZXJhdGUgcmVxdWVzdCBhcm91bmQuXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGbGVzaGVkIG91dCByZXF1ZXN0IG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgI2dlbmVyYXRlUmVxdWVzdCA9IChtZXRob2QsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIGxldCBpZCA9IHRoaXMuI3V1aWR2NCgpO1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICBqc29ucnBjOiAnMi4wJyxcclxuICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxyXG4gICAgICAgICAgICBpZDogaWRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBnZW5lcmljIHJlcXVlc3QgcGFyYW1ldGVycyBhbmQgQVBJIGtleSB0byBjdXN0b20gcmVxdWVzdC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgTWV0aG9kIHRvIHNlbmQgcmVxdWVzdCB0by5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgQ3VzdG9tIHBhcmFtZXRlcnMgdG8gZ2VuZXJhdGUgcmVxdWVzdCBhcm91bmQuXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGbGVzaGVkIG91dCByZXF1ZXN0IG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgI2dlbmVyYXRlS2V5ZWRSZXF1ZXN0ID0gKG1ldGhvZCwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgcGFyYW1zWydhcGlLZXknXSA9IHRoaXMuI2FwaUtleTtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZ2VuZXJhdGVSZXF1ZXN0KG1ldGhvZCwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3RzIGJhc2ljIGRhdGEgZnJvbSByZXNwb25zZSBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UgT2JqZWN0IGZyb20gd2hpY2ggdG8gZXh0cmFjdCBkYXRhLlxyXG4gICAgICogQHJldHVybnMge2FueVtdfSBFeHRyYWN0ZWQgZGF0YSBhcyBhbiBhcnJheS5cclxuICAgICAqL1xyXG4gICAgI2V4dHJhY3RCYXNpYyA9IGFzeW5jIHJlc3BvbnNlID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEucmVzdWx0LnJhbmRvbS5kYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBkYXRhLCByYW5kb20gZmllbGQgYW5kIHNpZ25hdHVyZSBmcm9tIHJlc3BvbnNlIGFuZCByZXR1cm5zIHRoZXNlIGFzXHJcbiAgICAgKiBhIG5ldyBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UgT2JqZWN0IGZyb20gd2hpY2ggdG8gZXh0cmFjdCB0aGUgaW5mb3JtYXRpb24uXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7ZGF0YTogbnVtYmVyW118bnVtYmVyW11bXXxzdHJpbmdbXXxzdHJpbmdbXVtdLCByYW5kb206IE9iamVjdCxcclxuICAgICAqICAgICBzaWduYXR1cmU6IHN0cmluZ30+fSBUaGUgcmVzcG9uc2Ugc3BsaXQgaW50byBkYXRhLCByYW5kb20gYW5kIHNpZ25hdHVyZSBmaWVsZHMuXHJcbiAgICAgKi9cclxuICAgICNleHRyYWN0U2lnbmVkID0gYXN5bmMgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YS5yZXN1bHQucmFuZG9tLmRhdGEsXHJcbiAgICAgICAgICAgICAgICByYW5kb206IGRhdGEucmVzdWx0LnJhbmRvbSxcclxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZGF0YS5yZXN1bHQuc2lnbmF0dXJlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHZlcmlmaWNhdGlvbiByZXNwb25zZSBhcyBzZXBhcmF0ZSBmcm9tIHJlc3BvbnNlIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZSBSZXNwb25zZSBvYmplY3QgZnJvbSB3aGljaCB0byBleHRyYWN0XHJcbiAgICAgKiAgICAgdmVyaWZpY2F0aW9uIHJlc3BvbnNlLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFZlcmlmaWNhdGlvbiBzdWNjZXNzLlxyXG4gICAgICovXHJcbiAgICAjZXh0cmFjdFZlcmlmaWNhdGlvbiA9IGFzeW5jIHJlc3BvbnNlID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEucmVzdWx0LmF1dGhlbnRpY2l0eTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3RzIHRoZSBpbmZvcm1hdGlvbiByZXR1cm5lZCB1bmRlciB0aGUgJ3Jlc3VsdCcgZmllbGQuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UgUmVzcG9uc2Ugb2JqZWN0IHJldHVybmVkIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEFsbCBkYXRhIGNvbnRhaW5lZCBpbiB0aGUgJ3Jlc3VsdCcgZmllbGQuXHJcbiAgICAgKi9cclxuICAgICNleHRyYWN0UmVzdWx0ID0gYXN5bmMgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgcmVxdWVzdHMgZm9yIGludGVnZXJzLlxyXG4gICAgICovXHJcbiAgICAjaW50ZWdlclJlcXVlc3QgPSAobiwgbWluLCBtYXgsIHsgcmVwbGFjZW1lbnQgPSB0cnVlLCBiYXNlID0gMTAsIHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24gPSBudWxsLCBsaWNlbnNlRGF0YSA9IG51bGwsIHVzZXJEYXRhID0gbnVsbCwgdGlja2V0SWQgPSBudWxsIH0gPSB7fSwgc2lnbmVkID0gZmFsc2UpID0+IHtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBuOiBuLFxyXG4gICAgICAgICAgICBtaW46IG1pbixcclxuICAgICAgICAgICAgbWF4OiBtYXgsXHJcbiAgICAgICAgICAgIHJlcGxhY2VtZW50OiByZXBsYWNlbWVudCxcclxuICAgICAgICAgICAgYmFzZTogYmFzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhcmFtcyA9IHRoaXMuI2FkZE9wdGlvbmFsUGFyYW1zKHBhcmFtcywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbixcclxuICAgICAgICAgICAgbGljZW5zZURhdGEsIHVzZXJEYXRhLCB0aWNrZXRJZCwgc2lnbmVkKTtcclxuXHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHNpZ25lZCA/IFJhbmRvbU9yZ0NsaWVudC4jU0lHTkVEX0lOVEVHRVJfTUVUSE9EIDogUmFuZG9tT3JnQ2xpZW50LiNJTlRFR0VSX01FVEhPRDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2dlbmVyYXRlS2V5ZWRSZXF1ZXN0KG1ldGhvZCwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBnZW5lcmF0ZSByZXF1ZXN0cyBmb3IgaW50ZWdlciBzZXF1ZW5jZXMuXHJcbiAgICAgKi9cclxuICAgICNpbnRlZ2VyU2VxdWVuY2VSZXF1ZXN0ID0gKG4sIGxlbmd0aCwgbWluLCBtYXgsIHsgcmVwbGFjZW1lbnQgPSB0cnVlLCBiYXNlID0gMTAsIHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24gPSBudWxsLCBsaWNlbnNlRGF0YSA9IG51bGwsIHVzZXJEYXRhID0gbnVsbCwgdGlja2V0SWQgPSBudWxsIH0gPSB7fSwgc2lnbmVkID0gZmFsc2UpID0+IHtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBuOiBuLFxyXG4gICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcclxuICAgICAgICAgICAgbWluOiBtaW4sXHJcbiAgICAgICAgICAgIG1heDogbWF4LFxyXG4gICAgICAgICAgICByZXBsYWNlbWVudDogcmVwbGFjZW1lbnQsXHJcbiAgICAgICAgICAgIGJhc2U6IGJhc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwYXJhbXMgPSB0aGlzLiNhZGRPcHRpb25hbFBhcmFtcyhwYXJhbXMsIHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24sXHJcbiAgICAgICAgICAgIGxpY2Vuc2VEYXRhLCB1c2VyRGF0YSwgdGlja2V0SWQsIHNpZ25lZCk7XHJcblxyXG4gICAgICAgIGxldCBtZXRob2QgPSBzaWduZWQgPyBSYW5kb21PcmdDbGllbnQuI1NJR05FRF9JTlRFR0VSX1NFUVVFTkNFX01FVEhPRCA6IFJhbmRvbU9yZ0NsaWVudC4jSU5URUdFUl9TRVFVRU5DRV9NRVRIT0Q7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLiNnZW5lcmF0ZUtleWVkUmVxdWVzdChtZXRob2QsIHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgcmVxdWVzdHMgZm9yIGRlY2ltYWwgZnJhY3Rpb25zLlxyXG4gICAgICovXHJcbiAgICAjZGVjaW1hbEZyYWN0aW9uUmVxdWVzdCA9IChuLCBkZWNpbWFsUGxhY2VzLCB7IHJlcGxhY2VtZW50ID0gdHJ1ZSwgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbiA9IG51bGwsIGxpY2Vuc2VEYXRhID0gbnVsbCwgdXNlckRhdGEgPSBudWxsLCB0aWNrZXRJZCA9IG51bGwgfSA9IHt9LCBzaWduZWQgPSBmYWxzZSkgPT4ge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIG46IG4sXHJcbiAgICAgICAgICAgIGRlY2ltYWxQbGFjZXM6IGRlY2ltYWxQbGFjZXMsXHJcbiAgICAgICAgICAgIHJlcGxhY2VtZW50OiByZXBsYWNlbWVudFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhcmFtcyA9IHRoaXMuI2FkZE9wdGlvbmFsUGFyYW1zKHBhcmFtcywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbixcclxuICAgICAgICAgICAgbGljZW5zZURhdGEsIHVzZXJEYXRhLCB0aWNrZXRJZCwgc2lnbmVkKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbWV0aG9kID0gc2lnbmVkID8gUmFuZG9tT3JnQ2xpZW50LiNTSUdORURfREVDSU1BTF9GUkFDVElPTl9NRVRIT0QgOiBSYW5kb21PcmdDbGllbnQuI0RFQ0lNQUxfRlJBQ1RJT05fTUVUSE9EO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy4jZ2VuZXJhdGVLZXllZFJlcXVlc3QobWV0aG9kLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHJlcXVlc3RzIGZvciBHYXVzc2lhbnMuXHJcbiAgICAgKi9cclxuICAgICNnYXVzc2lhblJlcXVlc3QgPSAobiwgbWVhbiwgc3RhbmRhcmREZXZpYXRpb24sIHNpZ25pZmljYW50RGlnaXRzLCB7IHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24gPSBudWxsLCBsaWNlbnNlRGF0YSA9IG51bGwsIHVzZXJEYXRhID0gbnVsbCwgdGlja2V0SWQgPSBudWxsIH0gPSB7fSwgc2lnbmVkID0gZmFsc2UpID0+IHtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBuOiBuLFxyXG4gICAgICAgICAgICBtZWFuOiBtZWFuLFxyXG4gICAgICAgICAgICBzdGFuZGFyZERldmlhdGlvbjogc3RhbmRhcmREZXZpYXRpb24sXHJcbiAgICAgICAgICAgIHNpZ25pZmljYW50RGlnaXRzOiBzaWduaWZpY2FudERpZ2l0c1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhcmFtcyA9IHRoaXMuI2FkZE9wdGlvbmFsUGFyYW1zKHBhcmFtcywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbixcclxuICAgICAgICAgICAgbGljZW5zZURhdGEsIHVzZXJEYXRhLCB0aWNrZXRJZCwgc2lnbmVkKTtcclxuXHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHNpZ25lZCA/IFJhbmRvbU9yZ0NsaWVudC4jU0lHTkVEX0dBVVNTSUFOX01FVEhPRCA6IFJhbmRvbU9yZ0NsaWVudC4jR0FVU1NJQU5fTUVUSE9EO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy4jZ2VuZXJhdGVLZXllZFJlcXVlc3QobWV0aG9kLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHJlcXVlc3RzIGZvciBzdHJpbmdzLlxyXG4gICAgICovXHJcbiAgICAjc3RyaW5nUmVxdWVzdCA9IChuLCBsZW5ndGgsIGNoYXJhY3RlcnMsIHsgcmVwbGFjZW1lbnQgPSB0cnVlLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uID0gbnVsbCwgbGljZW5zZURhdGEgPSBudWxsLCB1c2VyRGF0YSA9IG51bGwsIHRpY2tldElkID0gbnVsbCB9ID0ge30sIHNpZ25lZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgbjogbixcclxuICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXHJcbiAgICAgICAgICAgIGNoYXJhY3RlcnM6IGNoYXJhY3RlcnMsXHJcbiAgICAgICAgICAgIHJlcGxhY2VtZW50OiByZXBsYWNlbWVudFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhcmFtcyA9IHRoaXMuI2FkZE9wdGlvbmFsUGFyYW1zKHBhcmFtcywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbixcclxuICAgICAgICAgICAgbGljZW5zZURhdGEsIHVzZXJEYXRhLCB0aWNrZXRJZCwgc2lnbmVkKTtcclxuXHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHNpZ25lZCA/IFJhbmRvbU9yZ0NsaWVudC4jU0lHTkVEX1NUUklOR19NRVRIT0QgOiBSYW5kb21PcmdDbGllbnQuI1NUUklOR19NRVRIT0Q7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLiNnZW5lcmF0ZUtleWVkUmVxdWVzdChtZXRob2QsIHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgcmVxdWVzdHMgZm9yIFVVSURzLlxyXG4gICAgICovXHJcbiAgICAjVVVJRFJlcXVlc3QgPSAobiwgeyBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uID0gbnVsbCwgbGljZW5zZURhdGEgPSBudWxsLCB1c2VyRGF0YSA9IG51bGwsIHRpY2tldElkID0gbnVsbCB9ID0ge30sIHNpZ25lZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgbjogblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhcmFtcyA9IHRoaXMuI2FkZE9wdGlvbmFsUGFyYW1zKHBhcmFtcywgcHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbixcclxuICAgICAgICAgICAgbGljZW5zZURhdGEsIHVzZXJEYXRhLCB0aWNrZXRJZCwgc2lnbmVkKTtcclxuXHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHNpZ25lZCA/IFJhbmRvbU9yZ0NsaWVudC4jU0lHTkVEX1VVSURfTUVUSE9EIDogUmFuZG9tT3JnQ2xpZW50LiNVVUlEX01FVEhPRDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2dlbmVyYXRlS2V5ZWRSZXF1ZXN0KG1ldGhvZCwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBnZW5lcmF0ZSByZXF1ZXN0cyBmb3IgYmxvYnMuXHJcbiAgICAgKi9cclxuICAgICNibG9iUmVxdWVzdCA9IChuLCBzaXplLCB7IGZvcm1hdCA9IHRoaXMuQkFTRTY0LCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uID0gbnVsbCwgbGljZW5zZURhdGEgPSBudWxsLCB1c2VyRGF0YSA9IG51bGwsIHRpY2tldElkID0gbnVsbCB9LCBzaWduZWQgPSBmYWxzZSkgPT4ge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIG46IG4sXHJcbiAgICAgICAgICAgIHNpemU6IHNpemUsXHJcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcGFyYW1zID0gdGhpcy4jYWRkT3B0aW9uYWxQYXJhbXMocGFyYW1zLCBwcmVnZW5lcmF0ZWRSYW5kb21pemF0aW9uLFxyXG4gICAgICAgICAgICBsaWNlbnNlRGF0YSwgdXNlckRhdGEsIHRpY2tldElkLCBzaWduZWQpO1xyXG5cclxuICAgICAgICBsZXQgbWV0aG9kID0gc2lnbmVkID8gUmFuZG9tT3JnQ2xpZW50LiNTSUdORURfQkxPQl9NRVRIT0QgOiBSYW5kb21PcmdDbGllbnQuI0JMT0JfTUVUSE9EO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy4jZ2VuZXJhdGVLZXllZFJlcXVlc3QobWV0aG9kLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCBvcHRpb25hbCBwYXJhbWV0ZXJzIHdoaWNoIGFyZSBjb21tb24gYWNyb3NzXHJcbiAgICAgKiB2YWx1ZS1nZW5lcmF0aW5nIG1ldGhvZHMuXHJcbiAgICAgKi9cclxuICAgICNhZGRPcHRpb25hbFBhcmFtcyA9IChwYXJhbXMsIHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24sIGxpY2Vuc2VEYXRhLCB1c2VyRGF0YSwgdGlja2V0SWQsIHNpZ25lZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgLy8gYXZhaWxhYmxlIGZvciBib3RoIEJhc2ljIGFuZCBTaWduZWQgQVBJIG1ldGhvZHNcclxuICAgICAgICBwYXJhbXMucHJlZ2VuZXJhdGVkUmFuZG9taXphdGlvbiA9IHByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb247XHJcblxyXG4gICAgICAgIC8vIG9wdGlvbmFsIHBhcmFtZXRlcnMgdXNlZCBleGNsdXNpdmVseSBmb3IgU2lnbmVkIEFQSSBtZXRob2RzXHJcbiAgICAgICAgaWYgKHNpZ25lZCkge1xyXG4gICAgICAgICAgICBwYXJhbXMubGljZW5zZURhdGEgPSBsaWNlbnNlRGF0YTtcclxuICAgICAgICAgICAgcGFyYW1zLnVzZXJEYXRhID0gdXNlckRhdGE7XHJcbiAgICAgICAgICAgIHBhcmFtcy50aWNrZXRJZCA9IHRpY2tldElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhbiBpbnRlZ2VyIHNlcXVlbmNlIGNhY2hlLiBcclxuICAgICAqIEBwYXJhbSB7YW55W119IG9yaWdpbmFsIFRoZSBhcnJheSB0byBiZSByZXBlYXRlZC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdGhlIG9yaWdpbmFsIGFycmF5IGlzIHRvIGJlXHJcbiAgICAgKiAgICAgcmVwZWF0ZWQuXHJcbiAgICAgKiBAcmV0dXJucyB7YW55W119IEEgbmV3IGFycmF5IHdoaWNoIGNvbnRhaW5zIHRoZSBvcmlnaW5hbCBhcnJheSByZXBlYXRlZFxyXG4gICAgICogICAgIG4gdGltZXMuXHJcbiAgICAgKi9cclxuICAgICNhZGp1c3QgPSAob3JpZ2luYWwsIG4pID0+IHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogbiB9LCAoKSA9PiBvcmlnaW5hbCkuZmxhdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhbiBpbnRlZ2VyIHNlcXVlbmNlIGNhY2hlLlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyfG51bWJlcltdKX0gYSBBbiBhcnJheSBvZiBpbnRlZ2VycyAob3IgYSBzaW5nbGUgdmFsdWUpLlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gTGFyZ2VzdCB2YWx1ZSBpbiB0aGUgYXJyYXkgKG9yIGEsIHVuY2hhbmdlZCwgaWYgaXRcclxuICAgICAqICAgICBpcyBub3QgYW4gYXJyYXkpLlxyXG4gICAgICovXHJcbiAgICAjbWF4VmFsdWUgPSBhID0+IHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5yZWR1Y2UoZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHgsIHkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFuIGludGVnZXIgc2VxdWVuY2UgY2FjaGUuXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8bnVtYmVyW10pfSBhIEFuIGFycmF5IG9mIGludGVnZXJzIChvciBhIHNpbmdsZSB2YWx1ZSkuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBTbWFsbGVzdCB2YWx1ZSBpbiB0aGUgYXJyYXkgKG9yIGEsIHVuY2hhbmdlZCwgaWYgaXRcclxuICAgICAqICAgICBpcyBub3QgYW4gYXJyYXkpLlxyXG4gICAgICovXHJcbiAgICAjbWluVmFsdWUgPSBhID0+IHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5yZWR1Y2UoZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHgsIHkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEhlbHBlciBmdW5jdGlvbiB0byBtYWtlIGEgc3RyaW5nIFVSTC1zYWZlIChiYXNlNjQgYW5kIHBlcmNlbnQtZW5jb2RpbmcpICovXHJcbiAgICAjZm9ybWF0VXJsID0gcyA9PiB7XHJcbiAgICAgICAgbGV0IHBhdHRlcm4gPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XHJcbiAgICAgICAgbGV0IGlzQmFzZTY0ID0gcGF0dGVybi50ZXN0KHMpO1xyXG5cclxuICAgICAgICBpZiAoIWlzQmFzZTY0KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnJvd3NlclxyXG4gICAgICAgICAgICAgICAgICAgIHMgPSBidG9hKHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVmZXJlbmNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb2RlSlNcclxuICAgICAgICAgICAgICAgICAgICBzID0gQnVmZmVyLmZyb20ocykudG9TdHJpbmcoJ2Jhc2U2NCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQZXJjZW50LUVuY29kaW5nIGFzIGRlc2NyaWJlZCBpbiBSRkMgMzk4NiBmb3IgUEhQXHJcbiAgICAgICAgcyA9IHMucmVwbGFjZSgvPS9nLCAnJTNEJyk7XHJcbiAgICAgICAgcyA9IHMucmVwbGFjZSgvXFwrL2csICclMkInKTtcclxuICAgICAgICBzID0gcy5yZXBsYWNlKC9cXC8vZywgJyUyRicpO1xyXG5cclxuICAgICAgICByZXR1cm4gc1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgSFRNTCBpbnB1dCB0YWcgKi9cclxuICAgICNpbnB1dEhUTUwgPSAodHlwZSwgbmFtZSwgdmFsdWUpID0+IHtcclxuICAgICAgICByZXR1cm4gJzxpbnB1dCB0eXBlPVxcJycgKyB0eXBlICsgJ1xcJyBuYW1lPVxcJycgKyBuYW1lICsgJ1xcJyB2YWx1ZT1cXCcnICsgdmFsdWUgKyAnXFwnIC8+JztcclxuICAgIH1cclxuXHJcbiAgICAvKiogSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIFVVSURzIHRvIGJlIHVzZWQgYXMgXCJpZFwiIGluIHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIuICovXHJcbiAgICAjdXVpZHY0ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcclxuICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpKjE2IHwgMDtcclxuICAgICAgICAgICAgcmV0dXJuIChjID09ICd4JyA/IHIgOiAociYweDN8MHg4KSkudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqIFxyXG4gKiBFUyBNb2R1bGUgd3JhcHBlciwgYWxsb3dpbmcgdGhpcyBsaWJyYXJ5IHRvIGJlIGltcG9ydGVkIHVzaW5nXHJcbiAqIEVTNisgc3ludGF4LiBUaGUgUmFuZG9tT3JnQ2xpZW50IGNsYXNzIGlzIGJvdGggdGhlIGRlZmF1bHQgYW5kXHJcbiAqIGEgbmFtZWQgZXhwb3J0LiBBbGwgZXJyb3IgY2xhc3NlcywgYXJlIGF2YWlsYWJsZSBvbmx5IGFzIG5hbWVkXHJcbiAqIGV4cG9ydHMuXHJcbiAqICovXHJcbmltcG9ydCBSYW5kb21PcmdDbGllbnQgZnJvbSAnLi4vUmFuZG9tT3JnQ2xpZW50LmpzJztcclxuaW1wb3J0IFJhbmRvbU9yZ0NhY2hlIGZyb20gJy4uL1JhbmRvbU9yZ0NhY2hlLmpzJztcclxuaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gJy4uL1JhbmRvbU9yZ0Vycm9ycy5qcyc7XHJcblxyXG5sZXQgUmFuZG9tT3JnUkFORE9NT1JHRXJyb3IgPSBFcnJvcnMuZGVmYXVsdC5SYW5kb21PcmdSQU5ET01PUkdFcnJvcjtcclxubGV0IFJhbmRvbU9yZ0JhZEhUVFBSZXNwb25zZUVycm9yID0gRXJyb3JzLmRlZmF1bHQuUmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3I7XHJcbmxldCBSYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3IgPSBFcnJvcnMuZGVmYXVsdC5SYW5kb21PcmdJbnN1ZmZpY2llbnRCaXRzRXJyb3I7XHJcbmxldCBSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yID0gRXJyb3JzLmRlZmF1bHQuUmFuZG9tT3JnSW5zdWZmaWNpZW50UmVxdWVzdHNFcnJvcjtcclxubGV0IFJhbmRvbU9yZ0pTT05SUENFcnJvciA9IEVycm9ycy5kZWZhdWx0LlJhbmRvbU9yZ0pTT05SUENFcnJvcjtcclxubGV0IFJhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvciA9IEVycm9ycy5kZWZhdWx0LlJhbmRvbU9yZ0tleU5vdFJ1bm5pbmdFcnJvcjtcclxubGV0IFJhbmRvbU9yZ1NlbmRUaW1lb3V0RXJyb3IgPSBFcnJvcnMuZGVmYXVsdC5SYW5kb21PcmdTZW5kVGltZW91dEVycm9yO1xyXG5sZXQgUmFuZG9tT3JnQ2FjaGVFbXB0eUVycm9yID0gRXJyb3JzLmRlZmF1bHQuUmFuZG9tT3JnQ2FjaGVFbXB0eUVycm9yO1xyXG5cclxuZXhwb3J0IHtcclxuICAgIFJhbmRvbU9yZ0NsaWVudCBhcyBkZWZhdWx0LFxyXG4gICAgUmFuZG9tT3JnQ2xpZW50LFxyXG4gICAgUmFuZG9tT3JnQ2FjaGUsXHJcbiAgICBSYW5kb21PcmdCYWRIVFRQUmVzcG9uc2VFcnJvcixcclxuICAgIFJhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvcixcclxuICAgIFJhbmRvbU9yZ0luc3VmZmljaWVudFJlcXVlc3RzRXJyb3IsXHJcbiAgICBSYW5kb21PcmdKU09OUlBDRXJyb3IsXHJcbiAgICBSYW5kb21PcmdLZXlOb3RSdW5uaW5nRXJyb3IsXHJcbiAgICBSYW5kb21PcmdSQU5ET01PUkdFcnJvcixcclxuICAgIFJhbmRvbU9yZ1NlbmRUaW1lb3V0RXJyb3IsXHJcbiAgICBSYW5kb21PcmdDYWNoZUVtcHR5RXJyb3JcclxufTsiXSwibmFtZXMiOlsiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdXBlciIsImJpdHMiLCJ0aGlzIiwiZ2V0Qml0c0xlZnQiLCJjb2RlIiwiZ2V0Q29kZSIsInBhdXNlZCIsIndhc1BhdXNlZCIsIlJhbmRvbU9yZ0luc3VmZmljaWVudEJpdHNFcnJvciIsIlJhbmRvbU9yZ0NhY2hlRW1wdHlFcnJvciIsInJlcXVpcmUkJDAiLCJSYW5kb21PcmdDYWNoZV8xIiwicmVxdWVzdEZ1bmN0aW9uIiwicmVxdWVzdCIsImJ1bGtSZXF1ZXN0TnVtYmVyIiwicmVxdWVzdE51bWJlciIsInJlcXVlc3RTaXplIiwic3RhY2siLCJjYWNoZVNpemUiLCJiaXRzVXNlZCIsInJlcXVlc3RzVXNlZCIsImN1cnJlbnRseVBvcHVsYXRpbmciLCJlcnJvciIsInNpbmdsZVJlcXVlc3RTaXplIiwicG9wdWxhdGUiLCJhc3luYyIsInJlc3BvbnNlIiwibGVuZ3RoIiwiZSIsImJpdHNMZWZ0IiwiYWRqdXN0ZWRCdWxrIiwiTWF0aCIsImZsb29yIiwicGFyYW1zIiwibiIsInN0b3AiLCJyZXN1bWUiLCJpc1BhdXNlZCIsImdldCIsImRhdGEiLCJwb3AiLCJnZXRPcldhaXQiLCJQcm9taXNlIiwiciIsInNldFRpbWVvdXQiLCJnZXRDYWNoZWRWYWx1ZXMiLCJnZXRCaXRzVXNlZCIsImdldFJlcXVlc3RzVXNlZCIsInJlZnJlc2giLCJhZGRSZXNwb25zZSIsImJ1bGsiLCJyZXN1bHQiLCJyYW5kb20iLCJpIiwicHVzaCIsInNsaWNlIiwiUmFuZG9tT3JnQmFkSFRUUFJlc3BvbnNlRXJyb3IiLCJSYW5kb21PcmdJbnN1ZmZpY2llbnRSZXF1ZXN0c0Vycm9yIiwiUmFuZG9tT3JnSlNPTlJQQ0Vycm9yIiwiUmFuZG9tT3JnS2V5Tm90UnVubmluZ0Vycm9yIiwiUmFuZG9tT3JnUkFORE9NT1JHRXJyb3IiLCJSYW5kb21PcmdTZW5kVGltZW91dEVycm9yIiwiUmFuZG9tT3JnQ2FjaGUiLCJyZXF1aXJlJCQxIiwiUmFuZG9tT3JnQ2xpZW50XzEiLCJSYW5kb21PcmdDbGllbnQiLCJJTlRFR0VSX01FVEhPRCIsIklOVEVHRVJfU0VRVUVOQ0VfTUVUSE9EIiwiREVDSU1BTF9GUkFDVElPTl9NRVRIT0QiLCJHQVVTU0lBTl9NRVRIT0QiLCJTVFJJTkdfTUVUSE9EIiwiVVVJRF9NRVRIT0QiLCJCTE9CX01FVEhPRCIsIkdFVF9VU0FHRV9NRVRIT0QiLCJTSUdORURfSU5URUdFUl9NRVRIT0QiLCJTSUdORURfSU5URUdFUl9TRVFVRU5DRV9NRVRIT0QiLCJTSUdORURfREVDSU1BTF9GUkFDVElPTl9NRVRIT0QiLCJTSUdORURfR0FVU1NJQU5fTUVUSE9EIiwiU0lHTkVEX1NUUklOR19NRVRIT0QiLCJTSUdORURfVVVJRF9NRVRIT0QiLCJTSUdORURfQkxPQl9NRVRIT0QiLCJHRVRfUkVTVUxUX01FVEhPRCIsIkNSRUFURV9USUNLRVRfTUVUSE9EIiwiTElTVF9USUNLRVRfTUVUSE9EIiwiR0VUX1RJQ0tFVF9NRVRIT0QiLCJWRVJJRllfU0lHTkFUVVJFX01FVEhPRCIsIkJMT0JfRk9STUFUX0JBU0U2NCIsIkJMT0JfRk9STUFUX0hFWCIsIkRFRkFVTFRfUkVQTEFDRU1FTlQiLCJERUZBVUxUX0JBU0UiLCJERUZBVUxUX1VTRVJfREFUQSIsIkRFRkFVTFRfVElDS0VUX0lEIiwiREVGQVVMVF9QUkVHRU5FUkFURURfUkFORE9NSVpBVElPTiIsIkRFRkFVTFRfTElDRU5TRV9EQVRBIiwiVVVJRF9TSVpFIiwiREVGQVVMVF9CTE9DS0lOR19USU1FT1VUIiwiREVGQVVMVF9IVFRQX1RJTUVPVVQiLCJNQVhfVVJMX0xFTkdUSCIsIkRFRkFVTFRfREVMQVkiLCJBTExPV0FOQ0VfU1RBVEVfUkVGUkVTSF9TRUNPTkRTIiwicmVxdWVzdHNMZWZ0IiwiYmFja29mZiIsImJhY2tvZmZFcnJvciIsImFwaUtleSIsImJsb2NraW5nVGltZW91dCIsImh0dHBUaW1lb3V0IiwiYWR2aXNvcnlEZWxheSIsImxhc3RSZXNwb25zZVJlY2VpdmVkVGltZSIsImtleUluZGV4ZWRJbnN0YW5jZXMiLCJFUlJPUl9DT0RFUyIsIm9wdGlvbnMiLCJnZW5lcmF0ZUludGVnZXJzIiwibWluIiwibWF4IiwiZ2VuZXJhdGVJbnRlZ2VyU2VxdWVuY2VzIiwiZ2VuZXJhdGVEZWNpbWFsRnJhY3Rpb25zIiwiZGVjaW1hbFBsYWNlcyIsImdlbmVyYXRlR2F1c3NpYW5zIiwibWVhbiIsInN0YW5kYXJkRGV2aWF0aW9uIiwic2lnbmlmaWNhbnREaWdpdHMiLCJnZW5lcmF0ZVN0cmluZ3MiLCJjaGFyYWN0ZXJzIiwiZ2VuZXJhdGVVVUlEcyIsImdlbmVyYXRlQmxvYnMiLCJzaXplIiwiZ2VuZXJhdGVTaWduZWRJbnRlZ2VycyIsImdlbmVyYXRlU2lnbmVkSW50ZWdlclNlcXVlbmNlcyIsImdlbmVyYXRlU2lnbmVkRGVjaW1hbEZyYWN0aW9ucyIsImdlbmVyYXRlU2lnbmVkR2F1c3NpYW5zIiwiZ2VuZXJhdGVTaWduZWRTdHJpbmdzIiwiZ2VuZXJhdGVTaWduZWRVVUlEcyIsImdlbmVyYXRlU2lnbmVkQmxvYnMiLCJ2ZXJpZnlTaWduYXR1cmUiLCJzaWduYXR1cmUiLCJ1cGRhdGUiLCJEYXRlIiwibm93IiwiZ2V0UmVxdWVzdHNMZWZ0IiwiZ2V0UmVzdWx0Iiwic2VyaWFsTnVtYmVyIiwiY3JlYXRlVGlja2V0cyIsInNob3dSZXN1bHQiLCJsaXN0VGlja2V0cyIsInRpY2tldFR5cGUiLCJnZXRUaWNrZXQiLCJ0aWNrZXRJZCIsImNyZWF0ZVVybCIsInVybCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVIdG1sIiwicyIsImNyZWF0ZUludGVnZXJDYWNoZSIsIm1heFJlcXVlc3RTaXplIiwiY2VpbCIsImxvZyIsImJ1bGtOIiwicmVwbGFjZW1lbnQiLCJiaW5kIiwiY3JlYXRlSW50ZWdlclNlcXVlbmNlQ2FjaGUiLCJyZXBsIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJ4IiwiYmFzZSIsImNyZWF0ZURlY2ltYWxGcmFjdGlvbkNhY2hlIiwiY3JlYXRlR2F1c3NpYW5DYWNoZSIsInBvdyIsImNyZWF0ZVN0cmluZ0NhY2hlIiwiY3JlYXRlVVVJRENhY2hlIiwiY3JlYXRlQmxvYkNhY2hlIiwic2VuZFJlcXVlc3QiLCJ3YWl0IiwicmVzb2x2ZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnRpbWVvdXQiLCJvbmxvYWQiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJvbmVycm9yIiwiY29uc29sZSIsImluZm8iLCJ0aW1lb3V0Iiwic2VuZCIsInRoZW4iLCJwYXJzZSIsIm1pZG5pZ2h0VVRDIiwic2V0VVRDSG91cnMiLCJpbmNsdWRlcyIsIm1ldGhvZCIsImdldFVzYWdlIiwiZ2VuZXJhdGVSZXF1ZXN0IiwianNvbnJwYyIsImlkIiwiZ2VuZXJhdGVLZXllZFJlcXVlc3QiLCJleHRyYWN0QmFzaWMiLCJleHRyYWN0U2lnbmVkIiwiZXh0cmFjdFZlcmlmaWNhdGlvbiIsImF1dGhlbnRpY2l0eSIsImV4dHJhY3RSZXN1bHQiLCJpbnRlZ2VyUmVxdWVzdCIsInByZWdlbmVyYXRlZFJhbmRvbWl6YXRpb24iLCJsaWNlbnNlRGF0YSIsInVzZXJEYXRhIiwic2lnbmVkIiwiaW50ZWdlclNlcXVlbmNlUmVxdWVzdCIsImRlY2ltYWxGcmFjdGlvblJlcXVlc3QiLCJnYXVzc2lhblJlcXVlc3QiLCJzdHJpbmdSZXF1ZXN0IiwiVVVJRFJlcXVlc3QiLCJibG9iUmVxdWVzdCIsImZvcm1hdCIsIkJBU0U2NCIsImFkZE9wdGlvbmFsUGFyYW1zIiwiYWRqdXN0Iiwib3JpZ2luYWwiLCJmcm9tIiwiZmxhdCIsIm1heFZhbHVlIiwiYSIsInJlZHVjZSIsInkiLCJtaW5WYWx1ZSIsImZvcm1hdFVybCIsInRlc3QiLCJ3aW5kb3ciLCJidG9hIiwiUmVmZXJlbmNlRXJyb3IiLCJCdWZmZXIiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJpbnB1dEhUTUwiLCJ0eXBlIiwibmFtZSIsInZhbHVlIiwidXVpZHY0IiwiYyIsIkVycm9ycy5kZWZhdWx0Il0sIm1hcHBpbmdzIjoib0ZBTXdDLGNBQTRDQSxNQU1oRkMsWUFBWUMsR0FDUkMsTUFBTUQsc0NBWTRCLGNBQTZDRixNQUduRkksT0FBUyxFQVFUSCxZQUFZQyxFQUFTRSxHQUNqQkQsTUFBTUQsR0FDTkcsV0FBYUQsRUFPakJFLGNBQ0ksT0FBT0Qsa0RBWThCLGNBQWlETCxNQU8xRkMsWUFBWUMsR0FDUkMsTUFBTUQsNkJBUWtCLGNBQW9DRixNQU9oRUMsWUFBWUMsR0FDUkMsTUFBTUQsbUNBUXdCLGNBQTBDRixNQVE1RUMsWUFBWUMsR0FDUkMsTUFBTUQsK0JBUW9CLGNBQXNDRixNQUdwRU8sT0FBUyxFQVNUTixZQUFZQyxFQUFTSyxHQUFPLEdBQ3hCSixNQUFNRCxHQUNORyxXQUFhRSxFQVFqQkMsVUFDSSxPQUFPSCx5Q0FRcUIsY0FBd0NMLE1BUXhFQyxZQUFZQyxHQUNSQyxNQUFNRCxnQ0FPcUIsY0FBdUNGLE1BRXRFUyxTQUFVLEVBU1ZSLFlBQVlDLEVBQVNPLEdBQVMsR0FDMUJOLE1BQU1ELEdBQ05HLGFBQWVJ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
